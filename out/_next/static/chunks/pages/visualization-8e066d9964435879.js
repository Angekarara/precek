(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[52],{5602:()=>{},17415:()=>{},30838:()=>{},39548:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/visualization",function(){return n(97099)}])},46915:(e,t,n)=>{var r={"./en/index":6434};function i(e){return n(a(e))}function a(e){if(!n.o(r,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=a,e.exports=i,i.id=46915},49882:()=>{},63083:()=>{},83164:()=>{},86797:()=>{},97099:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>e_});var r=n(42969),i=n(59860),a=n(63857),o=n(43081),s=n.n(o),l=n(14232),c=n(77328),d=n.n(c),u=n(48230),x=n.n(u),h=n(15654),f=n(25290),p=n(26778),v=n(37214),m=n(86256),j=n(27421),g=n(17620),A=n(45317),b=n(4306),y=n(46058),w=n(14796),O=n(22105),S=n(18847),D=n.n(S),k=n(70236),P=n(45794),C=n(86898),T=n.n(C),W=n(71776),L=n(77804),z=n.n(L),M=["words"];function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var I=function(e){return e.toLowerCase().replace(/[.,;:!?()[\]{}'"]/g,"")},R=new Set(["the","and","a","an","in","on","at","to","for","of","is","are","be","this","that","with","from","by","was","were","has","have","had","it","as","not","or","but"]);function q(e){return e.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{})}function B(e){return Object.entries(e).sort(function(e,t){return t[1]-e[1]})}let _=function(e){var t=(0,l.useState)([]),n=t[0],a=t[1],o=(0,l.useState)({items:[],overall:{}}),s=o[0],c=o[1],d=(0,l.useState)({nodes:[],links:[]}),u=d[0],x=d[1],h=(0,l.useState)([]),f=h[0],p=h[1],v=(0,l.useState)({ttr:0,uniqueWords:0,totalWords:0}),m=v[0],j=v[1],g=(0,l.useState)([]),A=g[0],b=g[1],y=(0,l.useState)(null),w=y[0],O=y[1],S=(0,l.useState)({nodes:[],links:[]}),D=S[0],C=S[1],L=(0,l.useState)(!1),F=L[0],_=L[1],V=(0,l.useMemo)(function(){return e&&0!==e.length?e.map(function(e){return e.processingResult||e.content||""}).join(" "):""},[e]),H=(0,l.useCallback)(function(e){return Object.entries(e.map(function(e){return e.processingResult||e.content||""}).join(" ").toLowerCase().split(/\s+/).map(I).filter(function(e){return e.length>2&&/^[a-z]+$/i.test(e)&&!R.has(e)}).reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{})).map(function(e){var t=(0,P.A)(e,2);return{word:t[0],count:t[1]}}).sort(function(e,t){return t.count-e.count}).slice(0,50)},[R]),U=(0,l.useCallback)(function(e){var t,n=new(T()),i=z().WordTokenizer,a=z().PorterStemmer,o=new i,s=(t={good:3,great:4,excellent:5,happy:3,love:3,awesome:4,amazing:4,best:4,better:2,nice:3,wonderful:4,fantastic:4,perfect:5,thank:2,thanks:2,positive:2,beautiful:3,joy:3,agree:1,appreciate:2},(0,r.A)(t,"excellent",5),(0,r.A)(t,"glad",3),(0,r.A)(t,"impressive",3),(0,r.A)(t,"bad",-3),(0,r.A)(t,"worst",-5),(0,r.A)(t,"terrible",-5),(0,r.A)(t,"awful",-4),(0,r.A)(t,"horrible",-5),(0,r.A)(t,"hate",-4),(0,r.A)(t,"poor",-3),(0,r.A)(t,"negative",-2),(0,r.A)(t,"wrong",-2),(0,r.A)(t,"sad",-2),(0,r.A)(t,"annoying",-2),(0,r.A)(t,"disappointed",-3),(0,r.A)(t,"disappointing",-3),(0,r.A)(t,"failure",-3),(0,r.A)(t,"fail",-2),(0,r.A)(t,"problem",-2),(0,r.A)(t,"sorry",-1),(0,r.A)(t,"angry",-3),(0,r.A)(t,"upset",-2),(0,r.A)(t,"unfortunately",-2),(0,r.A)(t,"boring",-2),(0,r.A)(t,"difficult",-1),(0,r.A)(t,"error",-2),t),l=function(e){var t=o.tokenize(e),n=0,r=0,i=[],a=[];t.forEach(function(e){var t=e.toLowerCase();if(void 0!==s[t]){var o=s[t];n+=o,r++,o>0?i.push(t):o<0&&a.push(t)}});var l=r>0?n/r:0;return{score:2*n,comparative:l,positive:i,negative:a}},c=function(e){var t=o.tokenize(e),n=0,r=0,i=[],l=[];t.forEach(function(e){var t=e.toLowerCase(),o=a.stem(t);if(void 0!==s[t]){var c=1.2*s[t];n+=c,r++,c>0?i.push(t):c<0&&l.push(t)}else if(void 0!==s[o]){var d=1.2*s[o];n+=d,r++,d>0?i.push(o):d<0&&l.push(o)}});var c=r>0?n/r:0;return{score:1.5*n,comparative:c,positive:i,negative:l}},d=0,u=0,x=0,h=e.map(function(e){var t=e.processingResult||e.content||"",r=e.timestamp?new Date(e.timestamp):new Date,i=n.analyze(t),a=i.score,o=i.comparative,s=(i.words,i.positive),h=i.negative,f=l(t),p=c(t);return d+=a,u+=f.score,x+=p.score,{id:e.id,date:r.toISOString().split("T")[0],sentiment:a,comparative:o,positiveWords:s,negativeWords:h,title:t?t.length>50?t.substring(0,50)+"...":t:"",textLength:t.length,lexicons:{standard:{score:a,comparative:o},afinn:{score:f.score,comparative:f.comparative},nlpjs:{score:p.score,comparative:p.comparative}}}}),f=h.reduce(function(e,t){return e+t.sentiment},0),p=h.length>0?f/h.length:0,v=h.length>0?u/h.length:0,m=h.length>0?x/h.length:0,j=h.flatMap(function(e){return e.positiveWords}),g=h.flatMap(function(e){return e.negativeWords}),A=q(j),b=q(g);return{items:h,overall:{average:p,total:f,topPositive:B(A).slice(0,10),topNegative:B(b).slice(0,10),positiveCount:j.length,negativeCount:g.length,lexiconAverages:{standard:p,afinn:v,nlpjs:m}}}},[]),G=(0,l.useCallback)(function(e){for(var t=e.map(function(e,t){return{id:e.id||t.toString(),name:e.originalName||"Text ".concat(t+1),val:1+(e.processingResult||e.content||"").length/1e3,words:new Set((e.processingResult||e.content||"").toLowerCase().split(/\s+/).map(I).filter(function(e){return e.length>2&&!R.has(e)}))}}),n=[],r=0;r<t.length;r++)for(var a=r+1;a<t.length;a++)!function(){var e=t[r],i=t[a],o=new Set((0,k.A)(e.words).filter(function(e){return i.words.has(e)})).size;o>=3&&n.push({source:e.id,target:i.id,value:o})}();return{nodes:t.map(function(e){return e.words,(0,i.A)(e,M)}),links:n}},[R]),K=(0,l.useCallback)(function(e,t){if(!t||""===t.trim()||!e)return[];var n=t.toLowerCase(),r=e.split(/\s+/),i=[];return r.forEach(function(e,t){if(I(e)===n){var a=Math.max(0,t-7),o=Math.min(r.length,t+7+1),s=r.slice(a,o);i.push({position:t,highlightedContext:s.map(function(e,n){return a+n===t?"<mark>".concat(e,"</mark>"):e}).join(" ")})}}),i},[]),Y=(0,l.useCallback)(function(e){if(!e||""===e.trim())return{ttr:0,uniqueWords:0,totalWords:0};var t=e.toLowerCase().split(/\s+/).filter(function(e){return e.length>0}).map(I),n=t.length,r=new Set(t).size;return{ttr:n>0?r/n:0,uniqueWords:r,totalWords:n}},[]),$=(0,l.useCallback)(function(e){if(!e||""===e.trim())return[];var t,n=e.split(/[.!?]+/).filter(function(e){return e.trim().length>5}),r={};n.forEach(function(e){for(var t=Array.from(new Set(e.toLowerCase().split(/\s+/).map(I).filter(function(e){return e.length>2&&!R.has(e)}))),n=0;n<t.length;n++){var i=t[n];r[i]||(r[i]={});for(var a=n+1;a<t.length;a++){var o=t[a];r[i][o]=(r[i][o]||0)+1,r[o]||(r[o]={}),r[o][i]=(r[o][i]||0)+1}}});var i,a,o=Object.entries(r).reduce(function(e,t){var n=(0,P.A)(t,2),r=n[0],i=n[1];return e[r]=Object.values(i).reduce(function(e,t){return e+t},0),e},{}),s=Object.keys(o).sort(function(e,t){return o[t]-o[e]}),l=[],c=new Set,d=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return E(e,void 0);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}}(e))){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(s);try{for(d.s();!(a=d.n()).done&&(t=function(){var e=a.value;if(c.has(e)||!r[e])return 0;var t=Object.keys(r[e]).sort(function(t,n){return r[e][n]-r[e][t]}).slice(0,5);if(t.length>0&&(l.push({mainWord:e,relatedWords:t,strength:o[e]}),c.add(e)),l.length>=12)return 1}(),0===t||1!==t););}catch(e){d.e(e)}finally{d.f()}var u=(null==(i=l[0])?void 0:i.strength)||1;return l.map(function(e){return N(N({},e),{},{normalizedStrength:e.strength/u})})},[R]),X=(0,l.useCallback)(function(e,t,n){if(!e||0===e.length||!t)return{totalWords:0,totalPhrases:0,totalTexts:0,vocabularyDensity:0,readabilityIndex:null,avgWordsPerSentence:0};var r=e.length,i=n.totalWords,a=n.ttr,o=new(z()).SentenceTokenizer().tokenize(t),s=o.length>0?o.length:1,l=i/s,c=null;if(i>0&&s>0)try{var d=t.length;c=(0,W.$)({sentence:s,word:i,character:d})}catch(e){console.error("Error calculating automated readability:",e),c=null}var u=new(z()).WordTokenizer().tokenize(t.toLowerCase()).filter(function(e){return e.length>1&&!R.has(e)}),x=Object.entries(z().NGrams.bigrams(u).reduce(function(e,t){var n=t.join(" ");return e[n]=(e[n]||0)+1,e},{})).filter(function(e){var t=(0,P.A)(e,2);return t[0],t[1]>1}),h=x.length,f=x.slice(0,50).map(function(e){var t=(0,P.A)(e,2),n=t[0];return{id:n,name:n,val:t[1]}}),p=[];f.map(function(e){return[e.id,e]});for(var v=0;v<f.length;v++)for(var m=f[v],j=new Set(m.id.split(" ")),g=v+1;g<f.length;g++){var A=f[g];A.id.split(" ").some(function(e){return j.has(e)})&&p.push({source:m.id,target:A.id,value:(m.val+A.val)/2})}return{totalWords:i,totalPhrases:h,totalTexts:r,vocabularyDensity:a,readabilityIndex:c,avgWordsPerSentence:l,phraseGraphData:{nodes:f,links:p}}},[R]);return(0,l.useEffect)(function(){if(!e||0===e.length){a([]),c({items:[],overall:{}}),x({nodes:[],links:[]}),p([]),j({ttr:0,uniqueWords:0,totalWords:0}),b([]),O(null),C({nodes:[],links:[]}),_(!1);return}_(!0);try{var t=H(e),n=U(e),r=G(e),i=Y(V),o=$(V),s=X(e,V,i),l=K(V,"");a(t),c(n),x(r),j(i),b(o),O(s),C(s.phraseGraphData),p(l)}catch(e){console.error("Error during initial text analysis processing:",e)}finally{_(!1)}},[e,V,H,U,G,K,Y,$,X]),{overviewData:w,wordFrequencyData:n,sentimentData:s,relationshipData:u,concordanceData:f,ttrData:m,topicModelData:A,phraseLinkData:D,isLoading:F,searchConcordance:(0,l.useCallback)(function(e){V&&p(K(V,e))},[V,K])}};var V=n(14578),H=n(92882),U=n(85325),G=n(4891),K=n(27625),Y=n(75801),$=n(37876),X=function(e){var t=e.title,n=e.value,r=e.tooltip;return(0,$.jsx)(y.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,$.jsxs)(G.A,{elevation:1,sx:{p:2,textAlign:"center",height:"100%"},children:[(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:1},children:[(0,$.jsx)(p.A,{variant:"subtitle1",gutterBottom:!0,sx:{mb:0,mr:.5},children:t}),r&&(0,$.jsx)(Y.A,{title:r,placement:"top",children:(0,$.jsx)(K.A,{fontSize:"small",color:"action"})})]}),(0,$.jsx)(p.A,{variant:"h5",component:"div",children:null!=n?n:"-"})]})})};let Z=function(e){var t=e.overviewData;if(e.isLoading)return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Text Overview Summary"})}),(0,$.jsx)(H.A,{children:(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Loading summary..."})]})})]});if(!t||0===t.totalTexts)return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Text Overview Summary"})}),(0,$.jsx)(H.A,{children:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",p:3},children:"No summary data available. Process some text content first to see the overview metrics."})})]});var n=t.totalWords,r=t.totalPhrases,i=t.totalTexts,a=t.vocabularyDensity,o=t.readabilityIndex,s=void 0===o?null:o,l=t.avgWordsPerSentence,c=(void 0===a?0:a).toFixed(3),d=(void 0===l?0:l).toFixed(1),u=null!==s?s.toFixed(1):"N/A";return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Text Overview Summary"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Key metrics calculated across all processed texts"})}),(0,$.jsx)(H.A,{children:(0,$.jsxs)(y.Ay,{container:!0,spacing:2,justifyContent:"center",children:[(0,$.jsx)(X,{title:"Total Texts",value:void 0===i?0:i,tooltip:"Number of individual text documents processed."}),(0,$.jsx)(X,{title:"Total Words",value:void 0===n?0:n,tooltip:"Total number of words across all texts."}),(0,$.jsx)(X,{title:"Total Phrases",value:void 0===r?0:r,tooltip:"Total number of significant phrases identified (e.g., common bigrams/trigrams)."}),(0,$.jsx)(X,{title:"Vocabulary Density (TTR)",value:c,tooltip:"Type-Token Ratio (Unique Words / Total Words). Higher indicates more diverse vocabulary."}),(0,$.jsx)(X,{title:"Avg. Words/Sentence",value:d,tooltip:"Average number of words per sentence."}),(0,$.jsx)(X,{title:"Readability Score",value:u,tooltip:"Estimated readability score (e.g., Flesch Reading Ease). Higher scores indicate easier readability. Varies by index used."})]})})]})};var J=n(94432),Q=n(34955),ee=D()(function(){return Promise.all([n.e(282),n.e(234)]).then(n.bind(n,55282))},{ssr:!1,loading:function(){return(0,$.jsx)(A.A,{size:24})},loadableGenerated:{webpack:function(){return[55282]}}});let et=function(e){var t=e.wordFrequencyData,n=e.isLoading,r=(0,l.useState)(""),i=r[0],a=r[1],o=(0,l.useState)(null),s=o[0],c=o[1],d=(0,l.useState)(!1),u=d[0],x=d[1],h=(0,l.useState)(""),f=h[0],m=h[1],j=Math.max.apply(Math,(0,k.A)(t.map(function(e){return e.count})).concat([1])),g=t.length,b=t.map(function(e){return{text:e.word,value:e.count}}),w=s&&!isNaN(parseInt(s))&&parseInt(s)>0?b.slice(0,parseInt(s)):b;return(0,l.useEffect)(function(){if(""===i){c(null),m("");return}var e=parseInt(i);if(!isNaN(e)){if(e>50)return void m("Value cannot be greater than 50");m("");var t=setTimeout(function(){x(!0);var t=e;e<1&&(t=1),e>g&&(t=g),c(t.toString()),x(!1)},300);return function(){return clearTimeout(t)}}},[i,g]),(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Word Frequency Analysis"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Most common words (Top 50) and visualization"})}),(0,$.jsx)(H.A,{children:n?(0,$.jsx)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,$.jsx)(p.A,{children:"Loading analysis..."})}):0===t.length?(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"No word frequency data available or text is too short."}):(0,$.jsxs)(v.A,{sx:{display:"flex",flexDirection:"column",gap:2},children:[(0,$.jsxs)(v.A,{sx:{display:"flex",gap:1,alignItems:"flex-start"},children:[(0,$.jsx)(p.A,{children:"Enter no. of words to display on word cloud (1-50):"}),(0,$.jsx)(Q.A,{placeholder:"Enter no. of words",inputProps:{inputMode:"numeric",min:1,max:50},value:i,onChange:function(e){var t=e.target.value;t.match(/[^0-9]/)||a(t)},size:"small",error:!!f,helperText:f,sx:{"& .MuiInputBase-root":{height:32}}})]}),(0,$.jsxs)(y.Ay,{container:!0,spacing:3,children:[(0,$.jsxs)(y.Ay,{item:!0,xs:12,md:6,children:[(0,$.jsxs)(p.A,{variant:"subtitle1",gutterBottom:!0,align:"center",children:["Word Cloud ",s?"(Top ".concat(s," words)"):"(All words)"]}),(0,$.jsx)(v.A,{sx:{height:350,border:"1px solid",borderColor:"divider",borderRadius:1,p:1,display:"flex",alignItems:"center",justifyContent:"center"},children:u?(0,$.jsx)(A.A,{size:24}):ee&&(0,$.jsx)(ee,{words:w,options:{rotations:2,rotationAngles:[-90,0],fontSizes:[12,60],padding:1,enableTooltip:!0}},"wordcloud-".concat(s||"all"))})]}),(0,$.jsxs)(y.Ay,{item:!0,xs:12,md:6,children:[(0,$.jsx)(p.A,{variant:"subtitle1",gutterBottom:!0,align:"center",children:"Frequency List"}),(0,$.jsx)(v.A,{sx:{maxHeight:350,overflowY:"auto",pr:1,border:"1px solid",borderColor:"divider",borderRadius:1,p:1},children:t.map(function(e,t){return(0,$.jsxs)(v.A,{sx:{mb:1.5},children:[(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,$.jsx)(p.A,{variant:"body2",fontWeight:"medium",children:e.word}),(0,$.jsx)(p.A,{variant:"caption",color:"text.secondary",children:e.count})]}),(0,$.jsx)(J.A,{variant:"determinate",value:e.count/j*100,sx:{height:6,borderRadius:1}})]},t)})})]})]})]})})]})};var en=n(26884),er=n(76),ei=n(92545),ea=n(36687),eo=n(60068),es=n(26266),el=n(94447),ec=n(78908),ed=n(41313),eu=n(90979);let ex=function(e){var t,n,r,i=e.data,a=e.mode,o=(e.syuzhetData,{top:10,right:10,bottom:20,left:30}),s=300-o.left-o.right,l=80-o.top-o.bottom,c=Object.entries((i||[]).reduce(function(e,t){var n=t.date||new Date().toISOString().split("T")[0];return e[n]||(e[n]=[]),e[n].push(t.sentiment),e},{})).map(function(e){var t=(0,P.A)(e,2),n=t[0],r=t[1];return{date:n,sentiment:r.reduce(function(e,t){return e+t},0)/r.length}}).sort(function(e,t){return new Date(e.date)-new Date(t.date)});if(0===c.length)return(0,$.jsx)(p.A,{variant:"caption",color:"text.secondary",sx:{display:"block",textAlign:"center",mt:2},children:"No data"});var d=c.map(function(e){return e.sentiment}),u=Math.max.apply(Math,(0,k.A)(d).concat([0])),x=Math.max(Math.abs(Math.min.apply(Math,(0,k.A)(d).concat([0]))),Math.abs(u)),h=0===x?1:x,f=-h,v=o.top+l-(0-f)/(h-f)*l,m="narrative"===(void 0===a?"time":a),j=[];if(m)j=d.map(function(e,t){return{x:t,sentiment:e,isKeyPoint:0===t||t===d.length-1||t>0&&t<d.length-1&&(e>0&&d[t-1]<0||e<0&&d[t-1]>0||Math.abs(e)>.7*h)}}),t=0,r=(n=j.length-1||1)-t||1;else{var g=c.map(function(e){return new Date(e.date)});t=new Date(Math.min.apply(Math,(0,k.A)(g))),n=new Date(Math.max.apply(Math,(0,k.A)(g))),1===g.length&&(t=new Date(t.setDate(t.getDate()-1)),n=new Date(n.setDate(n.getDate()+1))),r=n-t||1,j=c.map(function(e,t,n){var r=e.sentiment,i=0===t||t===n.length-1||t>0&&(r>0&&n[t-1].sentiment<0||r<0&&n[t-1].sentiment>0||Math.abs(r)>.7*h);return{x:new Date(e.date),sentiment:r,isKeyPoint:i}})}var A="",b="",y="";if(j.forEach(function(e,n){var i=m?o.left+s*(e.x/r):o.left+s*((e.x-t)/r),a=o.top+l-l*((e.sentiment-f)/(h-f||1));A+="".concat(0===n?"M":"L").concat(i.toFixed(2),",").concat(a.toFixed(2)," "),e.sentiment>=0?b+="".concat(""===b?"M":"L").concat(i.toFixed(2),",").concat(a.toFixed(2)," "):y+="".concat(""===y?"M":"L").concat(i.toFixed(2),",").concat(a.toFixed(2)," ")}),b){var w=o.left+s*((m?j[0].x:j[0].x-t)/r),O=o.left+s*((m?j[j.length-1].x:j[j.length-1].x-t)/r);b+="L".concat(O.toFixed(2),",").concat(v.toFixed(2)," L").concat(w.toFixed(2),",").concat(v.toFixed(2)," Z")}if(y){var S=j.findIndex(function(e){return e.sentiment<0}),D=j.length-1-(0,k.A)(j).reverse().findIndex(function(e){return e.sentiment<0});if(-1!==S&&-1!==D){var C=o.left+s*((m?j[S].x:j[S].x-t)/r),T=o.left+s*((m?j[D].x:j[D].x-t)/r);y+="L".concat(T.toFixed(2),",").concat(v.toFixed(2)," L").concat(C.toFixed(2),",").concat(v.toFixed(2)," Z")}}return(0,$.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 ".concat(300," ").concat(80),preserveAspectRatio:"xMidYMid meet",children:[(0,$.jsx)("line",{x1:o.left,y1:o.top+l/4,x2:300-o.right,y2:o.top+l/4,stroke:"rgba(0,0,0,0.05)",strokeWidth:"0.5"}),(0,$.jsx)("line",{x1:o.left,y1:o.top+3*l/4,x2:300-o.right,y2:o.top+3*l/4,stroke:"rgba(0,0,0,0.05)",strokeWidth:"0.5"}),(0,$.jsx)("line",{x1:o.left,y1:v,x2:300-o.right,y2:v,stroke:"rgba(0,0,0,0.3)",strokeWidth:"0.5",strokeDasharray:"2 2"}),(0,$.jsx)("line",{x1:o.left,y1:80-o.bottom,x2:300-o.right,y2:80-o.bottom,stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.5"}),(0,$.jsx)("line",{x1:o.left,y1:o.top,x2:o.left,y2:80-o.bottom,stroke:"rgba(0,0,0,0.2)",strokeWidth:"0.5"}),b&&(0,$.jsx)("path",{d:b,fill:"rgba(76, 175, 80, 0.15)",stroke:"none"}),y&&(0,$.jsx)("path",{d:y,fill:"rgba(244, 67, 54, 0.15)",stroke:"none"}),!m&&c.length>0?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("text",{x:o.left,y:80-o.bottom+10,textAnchor:"start",fontSize:"8",fill:"rgba(0,0,0,0.6)",children:new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,$.jsx)("text",{x:300-o.right,y:80-o.bottom+10,textAnchor:"end",fontSize:"8",fill:"rgba(0,0,0,0.6)",children:new Date(n).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}):m&&(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)("text",{x:o.left,y:80-o.bottom+10,textAnchor:"start",fontSize:"8",fill:"rgba(0,0,0,0.6)",children:"Start"}),(0,$.jsx)("text",{x:300-o.right,y:80-o.bottom+10,textAnchor:"end",fontSize:"8",fill:"rgba(0,0,0,0.6)",children:"End"})]}),[h,0,f].map(function(e,t){if(0===h&&0!==e)return null;var n=o.top+l-(e-f)/(h-f||1)*l;return 1!==t&&5>Math.abs(n-v)?null:(0,$.jsx)("text",{x:o.left-4,y:n+3,textAnchor:"end",fontSize:"8",fill:e>0?"rgba(76, 175, 80, 0.8)":e<0?"rgba(244, 67, 54, 0.8)":"rgba(0,0,0,0.6)",children:e.toFixed(1)},t)}),(0,$.jsx)("path",{d:A,fill:"none",stroke:"#1976d2",strokeWidth:"1.5",strokeLinejoin:"round"}),j.map(function(e,n){if(!e.isKeyPoint&&n%Math.max(1,Math.floor(j.length/10))!=0)return null;var i=m?o.left+s*(e.x/r):o.left+s*((e.x-t)/r),a=o.top+l-l*((e.sentiment-f)/(h-f||1));return(0,$.jsx)("circle",{cx:i,cy:a,r:e.isKeyPoint?"2.5":"1.5",fill:e.sentiment>0?"#4caf50":e.sentiment<0?"#f44336":"#1976d2",stroke:"#fff",strokeWidth:"0.5"},n)})]})};function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ef(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ep=function(e){return e>5?"success.main":e>0?"success.light":e<-5?"error.main":e<0?"error.light":"text.primary"};let ev=function(e){var t,n=e.sentimentData,r=e.isLoading,i=(0,l.useState)("standard"),a=i[0],o=i[1],s=(0,l.useState)("time"),c=s[0],d=s[1],u=n||{},x=u.items,h=void 0===x?[]:x,f=u.overall,m=void 0===f?{}:f,A=m.topPositive,b=void 0===A?[]:A,w=m.topNegative,O=void 0===w?[]:w,S=m.positiveCount,D=void 0===S?0:S,C=m.negativeCount,T=void 0===C?0:C,W=D+T||1,L=(0,l.useMemo)(function(){return new Set([].concat((0,k.A)(b.map(function(e){return(0,P.A)(e,1)[0]})),(0,k.A)(O.map(function(e){return(0,P.A)(e,1)[0]})))).size},[b,O]),z=(0,l.useMemo)(function(){if(!h||h.length<=1)return 0;var e=h.map(function(e){return e.sentiment}),t=e.reduce(function(e,t){return e+t},0)/e.length;return Math.sqrt(e.map(function(e){return Math.pow(e-t,2)}).reduce(function(e,t){return e+t},0)/e.length)},[h]),M=(0,l.useMemo)(function(){return h&&0!==h.length?(0,k.A)(h).sort(function(e,t){return Math.abs(t.sentiment)-Math.abs(e.sentiment)}).slice(0,3).map(function(e){return{sentiment:e.sentiment,text:e.title}}):[]},[h]),F=function(){return null!=n&&n.items?n.items.map(function(e){var t,n;return ef(ef({},e),{},{sentiment:(null==(t=e.lexicons)||null==(t=t[a])?void 0:t.score)||0,comparative:(null==(n=e.lexicons)||null==(n=n[a])?void 0:n.comparative)||0})}):[]},N=function(){var e;return(null==n||null==(e=n.overall)||null==(e=e.lexiconAverages)?void 0:e[a])||0},E=function(){return F()};return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Sentiment Analysis"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Analysis using multiple lexicons"})}),(0,$.jsx)(H.A,{children:r?(0,$.jsx)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:(0,$.jsx)(p.A,{children:"Loading analysis..."})}):h&&0!==h.length?(0,$.jsxs)(v.A,{children:[(0,$.jsxs)(j.A,{value:a,onChange:function(e,t){null!==t&&o(t)},variant:"standard",children:[(0,$.jsx)(g.A,{value:"standard",label:"Default"}),(0,$.jsx)(g.A,{value:"afinn",label:"AFINN"}),(0,$.jsx)(g.A,{value:"nlpjs",label:"NLP.js"})]}),(0,$.jsxs)(y.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,$.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,$.jsxs)(G.A,{elevation:1,sx:{p:2,textAlign:"center",height:"100%"},children:[(0,$.jsx)(p.A,{variant:"subtitle1",gutterBottom:!0,children:"Overall Sentiment"}),(0,$.jsx)(p.A,{variant:"h4",color:ep(N()),children:N().toFixed(1)}),(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:(t=N())>5?"Very Positive":t>2?"Positive":t>0?"Slightly Positive":t<-5?"Very Negative":t<-2?"Negative":t<0?"Slightly Negative":"Neutral"}),(0,$.jsxs)(v.A,{sx:{mt:1,display:"flex",justifyContent:"center",alignItems:"center"},children:[(0,$.jsxs)(p.A,{variant:"caption",color:"text.secondary",children:["Stability: ",z.toFixed(2)]}),(0,$.jsx)(Y.A,{title:"Lower values indicate more consistent sentiment across texts",children:(0,$.jsx)(eu.A,{fontSize:"small",sx:{ml:.5,fontSize:16,color:"text.disabled"}})})]})]})}),(0,$.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,$.jsxs)(G.A,{elevation:1,sx:{p:2,textAlign:"center",height:"100%"},children:[(0,$.jsx)(p.A,{variant:"subtitle1",gutterBottom:!0,children:"Positive vs. Negative Words"}),(0,$.jsxs)(v.A,{sx:{width:"100%",mt:1},children:[(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"space-between",mb:.5},children:[(0,$.jsxs)(p.A,{variant:"caption",children:["Negative (",T,")"]}),(0,$.jsxs)(p.A,{variant:"caption",children:["Positive (",D,")"]})]}),(0,$.jsxs)(v.A,{sx:{display:"flex",height:12,borderRadius:1,overflow:"hidden",bgcolor:"action.hover"},children:[(0,$.jsx)(v.A,{sx:{bgcolor:"error.main",width:"".concat(T/W*100,"%")}}),(0,$.jsx)(v.A,{sx:{bgcolor:"success.main",width:"".concat(D/W*100,"%")}})]}),(0,$.jsx)(v.A,{sx:{mt:1},children:(0,$.jsxs)(p.A,{variant:"caption",color:"text.secondary",children:["Emotional Vocabulary: ",L," unique terms"]})})]})]})}),(0,$.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,$.jsxs)(G.A,{elevation:1,sx:{p:2,height:"100%"},children:[(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,$.jsx)(p.A,{variant:"subtitle1",children:"Sentiment Pattern"}),(0,$.jsxs)(ed.A,{size:"small",value:c,exclusive:!0,onChange:function(e,t){null!==t&&d(t)},children:[(0,$.jsx)(ec.A,{value:"time","aria-label":"time-based",children:"Time"}),(0,$.jsx)(ec.A,{value:"narrative","aria-label":"narrative-based",children:"Arc"})]})]}),(0,$.jsx)(v.A,{sx:{height:80},children:(0,$.jsx)(ex,{data:E(),mode:c,syuzhetData:E()})}),(0,$.jsxs)(p.A,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,textAlign:"center"},children:["time"===c?"Sentiment over time":"Emotional arc of the narrative","combined"!==a&&" (".concat(a," lexicon)")]})]})})]}),(0,$.jsxs)(y.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,$.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,$.jsxs)(V.A,{elevation:1,sx:{height:"100%"},children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"subtitle1",children:"Top Positive Words"}),sx:{pb:0}}),(0,$.jsx)(H.A,{children:(0,$.jsx)(v.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:b.length>0?b.map(function(e,t){var n=(0,P.A)(e,2),r=n[0],i=n[1];return(0,$.jsx)(en.A,{label:"".concat(r," (").concat(i,")"),color:"success",variant:"outlined",size:"small"},t)}):(0,$.jsx)(p.A,{variant:"caption",children:"None"})})})]})}),(0,$.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,$.jsxs)(V.A,{elevation:1,sx:{height:"100%"},children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"subtitle1",children:"Top Negative Words"}),sx:{pb:0}}),(0,$.jsx)(H.A,{children:(0,$.jsx)(v.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:O.length>0?O.map(function(e,t){var n=(0,P.A)(e,2),r=n[0],i=n[1];return(0,$.jsx)(en.A,{label:"".concat(r," (").concat(i,")"),color:"error",variant:"outlined",size:"small"},t)}):(0,$.jsx)(p.A,{variant:"caption",children:"None"})})})]})}),(0,$.jsx)(y.Ay,{item:!0,xs:12,md:4,children:(0,$.jsxs)(V.A,{elevation:1,sx:{height:"100%"},children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"subtitle1",children:"Emotional Peaks"}),sx:{pb:0}}),(0,$.jsx)(H.A,{children:M.length>0?(0,$.jsx)(v.A,{children:M.map(function(e,t){return(0,$.jsxs)(v.A,{sx:{display:"flex",alignItems:"center",mb:1},children:[(0,$.jsx)(en.A,{label:e.sentiment.toFixed(1),size:"small",color:e.sentiment>0?"success":"error",sx:{mr:1,minWidth:42}}),(0,$.jsx)(p.A,{variant:"caption",sx:{flex:1,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.text})]},t)})}):(0,$.jsx)(p.A,{variant:"caption",children:"No significant peaks found"})})]})})]}),(0,$.jsx)(y.Ay,{container:!0,children:(0,$.jsx)(y.Ay,{item:!0,xs:12,children:(0,$.jsx)(eo.A,{children:(0,$.jsxs)(er.A,{children:[(0,$.jsx)(es.A,{children:(0,$.jsxs)(el.A,{children:[(0,$.jsx)(ea.A,{children:"Text"}),(0,$.jsxs)(ea.A,{align:"center",children:["Score (",a,")"]}),(0,$.jsx)(ea.A,{align:"center",children:"Normalized"}),(0,$.jsx)(ea.A,{children:"Keywords"})]})}),(0,$.jsx)(ei.A,{children:F().map(function(e){return(0,$.jsxs)(el.A,{hover:!0,children:[(0,$.jsx)(ea.A,{sx:{maxWidth:200,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),(0,$.jsx)(ea.A,{align:"center",sx:{color:ep(e.sentiment),fontWeight:"medium"},children:"number"==typeof e.sentiment?e.sentiment.toFixed(1):"N/A"}),(0,$.jsx)(ea.A,{align:"center",sx:{color:ep(e.comparative)},children:"number"==typeof e.comparative?e.comparative.toFixed(2):"N/A"}),(0,$.jsx)(ea.A,{sx:{maxWidth:150},children:(0,$.jsx)(v.A,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:e.lexicons&&"object"==typeof e.lexicons&&Object.entries(e.lexicons).filter(function(e){var t=(0,P.A)(e,2),n=t[0],r=t[1];return"combined"!==n&&r&&"object"==typeof r}).map(function(e){var t=(0,P.A)(e,2),n=t[0],r=t[1],i="number"==typeof r.score?r.score:0;return(0,$.jsx)(Y.A,{title:"".concat(n," lexicon: ").concat(i.toFixed(1)),children:(0,$.jsx)(en.A,{label:"".concat(n.substring(0,1).toUpperCase(),": ").concat(i.toFixed(1)),size:"small",color:i>0?"success":i<0?"error":"default",variant:"outlined",sx:{height:"20px",fontSize:"0.625rem"}})},n)})})})]},e.id||e.title)})})]})})})})]}):(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"No sentiment data available."})})]})};var em=D()(function(){return Promise.all([n.e(544),n.e(391),n.e(334),n.e(781),n.e(261)]).then(n.bind(n,35261)).then(function(e){return e.ForceGraph2D})},{ssr:!1,loading:function(){return(0,$.jsx)(A.A,{})},loadableGenerated:{webpack:function(){return[35261]}}});let ej=function(e){var t=e.relationshipData,n=e.isLoading,r=t||{},i=r.nodes,a=void 0===i?[]:i,o=r.links,s=void 0===o?[]:o;return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Text Relationships"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Visualizing connections between texts (basic similarity)"})}),(0,$.jsx)(H.A,{children:n?(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Loading relationships..."})]}):a.length<2?(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Not enough data points (at least 2) to visualize relationships."}):(0,$.jsx)(v.A,{sx:{height:400,border:"1px solid",borderColor:"divider",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:em&&(0,$.jsx)(em,{graphData:{nodes:a,links:s},nodeLabel:"name",nodeVal:"val",nodeAutoColorBy:"name",linkDirectionalParticles:+(s.length>0),linkDirectionalParticleWidth:2,height:398,width:600})})})]})};var eg=n(58751);function eA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eA(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ey=function(e){var t=e.ttrData,n=e.isLoading,r=(0,eg.A)(),i=t||{},a=i.ttr,o=i.uniqueWords,s=i.totalWords,l=void 0===s?0:s,c=(void 0===a?0:a).toFixed(3),d={p:2.5,textAlign:"center",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",border:"1px solid ".concat(r.palette.divider),borderRadius:r.shape.borderRadius};return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Type-Token Ratio (TTR) Analysis"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Measure of lexical diversity in the text"})}),(0,$.jsx)(H.A,{children:n?(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Loading TTR data..."})]}):0===l?(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Not enough text data (minimum words required) to calculate TTR."}):(0,$.jsxs)(v.A,{children:[(0,$.jsxs)(y.Ay,{container:!0,spacing:3,justifyContent:"center",alignItems:"stretch",children:[" ",(0,$.jsx)(y.Ay,{item:!0,xs:12,sm:4,children:(0,$.jsxs)(G.A,{elevation:0,sx:eb(eb({},d),{},{backgroundColor:r.palette.grey[100]}),children:[" ",(0,$.jsx)(p.A,{variant:"overline",color:"text.secondary",gutterBottom:!0,children:"Total Words"}),(0,$.jsx)(p.A,{variant:"h4",component:"div",children:l})]})}),(0,$.jsx)(y.Ay,{item:!0,xs:12,sm:4,children:(0,$.jsxs)(G.A,{elevation:0,sx:eb(eb({},d),{},{backgroundColor:r.palette.grey[100]}),children:[" ",(0,$.jsx)(p.A,{variant:"overline",color:"text.secondary",gutterBottom:!0,children:"Unique Words"}),(0,$.jsx)(p.A,{variant:"h4",component:"div",children:void 0===o?0:o})]})}),(0,$.jsx)(y.Ay,{item:!0,xs:12,sm:4,children:(0,$.jsxs)(G.A,{elevation:1,sx:eb(eb({},d),{},{backgroundColor:r.palette.primary.main,color:r.palette.primary.contrastText}),children:[(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",mb:1},children:[(0,$.jsx)(p.A,{variant:"overline",gutterBottom:!0,sx:{mb:0,mr:.5},children:"TTR Score"}),(0,$.jsx)(Y.A,{title:"Type-Token Ratio (Unique Words / Total Words). Higher values (closer to 1) indicate greater lexical diversity.",placement:"top",children:(0,$.jsx)(K.A,{fontSize:"small",sx:{color:r.palette.primary.contrastText}})})]}),(0,$.jsx)(p.A,{variant:"h4",component:"div",children:c}),(0,$.jsx)(p.A,{variant:"caption",children:"(Unique / Total)"})]})})]}),(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{mt:3,textAlign:"center"},children:"TTR measures the variety of vocabulary used. A higher TTR indicates greater lexical diversity. Values typically range from 0 to 1, though the meaningful range depends heavily on text length."})]})})]})};var ew=n(48464),eO=n(35068),eS=n(48430),eD=n(58535),ek=n(39149),eP=n.n(ek);let eC=function(e){var t=e.concordanceData,n=e.onSearch,r=e.isLoading,i=(0,l.useState)(""),a=i[0],o=i[1],s=(0,l.useRef)(n);(0,l.useEffect)(function(){s.current=n},[n]);var c=(0,l.useRef)(eP()(function(e){s.current&&s.current(e)},500)).current;return(0,l.useEffect)(function(){return function(){c.cancel()}},[c]),(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Concordance Analysis"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Find occurrences of a word in context"})}),(0,$.jsxs)(H.A,{children:[(0,$.jsxs)(v.A,{sx:{display:"flex",alignItems:"center",mb:2},children:[(0,$.jsx)(Q.A,{fullWidth:!0,label:"Search Term",variant:"outlined",value:a,onChange:function(e){var t=e.target.value;o(t),c(t.trim())},size:"small",sx:{mr:1}}),(0,$.jsx)(f.A,{variant:"contained",onClick:function(){c.cancel(),s.current&&s.current(a.trim())},startIcon:(0,$.jsx)(eD.A,{}),disabled:r||!a.trim(),children:"Search"})]}),r&&a.trim()?(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Searching..."})]}):t&&t.length>0?(0,$.jsx)(G.A,{variant:"outlined",sx:{maxHeight:400,overflowY:"auto"},children:(0,$.jsx)(ew.A,{dense:!0,children:t.map(function(e,t){return(0,$.jsx)(eO.Ay,{divider:!0,children:(0,$.jsx)(eS.A,{primary:(0,$.jsx)("span",{dangerouslySetInnerHTML:{__html:e.highlightedContext}}),secondary:"Position: ".concat(e.position)})},e.position||t)})})}):a.trim()?(0,$.jsxs)(p.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mt:2},children:['No occurrences found for "',a,'".']}):(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",sx:{textAlign:"center",mt:2},children:"Enter a term above to search for its context."})]})]})},eT=function(e){var t=e.topicModelData,n=e.isLoading;return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Topic Modeling (Simplified)"}),subheader:(0,$.jsxs)(v.A,{sx:{display:"flex",alignItems:"center"},children:[(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Identified potential topics based on word co-occurrence"}),(0,$.jsx)(Y.A,{title:"This is a basic topic modeling approach. More advanced techniques (like LDA) usually require server-side processing.",children:(0,$.jsx)(K.A,{fontSize:"small",sx:{ml:.5,color:"text.secondary"}})})]})}),(0,$.jsx)(H.A,{children:n?(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Loading topics..."})]}):t&&0!==t.length?(0,$.jsx)(y.Ay,{container:!0,spacing:2,children:t.map(function(e,t){var n;return(0,$.jsx)(y.Ay,{item:!0,xs:12,sm:6,md:4,children:(0,$.jsxs)(G.A,{elevation:1,sx:{p:2,height:"100%"},children:[(0,$.jsx)(p.A,{variant:"h6",gutterBottom:!0,sx:{fontSize:(n=e.normalizedStrength,"".concat(1+.5*n,"rem")),fontWeight:"bold",color:"primary.main",mb:1},children:e.mainWord}),(0,$.jsxs)(p.A,{variant:"caption",display:"block",color:"text.secondary",mb:1,children:["Strength: ",e.strength," (Normalized: ",e.normalizedStrength.toFixed(2),")"]}),(0,$.jsx)(v.A,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.relatedWords.map(function(e,t){return(0,$.jsx)(en.A,{label:e,size:"small",variant:"outlined"},t)})})]})},t)})}):(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"No topics could be identified from the text data."})})]})};var eW=D()(function(){return Promise.all([n.e(544),n.e(391),n.e(334),n.e(781),n.e(261)]).then(n.bind(n,35261)).then(function(e){return e.ForceGraph2D})},{ssr:!1,loading:function(){return(0,$.jsx)(A.A,{})},loadableGenerated:{webpack:function(){return[35261]}}});let eL=function(e){var t=e.phraseLinkData,n=e.isLoading,r=t||{},i=r.nodes,a=void 0===i?[]:i,o=r.links;return(0,$.jsxs)(V.A,{elevation:2,children:[(0,$.jsx)(U.A,{title:(0,$.jsx)(p.A,{variant:"h6",children:"Phrase Connections"}),subheader:(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Visualizing phrases that frequently appear close to each other in the text. Node size indicates phrase frequency."})}),(0,$.jsx)(H.A,{children:n?(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",p:3},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Loading phrase links..."})]}):a.length<2?(0,$.jsx)(p.A,{variant:"body2",color:"text.secondary",children:"Not enough common phrases (at least 2) found or linked to visualize connections."}):(0,$.jsx)(v.A,{sx:{height:450,border:"1px solid",borderColor:"divider",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:eW&&(0,$.jsx)(eW,{graphData:{nodes:a,links:void 0===o?[]:o},nodeLabel:"name",nodeVal:"val",nodeAutoColorBy:"name",linkDirectionalParticles:1,linkDirectionalParticleWidth:2,linkLabel:function(e){return"".concat(e.source.name," - ").concat(e.target.name)},height:448,width:Math.min(.8*window.innerWidth,800)})})})]})};var ez=["children","value","index"];function eM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eF(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eM(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eN(e){var t=e.children,n=e.value,r=e.index,a=(0,i.A)(e,ez);return(0,$.jsx)("div",eF(eF({role:"tabpanel",hidden:n!==r,id:"tabpanel-".concat(r),"aria-labelledby":"tab-".concat(r)},a),{},{children:n===r&&(0,$.jsx)(v.A,{sx:{pt:3},children:t})}))}let eE=function(e){var t=e.data,n=(0,l.useState)(0),r=n[0],i=n[1],a=_(t),o=a.overviewData,s=a.wordFrequencyData,c=a.sentimentData,d=a.relationshipData,u=a.ttrData,x=a.concordanceData,h=a.topicModelData,f=a.phraseLinkData,m=a.isLoading,b=a.searchConcordance,y=(0,l.useCallback)(function(e){b&&b(e)},[b]);return m&&!o?(0,$.jsxs)(v.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:[(0,$.jsx)(A.A,{}),(0,$.jsx)(p.A,{sx:{ml:2},children:"Analyzing data..."})]}):t&&0!==t.length?(0,$.jsxs)(v.A,{sx:{width:"100%"},children:[(0,$.jsx)(v.A,{sx:{borderBottom:1,borderColor:"divider",mb:2},children:(0,$.jsxs)(j.A,{value:r,onChange:function(e,t){i(t)},variant:"scrollable",scrollButtons:"auto","aria-label":"Text analysis tabs",children:[(0,$.jsx)(g.A,{label:"Overview",id:"tab-0","aria-controls":"tabpanel-0"}),(0,$.jsx)(g.A,{label:"Word Frequency",id:"tab-1","aria-controls":"tabpanel-1"}),(0,$.jsx)(g.A,{label:"Sentiment",id:"tab-2","aria-controls":"tabpanel-2"}),(0,$.jsx)(g.A,{label:"Relationships",id:"tab-3","aria-controls":"tabpanel-3"}),(0,$.jsx)(g.A,{label:"TTR",id:"tab-4","aria-controls":"tabpanel-4"}),(0,$.jsx)(g.A,{label:"Concordance",id:"tab-5","aria-controls":"tabpanel-5"}),(0,$.jsx)(g.A,{label:"Topics",id:"tab-6","aria-controls":"tabpanel-6"}),(0,$.jsx)(g.A,{label:"Phrase Links",id:"tab-7","aria-controls":"tabpanel-7"})]})}),(0,$.jsx)(eN,{value:r,index:0,children:(0,$.jsx)(Z,{overviewData:o,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:1,children:(0,$.jsx)(et,{wordFrequencyData:s,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:2,children:(0,$.jsx)(ev,{sentimentData:c,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:3,children:(0,$.jsx)(ej,{relationshipData:d,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:4,children:(0,$.jsx)(ey,{ttrData:u,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:5,children:(0,$.jsx)(eC,{concordanceData:x,onSearch:y,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:6,children:(0,$.jsx)(eT,{topicModelData:h,isLoading:m})}),(0,$.jsx)(eN,{value:r,index:7,children:(0,$.jsx)(eL,{phraseLinkData:f,isLoading:m})})]}):(0,$.jsx)(v.A,{sx:{p:3,textAlign:"center"},children:(0,$.jsx)(p.A,{color:"text.secondary",children:"No data available for analysis. Process some content first."})})};var eI=["children","value","index"];function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var eB=function(){return(0,$.jsx)(A.A,{size:48})};function e_(){var e=(0,l.useState)(!1),t=(e[0],e[1]);(0,l.useEffect)(function(){if(window.AFRAME)return void t(!0);var e=document.createElement("script");return e.src="https://aframe.io/releases/1.4.0/aframe.min.js",e.async=!0,e.onload=function(){console.log("A-Frame script loaded successfully"),setTimeout(function(){t(!0)},300)},e.onerror=function(e){console.error("Error loading A-Frame script:",e)},document.body.appendChild(e),function(){e.parentNode&&document.body.removeChild(e)}},[]);var r=(0,l.useState)([]),o=r[0],c=r[1],u=(0,l.useState)(0),A=u[0],S=u[1],k=(0,l.useState)(!0),P=k[0],C=k[1],T=(0,l.useState)(""),W=T[0],L=T[1];return((0,l.useEffect)(function(){var e;(e=(0,a.A)(s().mark(function e(){return s().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,C(!0),e.next=4,(0,h.WP)();case 4:c(e.sent||[]),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error loading data for visualization:",e.t0),L("Failed to load data for visualization");case 12:return e.prev=12,C(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[0,8,12,15]])})),function(){return e.apply(this,arguments)})()},[]),P)?(0,$.jsxs)(v.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:[(0,$.jsx)(eB,{}),(0,$.jsx)(p.A,{variant:"h6",sx:{ml:2},children:"Loading visualization data..."})]}):W?(0,$.jsxs)(v.A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:[(0,$.jsx)(b.A,{severity:"error",sx:{mb:2},children:W}),(0,$.jsx)(x(),{href:"/",passHref:!0,children:(0,$.jsx)(f.A,{variant:"contained",startIcon:(0,$.jsx)(w.A,{}),sx:{mt:2},children:"Return to Home"})})]}):(D()(function(){return n.e(769).then(n.bind(n,70769))},{ssr:!1,loading:function(){return(0,$.jsx)(eB,{})},loadableGenerated:{webpack:function(){return[70769]}}}),(0,$.jsxs)($.Fragment,{children:[(0,$.jsxs)(d(),{children:[(0,$.jsx)("title",{children:"Data Visualization - Precek"}),(0,$.jsx)("meta",{name:"description",content:"Visualize processed data including text analysis and VR representations."})]}),(0,$.jsxs)(m.A,{maxWidth:"lg",sx:{py:4},children:[(0,$.jsxs)(y.Ay,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:3},children:[(0,$.jsx)(y.Ay,{item:!0,children:(0,$.jsx)(p.A,{variant:"h4",component:"h1",gutterBottom:!0,children:"Data Visualization"})}),(0,$.jsx)(y.Ay,{item:!0,children:(0,$.jsx)(x(),{href:"/",passHref:!0,children:(0,$.jsx)(f.A,{variant:"outlined",startIcon:(0,$.jsx)(w.A,{}),children:"Return to Home"})})})]}),(0,$.jsx)(v.A,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:(0,$.jsx)(j.A,{value:A,onChange:function(e,t){S(t)},"aria-label":"visualization tabs",children:(0,$.jsx)(g.A,{label:"Text Analysis",id:"tab-0","aria-controls":"tabpanel-0"})})}),(0,$.jsx)(O.A,{in:0===A,timeout:500,unmountOnExit:!0,children:(0,$.jsxs)("div",{children:[" ",(0,$.jsx)(function(e){var t=e.children,n=e.value,r=e.index,a=(0,i.A)(e,eI);return(0,$.jsx)("div",eq(eq({role:"tabpanel",hidden:n!==r,id:"tabpanel-".concat(r),"aria-labelledby":"tab-".concat(r)},a),{},{children:n===r&&(0,$.jsx)(v.A,{sx:{pt:3},children:t})}))},{value:A,index:0,children:(0,$.jsx)(eE,{data:o})})]})})]})]}))}}},e=>{var t=t=>e(e.s=t);e.O(0,[90,162,444,404,128,880,764,837,608,732,265,356,968,28,473,494,934,909,587,654,636,593,792],()=>t(39548)),_N_E=e.O()}]);