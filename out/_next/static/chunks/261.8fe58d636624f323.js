(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[261],{1759:e=>{function n(e,n,r,i){e&&(n=n||[],e.traverse(e=>{if(e.isMesh){var o;(!(o=e.material)?[]:Array.isArray(o)?o:o.materials?o.materials:[o]).forEach(e=>{(!e||"envMap"in e)&&(n.length&&-1===n.indexOf(e.name)||(e.envMap=r,e.reflectivity=i,e.needsUpdate=!0))})}}))}e.exports=AFRAME.registerComponent("cube-env-map",{multiple:!0,schema:{path:{default:""},extension:{default:"jpg",oneOf:["jpg","png"]},enableBackground:{default:!1},reflectivity:{default:1,min:0,max:1},materials:{default:[]}},init:function(){let e=this.data;this.texture=new THREE.CubeTextureLoader().load([e.path+"posx."+e.extension,e.path+"negx."+e.extension,e.path+"posy."+e.extension,e.path+"negy."+e.extension,e.path+"posz."+e.extension,e.path+"negz."+e.extension]),this.texture.format=THREE.RGBAFormat,this.object3dsetHandler=()=>{let e=this.el.getObject3D("mesh"),r=this.data;n(e,r.materials,this.texture,r.reflectivity)},this.object3dsetHandler(),this.el.addEventListener("object3dset",this.object3dsetHandler)},update:function(e){let r=this.data,i=this.el.getObject3D("mesh"),o=[],a=[];if(r.materials.length&&(e.materials?(o=r.materials.filter(n=>!e.materials.includes(n)),a=e.materials.filter(e=>!r.materials.includes(e))):o=r.materials),o.length&&n(i,o,this.texture,r.reflectivity),a.length&&n(i,a,null,1),e.materials&&r.reflectivity!==e.reflectivity){let o=r.materials.filter(n=>e.materials.includes(n));o.length&&n(i,o,this.texture,r.reflectivity)}this.data.enableBackground&&!e.enableBackground?this.setBackground(this.texture):!this.data.enableBackground&&e.enableBackground&&this.setBackground(null)},remove:function(){this.el.removeEventListener("object3dset",this.object3dsetHandler);let e=this.el.getObject3D("mesh"),r=this.data;n(e,r.materials,null,1),r.enableBackground&&this.setBackground(null)},setBackground:function(e){this.el.sceneEl.object3D.background=e}})},3197:(e,n,r)=>{let i=r(90816),o=r(59132),a={LEFT:"left",RIGHT:"right"},s={MOVEMENT:1,ROTATION:2};e.exports=AFRAME.registerComponent("gamepad-controls",{GamepadButton:i,schema:{enabled:{default:!0},rotationSensitivity:{default:2}},init:function(){let e=this.el.sceneEl;this.system=e.systems["tracked-controls"]||e.systems["tracked-controls-webxr"]||{controllers:[]},this.prevTime=window.performance.now(),this.buttons={};let n=this.el.object3D.rotation;this.pitch=new THREE.Object3D,this.pitch.rotation.x=n.x,this.yaw=new THREE.Object3D,this.yaw.position.y=10,this.yaw.rotation.y=n.y,this.yaw.add(this.pitch),this._lookVector=new THREE.Vector2,this._moveVector=new THREE.Vector2,this._dpadVector=new THREE.Vector2,e.addBehavior(this)},update:function(){this.tick()},tick:function(e,n){this.updateButtonState(),this.updateRotation(n)},remove:function(){},isVelocityActive:function(){if(!this.data.enabled||!this.isConnected())return!1;let e=this._dpadVector,n=this._moveVector;this.getDpad(e),this.getJoystick(s.MOVEMENT,n);let r=e.x||n.x,i=e.y||n.y;return Math.abs(r)>.2||Math.abs(i)>.2},getVelocityDelta:function(){let e=this._dpadVector,n=this._moveVector;this.getDpad(e),this.getJoystick(s.MOVEMENT,n);let r=e.x||n.x,i=e.y||n.y,o=new THREE.Vector3;return Math.abs(r)>.2&&(o.x+=r),Math.abs(i)>.2&&(o.z+=i),o},isRotationActive:function(){if(!this.data.enabled||!this.isConnected())return!1;let e=this._lookVector;return this.getJoystick(s.ROTATION,e),Math.abs(e.x)>.2||Math.abs(e.y)>.2},updateRotation:function(e){if(!this.isRotationActive())return;let n=this.data,r=this.yaw,i=this.pitch;r.rotation.y=this.el.object3D.rotation.y,i.rotation.x=this.el.object3D.rotation.x;let o=this._lookVector;this.getJoystick(s.ROTATION,o),.2>=Math.abs(o.x)&&(o.x=0),.2>=Math.abs(o.y)&&(o.y=0),o.multiplyScalar(n.rotationSensitivity*e/1e3),r.rotation.y-=o.x,i.rotation.x-=o.y,i.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,i.rotation.x)),this.el.object3D.rotation.set(i.rotation.x,r.rotation.y,0)},updateButtonState:function(){let e=this.getGamepad(a.RIGHT);if(this.data.enabled&&e)for(var n=0;n<e.buttons.length;n++)e.buttons[n].pressed&&!this.buttons[n]?this.emit(new o("gamepadbuttondown",n,e.buttons[n])):!e.buttons[n].pressed&&this.buttons[n]&&this.emit(new o("gamepadbuttonup",n,e.buttons[n])),this.buttons[n]=e.buttons[n].pressed;else for(let e in this.buttons)this.buttons[e]=!1},emit:function(e){this.el.emit(e.type,e),this.el.emit(e.type+":"+e.index,new o(e.type,e.index,e))},getGamepad:function(){let e=[],n=[];return function(r){let i=this.el.sceneEl.components["proxy-controls"],o=i&&i.isConnected()&&i.getGamepad(0);if(o)return o;e.length=0;for(let n=0;n<this.system.controllers.length;n++){let i=this.system.controllers[n],o=i?i.gamepad:null;if(e.push(o),o&&i.handedness===r)return o}let a=navigator.getGamepads?navigator.getGamepads():n;for(let e=0;e<a.length;e++){let n=a[e];if(n&&n.hand===r)return n}return e[0]||a[0]}}(),getButton:function(e){return this.getGamepad(a.RIGHT).buttons[e]},getAxis:function(e){return this.getGamepad(e>1?a.RIGHT:a.LEFT).axes[e]},getJoystick:function(e,n){let r=this.getGamepad(e===s.MOVEMENT?a.LEFT:a.RIGHT);if(!r)return n.set(0,0);if("xr-standard"===r.mapping)switch(e){case s.MOVEMENT:return n.set(r.axes[2],r.axes[3]);case s.ROTATION:return n.set(r.axes[2],0)}else switch(e){case s.MOVEMENT:return n.set(r.axes[0],r.axes[1]);case s.ROTATION:return n.set(r.axes[2],r.axes[3])}throw Error('Unexpected joystick index "%d".',e)},getDpad:function(e){let n=this.getGamepad(a.LEFT);return n&&n.buttons[i.DPAD_RIGHT]?e.set(+!!n.buttons[i.DPAD_RIGHT].pressed+(n.buttons[i.DPAD_LEFT].pressed?-1:0),(n.buttons[i.DPAD_UP].pressed?-1:0)+ +!!n.buttons[i.DPAD_DOWN].pressed):e.set(0,0)},isConnected:function(){let e=this.getGamepad(a.LEFT);return!!(e&&e.connected)},getID:function(){return this.getGamepad(a.LEFT).id}})},3717:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5489:e=>{let n="-controls";e.exports=AFRAME.registerComponent("movement-controls",{dependencies:["rotation"],schema:{enabled:{default:!0},controls:{default:["gamepad","trackpad","keyboard","touch"]},speed:{default:.3,min:0},fly:{default:!1},constrainToNavMesh:{default:!1},camera:{default:"[movement-controls] [camera]",type:"selector"}},init:function(){let e=this.el;this.data.camera||(this.data.camera=e.querySelector("[camera]")),this.velocityCtrl=null,this.velocity=new THREE.Vector3,this.heading=new THREE.Quaternion,this.eventDetail={},this.navGroup=null,this.navNode=null,e.sceneEl.hasLoaded?this.injectControls():e.sceneEl.addEventListener("loaded",this.injectControls.bind(this))},update:function(e){let r=this.el,i=this.data,o=r.sceneEl.systems.nav;if(r.sceneEl.hasLoaded&&this.injectControls(),o&&i.constrainToNavMesh!==e.constrainToNavMesh&&(i.constrainToNavMesh?o.addAgent(this):o.removeAgent(this)),i.enabled!==e.enabled)for(let e=0;e<i.controls.length;e++){let r=i.controls[e]+n;this.el.setAttribute(r,{enabled:this.data.enabled})}},injectControls:function(){let e=this.data;for(let r=0;r<e.controls.length;r++){let i=e.controls[r]+n;this.el.setAttribute(i,{enabled:this.data.enabled})}},updateNavLocation:function(){this.navGroup=null,this.navNode=null},tick:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,o){if(!o)return;let a=this.el,s=this.data;if(!s.enabled)return;this.updateVelocityCtrl();let l=this.velocityCtrl,c=this.velocity;if(l)if(o/1e3>.2?c.set(0,0,0):this.updateVelocity(o),s.constrainToNavMesh&&!1!==l.isNavMeshConstrained){if(1e-5>c.lengthSq())return;e.copy(a.object3D.position),n.copy(c).multiplyScalar(o/1e3).add(e);let i=a.sceneEl.systems.nav;this.navGroup=null===this.navGroup?i.getGroup(e):this.navGroup,this.navNode=this.navNode||i.getNode(e,this.navGroup),this.navNode=i.clampStep(e,n,this.navGroup,this.navNode,r),a.object3D.position.copy(r)}else a.hasAttribute("velocity")?a.setAttribute("velocity",c):(a.object3D.position.x+=c.x*o/1e3,a.object3D.position.y+=c.y*o/1e3,a.object3D.position.z+=c.z*o/1e3)}}(),updateVelocityCtrl:function(){let e=this.data;if(e.enabled){for(let r=0,i=e.controls.length;r<i;r++){let i=this.el.components[e.controls[r]+n];if(i&&i.isVelocityActive()){this.velocityCtrl=i;return}}this.velocityCtrl=null}},updateVelocity:function(){let e=new THREE.Vector2,n=new THREE.Quaternion;return function(r){let i,o=this.el,a=this.velocityCtrl,s=this.velocity,l=this.data;if(a)if(a.getVelocityDelta)i=a.getVelocityDelta(r);else if(a.getVelocity)return void s.copy(a.getVelocity());else if(a.getPositionDelta)return void s.copy(a.getPositionDelta(r).multiplyScalar(1e3/r));else throw Error("Incompatible movement controls: ",a);if(o.hasAttribute("velocity")&&!l.constrainToNavMesh&&s.copy(this.el.getAttribute("velocity")),i&&l.enabled){let r=l.camera;n.copy(r.object3D.quaternion),n.premultiply(o.object3D.quaternion),i.applyQuaternion(n);let a=i.length();l.fly?(s.copy(i),s.multiplyScalar(16.66667*this.data.speed)):(e.set(i.x,i.z),e.setLength(a*this.data.speed*16.66667),s.x=e.x,s.y=0,s.z=e.y),(0!==s.x||0!==s.y||0!==s.z)&&(this.eventDetail.velocity=s,this.el.emit("moved",this.eventDetail))}}}()})},6106:e=>{e.exports=function(e){var n,r,i=e;if(!i)throw Error("Eventify cannot use falsy object as events subject");for(var o=["on","fire","off"],a=0;a<o.length;++a)if(i.hasOwnProperty(o[a]))throw Error("Subject cannot be eventified, since it already has property '"+o[a]+"'");var s=(n=e,r=Object.create(null),{on:function(e,i,o){if("function"!=typeof i)throw Error("callback is expected to be a function");var a=r[e];return a||(a=r[e]=[]),a.push({callback:i,ctx:o}),n},off:function(e,i){if(void 0===e)return r=Object.create(null),n;if(r[e])if("function"!=typeof i)delete r[e];else for(var o=r[e],a=0;a<o.length;++a)o[a].callback===i&&o.splice(a,1);return n},fire:function(e){var i,o=r[e];if(!o)return n;arguments.length>1&&(i=Array.prototype.splice.call(arguments,1));for(var a=0;a<o.length;++a){var s=o[a];s.callback.apply(s.ctx,i)}return n}});return e.on=s.on,e.off=s.off,e.fire=s.fire,e}},8877:e=>{e.exports=AFRAME.registerComponent("grab",{init:function(){this.system=this.el.sceneEl.systems.physics,this.GRABBED_STATE="grabbed",this.grabbing=!1,this.hitEl=null,this.physics=this.el.sceneEl.systems.physics,this.constraint=null,this.onHit=this.onHit.bind(this),this.onGripOpen=this.onGripOpen.bind(this),this.onGripClose=this.onGripClose.bind(this)},play:function(){let e=this.el;e.addEventListener("hit",this.onHit),e.addEventListener("gripdown",this.onGripClose),e.addEventListener("gripup",this.onGripOpen),e.addEventListener("trackpaddown",this.onGripClose),e.addEventListener("trackpadup",this.onGripOpen),e.addEventListener("triggerdown",this.onGripClose),e.addEventListener("triggerup",this.onGripOpen)},pause:function(){let e=this.el;e.removeEventListener("hit",this.onHit),e.removeEventListener("gripdown",this.onGripClose),e.removeEventListener("gripup",this.onGripOpen),e.removeEventListener("trackpaddown",this.onGripClose),e.removeEventListener("trackpadup",this.onGripOpen),e.removeEventListener("triggerdown",this.onGripClose),e.removeEventListener("triggerup",this.onGripOpen)},onGripClose:function(){this.grabbing=!0},onGripOpen:function(){let e=this.hitEl;this.grabbing=!1,e&&(e.removeState(this.GRABBED_STATE),this.hitEl=void 0,this.system.removeConstraint(this.constraint),this.constraint=null)},onHit:function(e){let n=e.detail.el;n.is(this.GRABBED_STATE)||!this.grabbing||this.hitEl||(n.addState(this.GRABBED_STATE),this.hitEl=n,this.constraint=new CANNON.LockConstraint(this.el.body,n.body),this.system.addConstraint(this.constraint))}})},12223:e=>{e.exports=function(e,n,r,i){this.from=e,this.to=n,this.length=r,this.coefficient=i}},12262:e=>{e.exports=AFRAME.registerComponent("trackpad-controls",{schema:{enabled:{default:!0},enableNegX:{default:!0},enablePosX:{default:!0},enableNegZ:{default:!0},enablePosZ:{default:!0},mode:{default:"touch",oneOf:["swipe","touch","press"]}},init:function(){this.dVelocity=new THREE.Vector3,this.zVel=0,this.xVel=0,this.bindMethods()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){let e=this.data,n=this.el.sceneEl;switch(n.addEventListener("axismove",this.onAxisMove),e.mode){case"swipe":case"touch":n.addEventListener("trackpadtouchstart",this.onTouchStart),n.addEventListener("trackpadtouchend",this.onTouchEnd);break;case"press":n.addEventListener("trackpaddown",this.onTouchStart),n.addEventListener("trackpadup",this.onTouchEnd)}},removeEventListeners:function(){let e=this.el.sceneEl;e.removeEventListener("axismove",this.onAxisMove),e.removeEventListener("trackpadtouchstart",this.onTouchStart),e.removeEventListener("trackpadtouchend",this.onTouchEnd),e.removeEventListener("trackpaddown",this.onTouchStart),e.removeEventListener("trackpadup",this.onTouchEnd)},isVelocityActive:function(){return this.data.enabled&&this.isMoving},getVelocityDelta:function(){return this.dVelocity.z=this.isMoving?-this.zVel:1,this.dVelocity.x=this.isMoving?this.xVel:1,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onAxisMove=this.onAxisMove.bind(this)},onTouchStart:function(e){switch(this.data.mode){case"swipe":this.canRecordAxis=!0,this.startingAxisData=[];break;case"touch":case"press":this.isMoving=!0}e.preventDefault()},onTouchEnd:function(e){"swipe"==this.data.mode&&(this.startingAxisData=[]),this.isMoving=!1,e.preventDefault()},onAxisMove:function(e){switch(this.data.mode){case"swipe":return this.handleSwipeAxis(e);case"touch":case"press":return this.handleTouchAxis(e)}},handleSwipeAxis:function(e){let n=this.data,r=e.detail.axis;if(0===this.startingAxisData.length&&this.canRecordAxis&&(this.canRecordAxis=!1,this.startingAxisData[0]=r[0],this.startingAxisData[1]=r[1]),this.startingAxisData.length>0){let e=0,i=0;n.enableNegX&&r[0]<this.startingAxisData[0]&&(e=-1),n.enablePosX&&r[0]>this.startingAxisData[0]&&(e=1),n.enablePosZ&&r[1]>this.startingAxisData[1]&&(i=-1),n.enableNegZ&&r[1]<this.startingAxisData[1]&&(i=1);let o=Math.abs(this.startingAxisData[1]-r[1]);Math.abs(this.startingAxisData[0]-r[0])>o?(this.zVel=0,this.xVel=e):(this.xVel=0,this.zVel=i),this.isMoving=!0}},handleTouchAxis:function(e){let n=this.data,r=e.detail.axis,i=0,o=0;n.enableNegX&&r[0]<0&&(i=-1),n.enablePosX&&r[0]>0&&(i=1),n.enablePosZ&&r[1]>0&&(o=-1),n.enableNegZ&&r[1]<0&&(o=1),Math.abs(r[0])>Math.abs(r[1])?(this.zVel=0,this.xVel=i):(this.xVel=0,this.zVel=o)}})},13576:e=>{e.exports=AFRAME.registerComponent("checkpoint-controls",{schema:{enabled:{default:!0},mode:{default:"teleport",oneOf:["teleport","animate"]},animateSpeed:{default:3}},init:function(){this.active=!0,this.checkpoint=null,this.isNavMeshConstrained=!1,this.offset=new THREE.Vector3,this.position=new THREE.Vector3,this.targetPosition=new THREE.Vector3},play:function(){this.active=!0},pause:function(){this.active=!1},setCheckpoint:function(e){let n=this.el;if(this.active&&this.checkpoint!==e){if(this.checkpoint&&n.emit("navigation-end",{checkpoint:this.checkpoint}),this.checkpoint=e,this.sync(),.1>this.position.distanceTo(this.targetPosition)){this.checkpoint=null;return}n.emit("navigation-start",{checkpoint:e}),"teleport"===this.data.mode&&(this.el.setAttribute("position",this.targetPosition),this.checkpoint=null,n.emit("navigation-end",{checkpoint:e}),n.components["movement-controls"].updateNavLocation())}},isVelocityActive:function(){return!!(this.active&&this.checkpoint)},getVelocity:function(){if(!this.active)return;let e=this.data,n=this.offset,r=this.position,i=this.targetPosition,o=this.checkpoint;return(this.sync(),.1>r.distanceTo(i))?(this.checkpoint=null,this.el.emit("navigation-end",{checkpoint:o}),n.set(0,0,0)):(n.setLength(e.animateSpeed),n)},sync:function(){let e=this.offset,n=this.position,r=this.targetPosition;n.copy(this.el.getAttribute("position")),this.checkpoint.object3D.getWorldPosition(r),r.add(this.checkpoint.components.checkpoint.getOffset()),e.copy(r).sub(n)}})},17797:e=>{function n(e){let n=document.getElementById(e),r=n.parentNode;try{r&&r.removeChild(n)}catch(e){}}e.exports=function(e){return e=e||{},function(r,i){var o;return o=i=i||{},new(e.Promise||Promise)(function(e,i){var a;let s=o.timeout||5e3,l="script_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),c=((a=document.createElement("script")).type="text/javascript",a.async=!0,a.id=l,a.src=r,a),u=setTimeout(function(){i(Error("Script request to "+r+" timed out")),n(l)},s),h=function(e){clearTimeout(e)};c.addEventListener("load",function(r){e({ok:!0}),h(u),n(l)}),c.addEventListener("error",function(e){i(Error("Script request to "+r+" failed "+e)),h(u),n(l)});let d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)})}}},19514:(e,n,r)=>{let i=r(60455);function o(e){let n=i(e);return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${n("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}e.exports=function(e){return Function("options",o(e))},e.exports.generateCreateDragForceFunctionBody=o},19992:e=>{function n(e){return new r("number"==typeof e?e:+new Date)}function r(e){this.seed=e}function i(e){return Math.sqrt(2*Math.PI/e)*Math.pow(1/Math.E*(e+1/(12*e-1/(10*e))),e)}function o(){var e=this.seed;return e=0xb55a4f09^(e=(e=(e=(e=0xc761c23c^(e=e+0x7ed55d16+(e<<12)|0)^e>>>19)+0x165667b1+(e<<5)|0)+0xd3a2646c^e<<9)+0xfd7046c5+(e<<3)|0)^e>>>16,this.seed=e,(0xfffffff&e)/0x10000000}e.exports=n,e.exports.random=n,e.exports.randomIterator=function(e,r){var i=r||n();if("function"!=typeof i.next)throw Error("customRandom does not match expected API: next() function is missing");return{forEach:function(n){var r,o,a;for(r=e.length-1;r>0;--r)a=e[o=i.next(r+1)],e[o]=e[r],e[r]=a,n(a);e.length&&n(e[0])},shuffle:function(){var n,r,o;for(n=e.length-1;n>0;--n)o=e[r=i.next(n+1)],e[r]=e[n],e[n]=o;return e}}},r.prototype.next=function(e){return Math.floor(this.nextDouble()*e)},r.prototype.nextDouble=o,r.prototype.uniform=o,r.prototype.gaussian=function(){var e,n,r;do e=(n=2*this.nextDouble()-1)*n+(r=2*this.nextDouble()-1)*r;while(e>=1||0===e);return n*Math.sqrt(-2*Math.log(e)/e)},r.prototype.random=o,r.prototype.levy=function(){var e=Math.pow(i(2.5)*Math.sin(1.5*Math.PI/2)/(1.5*i(1.25)*1.189207115002721),.6666666666666666);return this.gaussian()*e/Math.pow(Math.abs(this.gaussian()),.6666666666666666)}},21504:e=>{e.exports=AFRAME.registerComponent("nav-agent",{schema:{destination:{type:"vec3"},active:{default:!1},speed:{default:2}},init:function(){this.system=this.el.sceneEl.systems.nav,this.system.addAgent(this),this.group=null,this.path=[],this.raycaster=new THREE.Raycaster},remove:function(){this.system.removeAgent(this)},update:function(){this.path.length=0},updateNavLocation:function(){this.group=null,this.path=[]},tick:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3;return function(i,o){let a,s=this.el,l=this.data,c=this.raycaster,u=l.speed*o/1e3;if(!l.active)return;if(!this.path.length){let n=this.el.object3D.position;this.group=this.group||this.system.getGroup(n),this.path=this.system.getPath(n,e.copy(l.destination),this.group)||[],s.emit("navigation-start")}if(!this.path.length){console.warn("[nav] Unable to find path to %o.",l.destination),this.el.setAttribute("nav-agent",{active:!1}),s.emit("navigation-end");return}let h=s.object3D.position,d=this.path[0];if(n.subVectors(d,h),n.length()<u){if(this.path.shift(),!this.path.length){this.el.setAttribute("nav-agent",{active:!1}),s.emit("navigation-end");return}r.copy(h),a=this.path[0]}else r.copy(n.setLength(u)).add(h),a=d;a.y=h.y,s.object3D.lookAt(a),c.ray.origin.copy(r),c.ray.origin.y+=1.5,c.ray.direction={x:0,y:-1,z:0};let f=c.intersectObject(this.system.getNavMesh());f.length?(n.subVectors(f[0].point,h),h.add(n.setLength(u))):h.copy(r)}}()})},22769:e=>{e.exports=AFRAME.registerComponent("sphere-collider",{schema:{enabled:{default:!0},interval:{default:80},objects:{default:""},state:{default:"collided"},radius:{default:.05},watch:{default:!0}},init:function(){this.observer=null,this.els=[],this.collisions=[],this.prevCheckTime=void 0,this.eventDetail={},this.handleHit=this.handleHit.bind(this),this.handleHitEnd=this.handleHitEnd.bind(this)},play:function(){let e=this.el.sceneEl;this.data.watch&&(this.observer=new MutationObserver(this.update.bind(this,null)),this.observer.observe(e,{childList:!0,subtree:!0}))},pause:function(){this.observer&&(this.observer.disconnect(),this.observer=null)},update:function(){let e,n=this.data;e=n.objects?this.el.sceneEl.querySelectorAll(n.objects):this.el.sceneEl.children,this.els=Array.prototype.slice.call(e)},tick:function(){let e=new THREE.Vector3,n=new THREE.Vector3,r=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Box3,a=[],s=new Map;return function(l){var c;let u;if(!this.data.enabled)return;let h=this.prevCheckTime;if(h&&l-h<this.data.interval)return;this.prevCheckTime=l;let d=this.el,f=this.data;d.getObject3D("mesh")&&(a.length=0,s.clear(),d.object3D.getWorldPosition(e),d.object3D.getWorldScale(r),u=f.radius*Math.max((c=r).x,c.y,c.z),this.els.forEach(function(r){let l,c,h,d;r.isEntity&&(c=r.getObject3D("mesh"))&&(o.setFromObject(c).getSize(i),l=Math.sqrt(2*(d=Math.max(i.x,i.y,i.z)/2)*d),o.getCenter(n),l&&(h=e.distanceTo(n))<l+u&&(a.push(r),s.set(r,h)))}),a.sort((e,n)=>s.get(e)>s.get(n)?1:-1).forEach(this.handleHit),this.collisions.filter(e=>!s.has(e)).forEach(this.handleHitEnd),function(e,n){e.length=0;for(let r=0;r<n.length;r++)e[r]=n[r]}(this.collisions,a))}}(),handleHit:function(e){e.emit("hit"),e.addState(this.data.state),this.eventDetail.el=e,this.el.emit("hit",this.eventDetail)},handleHitEnd:function(e){e.emit("hitend"),e.removeState(this.data.state),this.eventDetail.el=e,this.el.emit("hitend",this.eventDetail)}})},24207:e=>{let n={once:THREE.LoopOnce,repeat:THREE.LoopRepeat,pingpong:THREE.LoopPingPong};function r(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}e.exports=AFRAME.registerComponent("animation-mixer",{schema:{clip:{default:"*"},useRegExp:{default:!1},duration:{default:0},clampWhenFinished:{default:!1,type:"boolean"},crossFadeDuration:{default:0},loop:{default:"repeat",oneOf:Object.keys(n)},repetitions:{default:1/0,min:0},timeScale:{default:1},startAt:{default:0}},init:function(){this.model=null,this.mixer=null,this.activeActions=[];let e=this.el.getObject3D("mesh");e?this.load(e):this.el.addEventListener("model-loaded",e=>{this.load(e.detail.model)})},load:function(e){let n=this.el;this.model=e,this.mixer=new THREE.AnimationMixer(e),this.mixer.addEventListener("loop",e=>{n.emit("animation-loop",{action:e.action,loopDelta:e.loopDelta})}),this.mixer.addEventListener("finished",e=>{n.emit("animation-finished",{action:e.action,direction:e.direction})}),this.data.clip&&this.update({})},remove:function(){this.mixer&&this.mixer.stopAllAction()},update:function(e){if(!e)return;let r=this.data,i=AFRAME.utils.diff(r,e);if("clip"in i){this.stopAction(),r.clip&&this.playAction();return}this.activeActions.forEach(e=>{"duration"in i&&r.duration&&e.setDuration(r.duration),"clampWhenFinished"in i&&(e.clampWhenFinished=r.clampWhenFinished),("loop"in i||"repetitions"in i)&&e.setLoop(n[r.loop],r.repetitions),"timeScale"in i&&e.setEffectiveTimeScale(r.timeScale)})},stopAction:function(){let e=this.data;for(let n=0;n<this.activeActions.length;n++)e.crossFadeDuration?this.activeActions[n].fadeOut(e.crossFadeDuration):this.activeActions[n].stop();this.activeActions.length=0},playAction:function(){if(!this.mixer)return;let e=this.model,i=this.data,o=e.animations||(e.geometry||{}).animations||[];if(!o.length)return;let a=i.useRegExp?i.clip:RegExp("^"+i.clip.split(/\*+/).map(r).join(".*")+"$");for(let r,s=0;r=o[s];s++)if(r.name.match(a)){let o=this.mixer.clipAction(r,e);o.enabled=!0,o.clampWhenFinished=i.clampWhenFinished,i.duration&&o.setDuration(i.duration),1!==i.timeScale&&o.setEffectiveTimeScale(i.timeScale),o.startAt(this.mixer.time-i.startAt/1e3),o.setLoop(n[i.loop],i.repetitions).fadeIn(i.crossFadeDuration).play(),this.activeActions.push(o)}},tick:function(e,n){this.mixer&&!isNaN(n)&&this.mixer.update(n/1e3)}})},27550:(e,n,r)=>{let i=r(60455),o=r(94525);function a(e){let n=i(e),r=Math.pow(2,e);return`
${h()}
${u(e)}
${s(e)}
${c(e)}
${l(e)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${function(e){let n=[];for(let i=0;i<r;++i)n.push(`${e}quad${i} = null;`);return n.join("\n")}("      node.")}
      node.body = null;
      node.mass = ${n("node.mass_{var} = ",{join:""})}0;
      ${n("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${n("var d{var};",{indent:4})}
    var r; 
    ${n("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${n("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${n("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${n("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${n("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${n("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < θ, treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${o(0)} - node.min_${o(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${n("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${function(){let e=Array(11).join(" "),n=[];for(let i=0;i<r;++i)n.push(e+`if (node.quad${i}) {`),n.push(e+`  queue[pushIdx] = node.quad${i};`),n.push(e+"  queueLength += 1;"),n.push(e+"  pushIdx += 1;"),n.push(e+"}");return n.join("\n")}()}
        }
      }
    }

    ${n("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${n("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${n("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${n("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${n("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${n("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${n("root.min_{var} = {var}min;",{indent:4})}
    ${n("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${n("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${n("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${n("var min_{var} = node.min_{var};",{indent:8})}
        ${n("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${function(n){let r=[],i=Array(9).join(" ");for(let n=0;n<e;++n)r.push(i+`if (${o(n)} > max_${o(n)}) {`),r.push(i+`  quadIdx = quadIdx + ${Math.pow(2,n)};`),r.push(i+`  min_${o(n)} = max_${o(n)};`),r.push(i+`  max_${o(n)} = node.max_${o(n)};`),r.push(i+"}");return r.join("\n")}(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${n("child.min_{var} = min_{var};",{indent:10})}
          ${n("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${n("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${n("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`}function s(e){let n=i(e);return`
  function isSamePosition(point1, point2) {
    ${n("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${n("d{var} < 1e-8",{join:" && "})};
  }  
`}function l(e){var n=Math.pow(2,e);return`
function setChild(node, idx, child) {
  ${function(){let e=[];for(let r=0;r<n;++r){let n=0===r?"  ":"  else ";e.push(`${n}if (idx === ${r}) node.quad${r} = child;`)}return e.join("\n")}()}
}`}function c(e){return`function getChild(node, idx) {
${function(){let n=[],r=Math.pow(2,e);for(let e=0;e<r;++e)n.push(`  if (idx === ${e}) return node.quad${e};`);return n.join("\n")}()}
  return null;
}`}function u(e){let n=i(e),r=Math.pow(2,e);return`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${function(e){let n=[];for(let i=0;i<r;++i)n.push(`${e}quad${i} = null;`);return n.join("\n")}("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${n("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${n("this.min_{var} = 0;",{indent:2})}
  ${n("this.max_{var} = 0;",{indent:2})}
}
`}function h(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}e.exports=function(e){return Function(a(e))()},e.exports.generateQuadTreeFunctionBody=a,e.exports.getInsertStackCode=h,e.exports.getQuadNodeCode=u,e.exports.isSamePosition=s,e.exports.getChildBodyCode=c,e.exports.setChildBodyCode=l},28035:e=>{e.exports=AFRAME.registerPrimitive("a-grid",{defaultComponents:{geometry:{primitive:"plane",width:75,height:75},rotation:{x:-90,y:0,z:0},material:{src:"url(https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v1.16.3/assets/grid.png)",repeat:"75 75"}},mappings:{width:"geometry.width",height:"geometry.height",src:"material.src"}})},29737:(e,n,r)=>{r(24207),r(72771),r(32590),r(68474),r(54952)},31742:(e,n,r)=>{let{Pathfinding:i}=r(77658),o=new i,a="level";e.exports=AFRAME.registerSystem("nav",{init:function(){this.navMesh=null,this.agents=new Set},setNavMeshGeometry:function(e){this.navMesh=new THREE.Mesh(e),o.setZoneData(a,i.createZone(e)),Array.from(this.agents).forEach(e=>e.updateNavLocation())},getNavMesh:function(){return this.navMesh},addAgent:function(e){this.agents.add(e)},removeAgent:function(e){this.agents.delete(e)},getPath:function(e,n,r){return this.navMesh?o.findPath(e,n,a,r):null},getGroup:function(e){return this.navMesh?o.getGroup(a,e):null},getNode:function(e,n){return this.navMesh?o.getClosestNode(e,a,n,!0):null},clampStep:function(e,n,r,i,s){return this.navMesh?i?o.clampStep(e,n,i,a,r,s):(s.copy(n),this.getNode(n,r)):(s.copy(n),null)}})},32590:(e,n,r)=>{"use strict";let i,o,a;var s=r(71912),l={},c=function(e,n,r,i,o){var a=new Worker(l[n]||(l[n]=URL.createObjectURL(new Blob([e+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return a.onmessage=function(e){var n=e.data,r=n.$e$;if(r){var i=Error(r[0]);i.code=r[1],i.stack=r[2],o(i,null)}else o(null,n)},a.postMessage(r,i),a},u=Uint8Array,h=Uint16Array,d=Int32Array,f=new u([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p=new u([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),m=new u([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=function(e,n){for(var r=new h(31),i=0;i<31;++i)r[i]=n+=1<<e[i-1];for(var o=new d(r[30]),i=1;i<30;++i)for(var a=r[i];a<r[i+1];++a)o[a]=a-r[i]<<5|i;return{b:r,r:o}},y=g(f,2),v=y.b,b=y.r;v[28]=258,b[258]=28;for(var _=g(p,0),w=_.b,x=_.r,k=new h(32768),E=0;E<32768;++E){var A=(43690&E)>>1|(21845&E)<<1;A=(61680&(A=(52428&A)>>2|(13107&A)<<2))>>4|(3855&A)<<4,k[E]=((65280&A)>>8|(255&A)<<8)>>1}for(var O=function(e,n,r){for(var i,o=e.length,a=0,s=new h(n);a<o;++a)e[a]&&++s[e[a]-1];var l=new h(n);for(a=1;a<n;++a)l[a]=l[a-1]+s[a-1]<<1;if(r){i=new h(1<<n);var c=15-n;for(a=0;a<o;++a)if(e[a])for(var u=a<<4|e[a],d=n-e[a],f=l[e[a]-1]++<<d,p=f|(1<<d)-1;f<=p;++f)i[k[f]>>c]=u}else for(a=0,i=new h(o);a<o;++a)e[a]&&(i[a]=k[l[e[a]-1]++]>>15-e[a]);return i},T=new u(288),E=0;E<144;++E)T[E]=8;for(var E=144;E<256;++E)T[E]=9;for(var E=256;E<280;++E)T[E]=7;for(var E=280;E<288;++E)T[E]=8;for(var C=new u(32),E=0;E<32;++E)C[E]=5;var P=O(T,9,1),M=O(C,5,1),S=function(e){for(var n=e[0],r=1;r<e.length;++r)e[r]>n&&(n=e[r]);return n},D=function(e,n,r){var i=n/8|0;return(e[i]|e[i+1]<<8)>>(7&n)&r},N=function(e,n){var r=n/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(7&n)},j=function(e){return(e+7)/8|0},R=function(e,n,r){return(null==n||n<0)&&(n=0),(null==r||r>e.length)&&(r=e.length),new u(e.subarray(n,r))},L=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(e,n,r){var i=Error(n||L[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,I),!r)throw i;return i},z=function(e,n,r,i){var o=e.length,a=i?i.length:0;if(!o||n.f&&!n.l)return r||new u(0);var s=!r,l=s||2!=n.i,c=n.i;s&&(r=new u(3*o));var h=function(e){var n=r.length;if(e>n){var i=new u(Math.max(2*n,e));i.set(r),r=i}},d=n.f||0,g=n.p||0,y=n.b||0,b=n.l,_=n.d,x=n.m,k=n.n,E=8*o;do{if(!b){d=D(e,g,1);var A=D(e,g+1,3);if(g+=3,A)if(1==A)b=P,_=M,x=9,k=5;else if(2==A){var T=D(e,g,31)+257,C=D(e,g+10,15)+4,L=T+D(e,g+5,31)+1;g+=14;for(var z=new u(L),F=new u(19),B=0;B<C;++B)F[m[B]]=D(e,g+3*B,7);g+=3*C;for(var U=S(F),V=(1<<U)-1,H=O(F,U,1),B=0;B<L;){var q=H[D(e,g,V)];g+=15&q;var G=q>>4;if(G<16)z[B++]=G;else{var K=0,$=0;for(16==G?($=3+D(e,g,3),g+=2,K=z[B-1]):17==G?($=3+D(e,g,7),g+=3):18==G&&($=11+D(e,g,127),g+=7);$--;)z[B++]=K}}var Y=z.subarray(0,T),W=z.subarray(T);x=S(Y),k=S(W),b=O(Y,x,1),_=O(W,k,1)}else I(1);else{var G=j(g)+4,X=e[G-4]|e[G-3]<<8,Z=G+X;if(Z>o){c&&I(0);break}l&&h(y+X),r.set(e.subarray(G,Z),y),n.b=y+=X,n.p=g=8*Z,n.f=d;continue}if(g>E){c&&I(0);break}}l&&h(y+131072);for(var J=(1<<x)-1,Q=(1<<k)-1,ee=g;;ee=g){var K=b[N(e,g)&J],et=K>>4;if((g+=15&K)>E){c&&I(0);break}if(K||I(2),et<256)r[y++]=et;else if(256==et){ee=g,b=null;break}else{var en=et-254;if(et>264){var B=et-257,er=f[B];en=D(e,g,(1<<er)-1)+v[B],g+=er}var ei=_[N(e,g)&Q],eo=ei>>4;ei||I(3),g+=15&ei;var W=w[eo];if(eo>3){var er=p[eo];W+=N(e,g)&(1<<er)-1,g+=er}if(g>E){c&&I(0);break}l&&h(y+131072);var ea=y+en;if(y<W){var es=a-W,el=Math.min(W,ea);for(es+y<0&&I(3);y<el;++y)r[y]=i[es+y]}for(;y<ea;++y)r[y]=r[y-W]}}n.l=b,n.p=ee,n.b=y,n.f=d,b&&(d=1,n.m=x,n.d=_,n.n=k)}while(!d);return y!=r.length&&s?R(r,0,y):r.subarray(0,y)},F=function(e,n,r){r<<=7&n;var i=n/8|0;e[i]|=r,e[i+1]|=r>>8},B=function(e,n,r){r<<=7&n;var i=n/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},U=function(e,n){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var o=r.length,a=r.slice();if(!o)return{t:Y,l:0};if(1==o){var s=new u(r[0].s+1);return s[r[0].s]=1,{t:s,l:1}}r.sort(function(e,n){return e.f-n.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,f=1,p=2;for(r[0]={s:-1,f:l.f+c.f,l:l,r:c};f!=o-1;)l=r[r[d].f<r[p].f?d++:p++],c=r[d!=f&&r[d].f<r[p].f?d++:p++],r[f++]={s:-1,f:l.f+c.f,l:l,r:c};for(var m=a[0].s,i=1;i<o;++i)a[i].s>m&&(m=a[i].s);var g=new h(m+1),y=V(r[f-1],g,0);if(y>n){var i=0,v=0,b=y-n,_=1<<b;for(a.sort(function(e,n){return g[n.s]-g[e.s]||e.f-n.f});i<o;++i){var w=a[i].s;if(g[w]>n)v+=_-(1<<y-g[w]),g[w]=n;else break}for(v>>=b;v>0;){var x=a[i].s;g[x]<n?v-=1<<n-g[x]++-1:++i}for(;i>=0&&v;--i){var k=a[i].s;g[k]==n&&(--g[k],++v)}y=n}return{t:new u(g),l:y}},V=function(e,n,r){return -1==e.s?Math.max(V(e.l,n,r+1),V(e.r,n,r+1)):n[e.s]=r},H=function(e){for(var n=e.length;n&&!e[--n];);for(var r=new h(++n),i=0,o=e[0],a=1,s=function(e){r[i++]=e},l=1;l<=n;++l)if(e[l]==o&&l!=n)++a;else{if(!o&&a>2){for(;a>138;a-=138)s(32754);a>2&&(s(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(s(o),--a;a>6;a-=6)s(8304);a>2&&(s(a-3<<5|8208),a=0)}for(;a--;)s(o);a=1,o=e[l]}return{c:r.subarray(0,i),n:n}},q=function(e,n){for(var r=0,i=0;i<n.length;++i)r+=e[i]*n[i];return r},G=function(e,n,r){var i=r.length,o=j(n+2);e[o]=255&i,e[o+1]=i>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var a=0;a<i;++a)e[o+a+4]=r[a];return(o+4+i)*8},K=function(e,n,r,i,o,a,s,l,c,u,d){F(n,d++,r),++o[256];for(var g,y,v,b,_=U(o,15),w=_.t,x=_.l,k=U(a,15),E=k.t,A=k.l,P=H(w),M=P.c,S=P.n,D=H(E),N=D.c,j=D.n,R=new h(19),L=0;L<M.length;++L)++R[31&M[L]];for(var L=0;L<N.length;++L)++R[31&N[L]];for(var I=U(R,7),z=I.t,V=I.l,K=19;K>4&&!z[m[K-1]];--K);var $=u+5<<3,Y=q(o,T)+q(a,C)+s,W=q(o,w)+q(a,E)+s+14+3*K+q(R,z)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&$<=Y&&$<=W)return G(n,d,e.subarray(c,c+u));if(F(n,d,1+(W<Y)),d+=2,W<Y){g=O(w,x,0),y=w,v=O(E,A,0),b=E;var X=O(z,V,0);F(n,d,S-257),F(n,d+5,j-1),F(n,d+10,K-4),d+=14;for(var L=0;L<K;++L)F(n,d+3*L,z[m[L]]);d+=3*K;for(var Z=[M,N],J=0;J<2;++J)for(var Q=Z[J],L=0;L<Q.length;++L){var ee=31&Q[L];F(n,d,X[ee]),d+=z[ee],ee>15&&(F(n,d,Q[L]>>5&127),d+=Q[L]>>12)}}else g=null,y=T,v=null,b=C;for(var L=0;L<l;++L){var et=i[L];if(et>255){var ee=et>>18&31;B(n,d,g[ee+257]),d+=y[ee+257],ee>7&&(F(n,d,et>>23&31),d+=f[ee]);var en=31&et;B(n,d,v[en]),d+=b[en],en>3&&(B(n,d,et>>5&8191),d+=p[en])}else B(n,d,g[et]),d+=y[et]}return B(n,d,g[256]),d+y[256]},$=new d([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Y=new u(0),W=function(e,n,r,i,o,a){var s=a.z||e.length,l=new u(i+s+5*(1+Math.ceil(s/7e3))+o),c=l.subarray(i,l.length-o),m=a.l,g=7&(a.r||0);if(n){g&&(c[0]=a.r>>3);for(var y=$[n-1],v=y>>13,_=8191&y,w=(1<<r)-1,k=a.p||new h(32768),E=a.h||new h(w+1),A=Math.ceil(r/3),O=2*A,T=function(n){return(e[n]^e[n+1]<<A^e[n+2]<<O)&w},C=new d(25e3),P=new h(288),M=new h(32),S=0,D=0,N=a.i||0,L=0,I=a.w||0,z=0;N+2<s;++N){var F=T(N),B=32767&N,U=E[F];if(k[B]=U,E[F]=B,I<=N){var V=s-N;if((S>7e3||L>24576)&&(V>423||!m)){g=K(e,c,0,C,P,M,D,L,z,N-z,g),L=S=D=0,z=N;for(var H=0;H<286;++H)P[H]=0;for(var H=0;H<30;++H)M[H]=0}var q=2,Y=0,W=_,X=B-U&32767;if(V>2&&F==T(N-X))for(var Z=Math.min(v,V)-1,J=Math.min(32767,N),Q=Math.min(258,V);X<=J&&--W&&B!=U;){if(e[N+q]==e[N+q-X]){for(var ee=0;ee<Q&&e[N+ee]==e[N+ee-X];++ee);if(ee>q){if(q=ee,Y=X,ee>Z)break;for(var et=Math.min(X,ee-2),en=0,H=0;H<et;++H){var er=N-X+H&32767,ei=k[er],eo=er-ei&32767;eo>en&&(en=eo,U=er)}}}U=k[B=U],X+=B-U&32767}if(Y){C[L++]=0x10000000|b[q]<<18|x[Y];var ea=31&b[q],es=31&x[Y];D+=f[ea]+p[es],++P[257+ea],++M[es],I=N+q,++S}else C[L++]=e[N],++P[e[N]]}}for(N=Math.max(N,I);N<s;++N)C[L++]=e[N],++P[e[N]];g=K(e,c,m,C,P,M,D,L,z,N-z,g),m||(a.r=7&g|c[g/8|0]<<3,g-=7,a.h=E,a.p=k,a.i=N,a.w=I)}else{for(var N=a.w||0;N<s+m;N+=65535){var el=N+65535;el>=s&&(c[g/8|0]=m,el=s),g=G(c,g+1,e.subarray(N,el))}a.i=s}return R(l,0,i+j(g)+o)},X=function(){var e=-1;return{p:function(n){for(var r=e,i=0;i<n.length;++i)r=null[255&r^n[i]]^r>>>8;e=r},d:function(){return~e}}},Z=function(){var e=1,n=0;return{p:function(r){for(var i=e,o=n,a=0|r.length,s=0;s!=a;){for(var l=Math.min(s+2655,a);s<l;++s)o+=i+=r[s];i=(65535&i)+15*(i>>16),o=(65535&o)+15*(o>>16)}e=i,n=o},d:function(){return e%=65521,n%=65521,(255&e)<<24|(65280&e)<<8|(255&n)<<8|n>>8}}},J=function(e,n,r,i,o){if(!o&&(o={l:1},n.dictionary)){var a=n.dictionary.subarray(-32768),s=new u(a.length+e.length);s.set(a),s.set(e,a.length),e=s,o.w=a.length}return W(e,null==n.level?6:n.level,null==n.mem?o.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+n.mem,r,i,o)},Q=function(e,n){var r={};for(var i in e)r[i]=e[i];for(var i in n)r[i]=n[i];return r},ee=function(e,n,r){for(var i=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/\s+/g,"").split(","),s=0;s<i.length;++s){var l=i[s],c=a[s];if("function"==typeof l){n+=";"+c+"=";var u=l.toString();if(l.prototype)if(-1!=u.indexOf("[native code]")){var h=u.indexOf(" ",8)+1;n+=u.slice(h,u.indexOf("(",h))}else for(var d in n+=u,l.prototype)n+=";"+c+".prototype."+d+"="+l.prototype[d].toString();else n+=u}else r[c]=l}return n},et=function(e){var n=[];for(var r in e)e[r].buffer&&n.push((e[r]=new e[r].constructor(e[r])).buffer);return n},en=function(e,n,r,i){if(!null[r]){for(var o="",a={},s=e.length-1,l=0;l<s;++l)o=ee(e[l],o,a);null[r]={c:ee(e[s],o,a),e:a}}var u=Q({},null[r].e);return c(null[r].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,u,et(u),i)},er=function(){return[u,h,d,f,p,m,v,w,P,M,k,L,O,S,D,N,j,R,I,z,ev,ei,eo]},ei=function(e){return postMessage(e,[e.buffer])},eo=function(e){return e&&{out:e.size&&new u(e.size),dictionary:e.dictionary}},ea=function(e,n,r,i,o,a){var s=en(r,i,o,function(e,n){s.terminate(),a(e,n)});return s.postMessage([e,n],n.consume?[e.buffer]:[]),function(){s.terminate()}},es=function(e,n){return e[n]|e[n+1]<<8},el=function(e,n){return(e[n]|e[n+1]<<8|e[n+2]<<16|e[n+3]<<24)>>>0},ec=function(e,n){return el(e,n)+0x100000000*el(e,n+4)},eu=function(e,n,r){for(;r;++n)e[n]=r,r>>>=8},eh=function(e,n){var r=n.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=n.level<2?4:2*(9==n.level),e[9]=3,0!=n.mtime&&eu(e,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){e[3]=8;for(var i=0;i<=r.length;++i)e[i+10]=r.charCodeAt(i)}},ed=function(e){(31!=e[0]||139!=e[1]||8!=e[2])&&I(6,"invalid gzip data");var n=e[3],r=10;4&n&&(r+=(e[10]|e[11]<<8)+2);for(var i=(n>>3&1)+(n>>4&1);i>0;i-=!e[r++]);return r+(2&n)},ef=function(e){var n=e.length;return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0},ep=function(e){return 10+(e.filename?e.filename.length+1:0)},em=function(e,n){var r=n.level;if(e[0]=120,e[1]=(0==r?0:r<6?1:9==r?3:2)<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var i=Z();i.p(n.dictionary),eu(e,2,i.d())}},eg=function(e,n){return((15&e[0])!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&I(6,"invalid zlib data"),(e[1]>>5&1)==+!n&&I(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function ey(e,n){return J(e,n||{},0,0)}function ev(e,n){return z(e,{i:2},n&&n.out,n&&n.dictionary)}var eb="undefined"!=typeof TextEncoder&&new TextEncoder,e_="undefined"!=typeof TextDecoder&&new TextDecoder;try{e_.decode(Y,{stream:!0})}catch(e){}var ew=function(e){for(var n="",r=0;;){var i=e[r++],o=(i>127)+(i>223)+(i>239);if(r+o>e.length)return{s:n,r:R(e,r-1)};o?3==o?n+=String.fromCharCode(55296|(i=((15&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536)>>10,56320|1023&i):1&o?n+=String.fromCharCode((31&i)<<6|63&e[r++]):n+=String.fromCharCode((15&i)<<12|(63&e[r++])<<6|63&e[r++]):n+=String.fromCharCode(i)}},ex=function(e,n){for(;1!=es(e,n);n+=4+es(e,n+2));return[ec(e,n+12),ec(e,n+4),ec(e,n+20)]},ek=function(e){var n=0;if(e)for(var r in e){var i=e[r].length;i>65535&&I(9),n+=i+4}return n};function eE(e,n,r){let i=r.length-e-1;if(n>=r[i])return i-1;if(n<=r[e])return e;let o=e,a=i,s=Math.floor((o+a)/2);for(;n<r[s]||n>=r[s+1];)n<r[s]?a=s:o=s,s=Math.floor((o+a)/2);return s}"function"==typeof queueMicrotask&&queueMicrotask;class eA extends s.Ipv{constructor(e,n,r,i,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let e=0;e<r.length;++e){let n=r[e];this.controlPoints[e]=new s.IUQ(n.x,n.y,n.z,n.w)}}getPoint(e,n=new s.Pq0){let r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,n,r,i){let o=eE(e,i,n),a=function(e,n,r,i){let o=[],a=[],s=[];o[0]=1;for(let l=1;l<=r;++l){a[l]=n-i[e+1-l],s[l]=i[e+l]-n;let r=0;for(let e=0;e<l;++e){let n=s[e+1],i=a[l-e],c=o[e]/(n+i);o[e]=r+n*c,r=i*c}o[l]=r}return o}(o,i,e,n),l=new s.IUQ(0,0,0,0);for(let n=0;n<=e;++n){let i=r[o-e+n],s=a[n],c=i.w*s;l.x+=i.x*c,l.y+=i.y*c,l.z+=i.z*c,l.w+=i.w*s}return l}(this.degree,this.knots,this.controlPoints,r);return 1!==i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}getTangent(e,n=new s.Pq0){var r,i,o;let a=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),l=(r=this.degree,i=this.knots,o=this.controlPoints,function(e){let n=e.length,r=[],i=[];for(let o=0;o<n;++o){let n=e[o];r[o]=new s.Pq0(n.x,n.y,n.z),i[o]=n.w}let o=[];for(let e=0;e<n;++e){let n=r[e].clone();for(let r=1;r<=e;++r)n.sub(o[e-r].clone().multiplyScalar(function(e,n){let r=1;for(let n=2;n<=e;++n)r*=n;let i=1;for(let e=2;e<=n;++e)i*=e;for(let r=2;r<=e-n;++r)i*=r;return r/i}(e,r)*i[r]));o[e]=n.divideScalar(i[0])}return o}(function(e,n,r,i,o){let a=1<e?o:e,l=[],c=eE(e,i,n),u=function(e,n,r,i,o){let a=[];for(let e=0;e<=r;++e)a[e]=0;let s=[];for(let e=0;e<=i;++e)s[e]=a.slice(0);let l=[];for(let e=0;e<=r;++e)l[e]=a.slice(0);l[0][0]=1;let c=a.slice(0),u=a.slice(0);for(let i=1;i<=r;++i){c[i]=n-o[e+1-i],u[i]=o[e+i]-n;let r=0;for(let e=0;e<i;++e){let n=u[e+1],o=c[i-e];l[i][e]=n+o;let a=l[e][i-1]/l[i][e];l[e][i]=r+n*a,r=o*a}l[i][i]=r}for(let e=0;e<=r;++e)s[0][e]=l[e][r];for(let e=0;e<=r;++e){let n=0,o=1,c=[];for(let e=0;e<=r;++e)c[e]=a.slice(0);c[0][0]=1;for(let a=1;a<=i;++a){let i=0,u=e-a,h=r-a;e>=a&&(c[o][0]=c[n][0]/l[h+1][u],i=c[o][0]*l[u][h]);let d=u>=-1?1:-u,f=e-1<=h?a-1:r-e;for(let e=d;e<=f;++e)c[o][e]=(c[n][e]-c[n][e-1])/l[h+1][u+e],i+=c[o][e]*l[u+e][h];e<=h&&(c[o][a]=-c[n][a-1]/l[h+1][e],i+=c[o][a]*l[e][h]),s[a][e]=i;let p=n;n=o,o=p}}let h=r;for(let e=1;e<=i;++e){for(let n=0;n<=r;++n)s[e][n]*=h;h*=r-e}return s}(c,i,e,a,n),h=[];for(let e=0;e<r.length;++e){let n=r[e].clone(),i=n.w;n.x*=i,n.y*=i,n.z*=i,h[e]=n}for(let n=0;n<=a;++n){let r=h[c-e].clone().multiplyScalar(u[n][0]);for(let i=1;i<=e;++i)r.add(h[c-e+i].clone().multiplyScalar(u[n][i]));l[n]=r}for(let e=a+1;e<=o+1;++e)l[e]=new s.IUQ(0,0,0);return l}(r,i,o,a,1)));return n.copy(l[1]).normalize(),n}}class eO extends s.aHM{constructor(e){super(e)}load(e,n,r,i){let o=this,a=""===o.path?s.r6x.extractUrlBase(e):o.path,l=new s.Y9S(this.manager);l.setPath(o.path),l.setResponseType("arraybuffer"),l.setRequestHeader(o.requestHeader),l.setWithCredentials(o.withCredentials),l.load(e,function(r){try{n(o.parse(r,a))}catch(n){i?i(n):console.error(n),o.manager.itemError(e)}},r,i)}parse(e,n){if(function(e){let n="Kaydara FBX Binary  \0";return e.byteLength>=n.length&&n===eH(e,0,n.length)}(e))i=new eS().parse(e);else{let n=eH(e);if(!function(e){let n=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;for(let i=0;i<n.length;++i)if(function(n){let i=e[0];return e=e.slice(r+1),r++,i}(1)===n[i])return!1;return!0}(n))throw Error("THREE.FBXLoader: Unknown format.");if(7e3>ej(n))throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+ej(n));i=new eM().parse(n)}return new eT(new s.Tap(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),this.manager).parse(i)}}class eT{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){o=this.parseConnections();let e=this.parseImages(),n=this.parseTextures(e),r=this.parseMaterials(n),i=this.parseDeformers(),s=new eC().parse(i);return this.parseScene(i,s,r),a}parseConnections(){let e=new Map;return"Connections"in i&&i.Connections.connections.forEach(function(n){let r=n[0],i=n[1],o=n[2];e.has(r)||e.set(r,{parents:[],children:[]}),e.get(r).parents.push({ID:i,relationship:o}),e.has(i)||e.set(i,{parents:[],children:[]}),e.get(i).children.push({ID:r,relationship:o})}),e}parseImages(){let e={},n={};if("Video"in i.Objects){let r=i.Objects.Video;for(let i in r){let o=r[i];if(e[parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){let e=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,a="string"==typeof o.Content&&""!==o.Content;if(e||a){let e=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=e}}}}for(let r in e){let i=e[r];void 0!==n[i]?e[r]=n[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){let n,r=e.Content,i=e.RelativeFilename||e.Filename,o=i.slice(i.lastIndexOf(".")+1).toLowerCase();switch(o){case"bmp":n="image/bmp";break;case"jpg":case"jpeg":n="image/jpeg";break;case"png":n="image/png";break;case"tif":n="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",i),n="image/tga";break;default:console.warn('FBXLoader: Image type "'+o+'" is not supported.');return}if("string"==typeof r)return"data:"+n+";base64,"+r;{let e=new Uint8Array(r);return window.URL.createObjectURL(new Blob([e],{type:n}))}}parseTextures(e){let n=new Map;if("Texture"in i.Objects){let r=i.Objects.Texture;for(let i in r){let o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n}parseTexture(e,n){let r=this.loadTexture(e,n);r.ID=e.id,r.name=e.attrName;let i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,l=void 0!==o?o.value:0;if(r.wrapS=0===a?s.GJx:s.ghU,r.wrapT=0===l?s.GJx:s.ghU,"Scaling"in e){let n=e.Scaling.value;r.repeat.x=n[0],r.repeat.y=n[1]}if("Translation"in e){let n=e.Translation.value;r.offset.x=n[0],r.offset.y=n[1]}return r}loadTexture(e,n){let r,i,a=this.textureLoader.path,l=o.get(e.id).children;void 0!==l&&l.length>0&&void 0!==n[l[0].ID]&&(0===(r=n[l[0].ID]).indexOf("blob:")||0===r.indexOf("data:"))&&this.textureLoader.setPath(void 0);let c=e.FileName.slice(-3).toLowerCase();if("tga"===c){let n=this.manager.getHandler(".tga");null===n?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),i=new s.gPd):(n.setPath(this.textureLoader.path),i=n.load(r))}else if("dds"===c){let n=this.manager.getHandler(".dds");null===n?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),i=new s.gPd):(n.setPath(this.textureLoader.path),i=n.load(r))}else"psd"===c?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),i=new s.gPd):i=this.textureLoader.load(r);return this.textureLoader.setPath(a),i}parseMaterials(e){let n=new Map;if("Material"in i.Objects){let r=i.Objects.Material;for(let i in r){let o=this.parseMaterial(r[i],e);null!==o&&n.set(parseInt(i),o)}}return n}parseMaterial(e,n){let r,i=e.id,a=e.attrName,l=e.ShadingModel;if("object"==typeof l&&(l=l.value),!o.has(i))return null;let c=this.parseParameters(e,n,i);switch(l.toLowerCase()){case"phong":r=new s.tXL;break;case"lambert":r=new s.G_z;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',l),r=new s.tXL}return r.setValues(c),r.name=a,r}parseParameters(e,n,r){let i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new s.Q1f().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&("Color"===e.DiffuseColor.type||"ColorRGB"===e.DiffuseColor.type)&&(i.color=new s.Q1f().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new s.Q1f().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&("Color"===e.EmissiveColor.type||"ColorRGB"===e.EmissiveColor.type)&&(i.emissive=new s.Q1f().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new s.Q1f().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=new s.Q1f().fromArray(e.SpecularColor.value).convertSRGBToLinear());let a=this;return o.get(r).children.forEach(function(e){let r=e.relationship;switch(r){case"Bump":i.bumpMap=a.getTexture(n,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=a.getTexture(n,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=a.getTexture(n,e.ID),void 0!==i.map&&(i.map.colorSpace=s.er$);break;case"DisplacementColor":i.displacementMap=a.getTexture(n,e.ID);break;case"EmissiveColor":i.emissiveMap=a.getTexture(n,e.ID),void 0!==i.emissiveMap&&(i.emissiveMap.colorSpace=s.er$);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=a.getTexture(n,e.ID);break;case"ReflectionColor":i.envMap=a.getTexture(n,e.ID),void 0!==i.envMap&&(i.envMap.mapping=s.wfO,i.envMap.colorSpace=s.er$);break;case"SpecularColor":i.specularMap=a.getTexture(n,e.ID),void 0!==i.specularMap&&(i.specularMap.colorSpace=s.er$);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=a.getTexture(n,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",r)}}),i}getTexture(e,n){return"LayeredTexture"in i.Objects&&n in i.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=o.get(n).children[0].ID),e.get(n)}parseDeformers(){let e={},n={};if("Deformer"in i.Objects){let r=i.Objects.Deformer;for(let i in r){let a=r[i],s=o.get(parseInt(i));if("Skin"===a.attrType){let n=this.parseSkeleton(s,r);n.ID=i,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),n.geometryID=s.parents[0].ID,e[i]=n}else if("BlendShape"===a.attrType){let e={id:i};e.rawTargets=this.parseMorphTargets(s,r),e.id=i,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=e}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){let r=[];return e.children.forEach(function(e){let i=n[e.ID];if("Cluster"!==i.attrType)return;let o={ID:e.ID,indices:[],weights:[],transformLink:new s.kn4().fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),r.push(o)}),{rawBones:r,bones:[]}}parseMorphTargets(e,n){let r=[];for(let i=0;i<e.children.length;i++){let a=e.children[i],s=n[a.ID],l={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;l.geoID=o.get(parseInt(a.ID)).children.filter(function(e){return void 0===e.relationship})[0].ID,r.push(l)}return r}parseScene(e,n,r){a=new s.YJl;let l=this.parseModels(e.skeletons,n,r),c=i.Objects.Model,u=this;l.forEach(function(e){let n=c[e.ID];u.setLookAtProperties(e,n),o.get(e.ID).parents.forEach(function(n){let r=l.get(n.ID);void 0!==r&&r.add(e)}),null===e.parent&&a.add(e)}),this.bindSkeleton(e.skeletons,n,l),this.addGlobalSceneSettings(),a.traverse(function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);let n=eB(e.userData.transformData);e.applyMatrix4(n),e.updateWorldMatrix()}});let h=new eP().parse();1===a.children.length&&a.children[0].isGroup&&(a.children[0].animations=h,a=a.children[0]),a.animations=h}parseModels(e,n,r){let a=new Map,l=i.Objects.Model;for(let i in l){let c=parseInt(i),u=l[i],h=o.get(c),d=this.buildSkeleton(h,e,c,u.attrName);if(!d){switch(u.attrType){case"Camera":d=this.createCamera(h);break;case"Light":d=this.createLight(h);break;case"Mesh":d=this.createMesh(h,n,r);break;case"NurbsCurve":d=this.createCurve(h,n);break;case"LimbNode":case"Root":d=new s.$Kf;break;default:d=new s.YJl}d.name=u.attrName?s.Nwf.sanitizeNodeName(u.attrName):"",d.userData.originalName=u.attrName,d.ID=c}this.getTransformData(d,u),a.set(c,d)}return a}buildSkeleton(e,n,r,i){let o=null;return e.parents.forEach(function(e){for(let a in n){let l=n[a];l.rawBones.forEach(function(n,a){if(n.ID===e.ID){let e=o;(o=new s.$Kf).matrixWorld.copy(n.transformLink),o.name=i?s.Nwf.sanitizeNodeName(i):"",o.userData.originalName=i,o.ID=r,l.bones[a]=o,null!==e&&o.add(e)}})}}),o}createCamera(e){let n,r;if(e.children.forEach(function(e){let n=i.Objects.NodeAttribute[e.ID];void 0!==n&&(r=n)}),void 0===r)n=new s.B69;else{let e=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(e=1);let i=1;void 0!==r.NearPlane&&(i=r.NearPlane.value/1e3);let o=1e3;void 0!==r.FarPlane&&(o=r.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(a=r.AspectWidth.value,l=r.AspectHeight.value);let c=a/l,u=45;void 0!==r.FieldOfView&&(u=r.FieldOfView.value);let h=r.FocalLength?r.FocalLength.value:null;switch(e){case 0:n=new s.ubm(u,c,i,o),null!==h&&n.setFocalLength(h);break;case 1:n=new s.qUd(-a/2,a/2,l/2,-l/2,i,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),n=new s.B69}}return n}createLight(e){let n,r;if(e.children.forEach(function(e){let n=i.Objects.NodeAttribute[e.ID];void 0!==n&&(r=n)}),void 0===r)n=new s.B69;else{let e;e=void 0===r.LightType?0:r.LightType.value;let i=0xffffff;void 0!==r.Color&&(i=new s.Q1f().fromArray(r.Color.value).convertSRGBToLinear());let o=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(o=0);let a=0;switch(void 0!==r.FarAttenuationEnd&&(a=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value),e){case 0:n=new s.HiM(i,o,a,1);break;case 1:n=new s.ZyN(i,o);break;case 2:let l=Math.PI/3;void 0!==r.InnerAngle&&(l=s.cj9.degToRad(r.InnerAngle.value));let c=0;void 0!==r.OuterAngle&&(c=Math.max(c=s.cj9.degToRad(r.OuterAngle.value),1)),n=new s.nCl(i,o,a,l,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new s.HiM(i,o)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(n.castShadow=!0)}return n}createMesh(e,n,r){let i,o=null,a=null,l=[];return e.children.forEach(function(e){n.has(e.ID)&&(o=n.get(e.ID)),r.has(e.ID)&&l.push(r.get(e.ID))}),l.length>1?a=l:l.length>0?a=l[0]:(a=new s.tXL({name:s.aHM.DEFAULT_MATERIAL_NAME,color:0xcccccc}),l.push(a)),"color"in o.attributes&&l.forEach(function(e){e.vertexColors=!0}),o.FBX_Deformer?(i=new s.I46(o,a)).normalizeSkinWeights():i=new s.eaF(o,a),i}createCurve(e,n){let r=e.children.reduce(function(e,r){return n.has(r.ID)&&(e=n.get(r.ID)),e},null),i=new s.mrM({name:s.aHM.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new s.N1A(r,i)}getTransformData(e,n){let r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=eU(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,n){"LookAtProperty"in n&&o.get(e.ID).children.forEach(function(n){if("LookAtProperty"===n.relationship){let r=i.Objects.Model[n.ID];if("Lcl_Translation"in r){let n=r.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(n),a.add(e.target)):e.lookAt(new s.Pq0().fromArray(n))}}})}bindSkeleton(e,n,r){let i=this.parsePoseNodes();for(let a in e){let l=e[a];o.get(parseInt(l.ID)).parents.forEach(function(e){if(n.has(e.ID)){let n=e.ID;o.get(n).parents.forEach(function(e){r.has(e.ID)&&r.get(e.ID).bind(new s.EAD(l.bones),i[e.ID])})}})}}parsePoseNodes(){let e={};if("Pose"in i.Objects){let n=i.Objects.Pose;for(let r in n)if("BindPose"===n[r].attrType&&n[r].NbPoseNodes>0){let i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(n){e[n.Node]=new s.kn4().fromArray(n.Matrix.a)}):e[i.Node]=new s.kn4().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in i){if("AmbientColor"in i.GlobalSettings){let e=i.GlobalSettings.AmbientColor.value,n=e[0],r=e[1],o=e[2];if(0!==n||0!==r||0!==o){let e=new s.Q1f(n,r,o).convertSRGBToLinear();a.add(new s.$p8(e,1))}}"UnitScaleFactor"in i.GlobalSettings&&(a.userData.unitScaleFactor=i.GlobalSettings.UnitScaleFactor.value)}}}class eC{constructor(){this.negativeMaterialIndices=!1}parse(e){let n=new Map;if("Geometry"in i.Objects){let r=i.Objects.Geometry;for(let i in r){let a=o.get(parseInt(i)),s=this.parseGeometry(a,r[i],e);n.set(parseInt(i),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(e,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,r){let o=r.skeletons,a=[],s=e.parents.map(function(e){return i.Objects.Model[e.ID]});if(0===s.length)return;let l=e.children.reduce(function(e,n){return void 0!==o[n.ID]&&(e=o[n.ID]),e},null);e.children.forEach(function(e){void 0!==r.morphTargets[e.ID]&&a.push(r.morphTargets[e.ID])});let c=s[0],u={};"RotationOrder"in c&&(u.eulerOrder=eU(c.RotationOrder.value)),"InheritType"in c&&(u.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(u.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(u.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(u.scale=c.GeometricScaling.value);let h=eB(u);return this.genGeometry(n,l,a,h)}genGeometry(e,n,r,i){let o=new s.LoY;e.attrName&&(o.name=e.attrName);let a=this.parseGeoNode(e,n),l=this.genBuffers(a),c=new s.qtW(l.vertex,3);if(c.applyMatrix4(i),o.setAttribute("position",c),l.colors.length>0&&o.setAttribute("color",new s.qtW(l.colors,3)),n&&(o.setAttribute("skinIndex",new s.A$4(l.weightsIndices,4)),o.setAttribute("skinWeight",new s.qtW(l.vertexWeights,4)),o.FBX_Deformer=n),l.normal.length>0){let e=new s.dwI().getNormalMatrix(i),n=new s.qtW(l.normal,3);n.applyNormalMatrix(e),o.setAttribute("normal",n)}if(l.uvs.forEach(function(e,n){let r=0===n?"uv":`uv${n}`;o.setAttribute(r,new s.qtW(l.uvs[n],2))}),a.material&&"AllSame"!==a.material.mappingType){let e=l.materialIndex[0],n=0;if(l.materialIndex.forEach(function(r,i){r!==e&&(o.addGroup(n,i-n,e),e=r,n=i)}),o.groups.length>0){let n=o.groups[o.groups.length-1],r=n.start+n.count;r!==l.materialIndex.length&&o.addGroup(r,l.materialIndex.length-r,e)}0===o.groups.length&&o.addGroup(0,l.materialIndex.length,l.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o}parseGeoNode(e,n){let r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let n=0;for(;e.LayerElementUV[n];)e.LayerElementUV[n].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return r.weightTable={},null!==n&&(r.skeleton=n,n.rawBones.forEach(function(e,n){e.indices.forEach(function(i,o){void 0===r.weightTable[i]&&(r.weightTable[i]=[]),r.weightTable[i].push({id:n,weight:e.weights[o]})})})),r}genBuffers(e){let n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,i=0,o=!1,a=[],s=[],l=[],c=[],u=[],h=[],d=this;return e.vertexIndices.forEach(function(f,p){let m,g=!1;f<0&&(f^=-1,g=!0);let y=[],v=[];if(a.push(3*f,3*f+1,3*f+2),e.color){let n=eI(p,r,f,e.color);l.push(n[0],n[1],n[2])}if(e.skeleton){if(void 0!==e.weightTable[f]&&e.weightTable[f].forEach(function(e){v.push(e.weight),y.push(e.id)}),v.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);let e=[0,0,0,0],n=[0,0,0,0];v.forEach(function(r,i){let o=r,a=y[i];n.forEach(function(n,r,i){if(o>n){i[r]=o,o=n;let s=e[r];e[r]=a,a=s}})}),y=e,v=n}for(;v.length<4;)v.push(0),y.push(0);for(let e=0;e<4;++e)u.push(v[e]),h.push(y[e])}if(e.normal){let n=eI(p,r,f,e.normal);s.push(n[0],n[1],n[2])}e.material&&"AllSame"!==e.material.mappingType&&(m=eI(p,r,f,e.material)[0])<0&&(d.negativeMaterialIndices=!0,m=0),e.uv&&e.uv.forEach(function(e,n){let i=eI(p,r,f,e);void 0===c[n]&&(c[n]=[]),c[n].push(i[0]),c[n].push(i[1])}),i++,g&&(d.genFace(n,e,a,m,s,l,c,u,h,i),r++,i=0,a=[],s=[],l=[],c=[],u=[],h=[])}),n}getNormalNewell(e){let n=new s.Pq0(0,0,0);for(let r=0;r<e.length;r++){let i=e[r],o=e[(r+1)%e.length];n.x+=(i.y-o.y)*(i.z+o.z),n.y+=(i.z-o.z)*(i.x+o.x),n.z+=(i.x-o.x)*(i.y+o.y)}return n.normalize(),n}getNormalTangentAndBitangent(e){let n=this.getNormalNewell(e),r=(Math.abs(n.z)>.5?new s.Pq0(0,1,0):new s.Pq0(0,0,1)).cross(n).normalize(),i=n.clone().cross(r).normalize();return{normal:n,tangent:r,bitangent:i}}flattenVertex(e,n,r){return new s.I9Y(e.dot(n),e.dot(r))}genFace(e,n,r,i,o,a,l,c,u,h){let d;if(h>3){let e=[];for(let i=0;i<r.length;i+=3)e.push(new s.Pq0(n.vertexPositions[r[i]],n.vertexPositions[r[i+1]],n.vertexPositions[r[i+2]]));let{tangent:i,bitangent:o}=this.getNormalTangentAndBitangent(e),a=[];for(let n of e)a.push(this.flattenVertex(n,i,o));d=s.xJ6.triangulateShape(a,[])}else d=[[0,1,2]];for(let[s,h,f]of d)e.vertex.push(n.vertexPositions[r[3*s]]),e.vertex.push(n.vertexPositions[r[3*s+1]]),e.vertex.push(n.vertexPositions[r[3*s+2]]),e.vertex.push(n.vertexPositions[r[3*h]]),e.vertex.push(n.vertexPositions[r[3*h+1]]),e.vertex.push(n.vertexPositions[r[3*h+2]]),e.vertex.push(n.vertexPositions[r[3*f]]),e.vertex.push(n.vertexPositions[r[3*f+1]]),e.vertex.push(n.vertexPositions[r[3*f+2]]),n.skeleton&&(e.vertexWeights.push(c[4*s]),e.vertexWeights.push(c[4*s+1]),e.vertexWeights.push(c[4*s+2]),e.vertexWeights.push(c[4*s+3]),e.vertexWeights.push(c[4*h]),e.vertexWeights.push(c[4*h+1]),e.vertexWeights.push(c[4*h+2]),e.vertexWeights.push(c[4*h+3]),e.vertexWeights.push(c[4*f]),e.vertexWeights.push(c[4*f+1]),e.vertexWeights.push(c[4*f+2]),e.vertexWeights.push(c[4*f+3]),e.weightsIndices.push(u[4*s]),e.weightsIndices.push(u[4*s+1]),e.weightsIndices.push(u[4*s+2]),e.weightsIndices.push(u[4*s+3]),e.weightsIndices.push(u[4*h]),e.weightsIndices.push(u[4*h+1]),e.weightsIndices.push(u[4*h+2]),e.weightsIndices.push(u[4*h+3]),e.weightsIndices.push(u[4*f]),e.weightsIndices.push(u[4*f+1]),e.weightsIndices.push(u[4*f+2]),e.weightsIndices.push(u[4*f+3])),n.color&&(e.colors.push(a[3*s]),e.colors.push(a[3*s+1]),e.colors.push(a[3*s+2]),e.colors.push(a[3*h]),e.colors.push(a[3*h+1]),e.colors.push(a[3*h+2]),e.colors.push(a[3*f]),e.colors.push(a[3*f+1]),e.colors.push(a[3*f+2])),n.material&&"AllSame"!==n.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),n.normal&&(e.normal.push(o[3*s]),e.normal.push(o[3*s+1]),e.normal.push(o[3*s+2]),e.normal.push(o[3*h]),e.normal.push(o[3*h+1]),e.normal.push(o[3*h+2]),e.normal.push(o[3*f]),e.normal.push(o[3*f+1]),e.normal.push(o[3*f+2])),n.uv&&n.uv.forEach(function(n,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(l[r][2*s]),e.uvs[r].push(l[r][2*s+1]),e.uvs[r].push(l[r][2*h]),e.uvs[r].push(l[r][2*h+1]),e.uvs[r].push(l[r][2*f]),e.uvs[r].push(l[r][2*f+1])})}addMorphTargets(e,n,r,o){if(0===r.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];let a=this;r.forEach(function(r){r.rawTargets.forEach(function(r){let s=i.Objects.Geometry[r.geoID];void 0!==s&&a.genMorphGeometry(e,n,s,o,r.name)})})}genMorphGeometry(e,n,r,i,o){let a=void 0!==n.PolygonVertexIndex?n.PolygonVertexIndex.a:[],l=void 0!==r.Vertices?r.Vertices.a:[],c=void 0!==r.Indexes?r.Indexes.a:[],u=new Float32Array(3*e.attributes.position.count);for(let e=0;e<c.length;e++){let n=3*c[e];u[n]=l[3*e],u[n+1]=l[3*e+1],u[n+2]=l[3*e+2]}let h=this.genBuffers({vertexIndices:a,vertexPositions:u}),d=new s.qtW(h.vertex,3);d.name=o||r.attrName,d.applyMatrix4(i),e.morphAttributes.position.push(d)}parseNormals(e){let n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a,o=[];return"IndexToDirect"===r&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:n,referenceType:r}}parseUVs(e){let n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a,o=[];return"IndexToDirect"===r&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:n,referenceType:r}}parseVertexColors(e){let n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a,o=[];"IndexToDirect"===r&&(o=e.ColorIndex.a);for(let e=0,n=new s.Q1f;e<i.length;e+=4)n.fromArray(i,e).convertSRGBToLinear().toArray(i,e);return{dataSize:4,buffer:i,indices:o,mappingType:n,referenceType:r}}parseMaterialIndices(e){let n=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===n)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};let i=e.Materials.a,o=[];for(let e=0;e<i.length;++e)o.push(e);return{dataSize:1,buffer:i,indices:o,mappingType:n,referenceType:r}}parseNurbsGeometry(e){let n,r,i=parseInt(e.Order);if(isNaN(i))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new s.LoY;let o=i-1,a=e.KnotVector.a,l=[],c=e.Points.a;for(let e=0,n=c.length;e<n;e+=4)l.push(new s.IUQ().fromArray(c,e));if("Closed"===e.Form)l.push(l[0]);else if("Periodic"===e.Form){n=o,r=a.length-1-n;for(let e=0;e<o;++e)l.push(l[e])}let u=new eA(o,a,l,n,r).getPoints(12*l.length);return new s.LoY().setFromPoints(u)}}class eP{parse(){let e=[],n=this.parseClips();if(void 0!==n)for(let r in n){let i=n[r],o=this.addClip(i);e.push(o)}return e}parseClips(){if(void 0===i.Objects.AnimationCurve)return;let e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);let n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){let e=i.Objects.AnimationCurveNode,n=new Map;for(let r in e){let i=e[r];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){let e={id:i.id,attr:i.attrName,curves:{}};n.set(e.id,e)}}return n}parseAnimationCurves(e){let n=i.Objects.AnimationCurve;for(let r in n){let i={id:n[r].id,times:n[r].KeyTime.a.map(eR),values:n[r].KeyValueFloat.a},a=o.get(i.id);if(void 0!==a){let n=a.parents[0].ID,r=a.parents[0].relationship;r.match(/X/)?e.get(n).curves.x=i:r.match(/Y/)?e.get(n).curves.y=i:r.match(/Z/)?e.get(n).curves.z=i:r.match(/DeformPercent/)&&e.has(n)&&(e.get(n).curves.morph=i)}}}parseAnimationLayers(e){let n=i.Objects.AnimationLayer,r=new Map;for(let l in n){let n=[],c=o.get(parseInt(l));void 0!==c&&(c.children.forEach(function(r,l){if(e.has(r.ID)){let c=e.get(r.ID);if(void 0!==c.curves.x||void 0!==c.curves.y||void 0!==c.curves.z){if(void 0===n[l]){let e=o.get(r.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID;if(void 0!==e){let o=i.Objects.Model[e.toString()];if(void 0===o)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",r);let c={modelName:o.attrName?s.Nwf.sanitizeNodeName(o.attrName):"",ID:o.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};a.traverse(function(e){e.ID===o.id&&(c.transform=e.matrix,e.userData.transformData&&(c.eulerOrder=e.userData.transformData.eulerOrder))}),c.transform||(c.transform=new s.kn4),"PreRotation"in o&&(c.preRotation=o.PreRotation.value),"PostRotation"in o&&(c.postRotation=o.PostRotation.value),n[l]=c}}n[l]&&(n[l][c.attr]=c)}else if(void 0!==c.curves.morph){if(void 0===n[l]){let e=o.get(r.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID,a=o.get(e).parents[0].ID,c=o.get(a).parents[0].ID,u=o.get(c).parents[0].ID,h=i.Objects.Model[u],d={modelName:h.attrName?s.Nwf.sanitizeNodeName(h.attrName):"",morphName:i.Objects.Deformer[e].attrName};n[l]=d}n[l][c.attr]=c}}}),r.set(parseInt(l),n))}return r}parseAnimStacks(e){let n=i.Objects.AnimationStack,r={};for(let i in n){let a=o.get(parseInt(i)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");let s=e.get(a[0].ID);r[i]={name:n[i].attrName,layer:s}}return r}addClip(e){let n=[],r=this;return e.layer.forEach(function(e){n=n.concat(r.generateTracks(e))}),new s.tz3(e.name,-1,n)}generateTracks(e){let n=[],r=new s.Pq0,i=new s.Pq0;if(e.transform&&e.transform.decompose(r,new s.PTz,i),r=r.toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){let i=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==i&&n.push(i)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){let r=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==r&&n.push(r)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){let r=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==r&&n.push(r)}if(void 0!==e.DeformPercent){let r=this.generateMorphTrack(e);void 0!==r&&n.push(r)}return n}generateVectorTrack(e,n,r,i){let o=this.getTimesForAllAxes(n),a=this.getKeyframeTrackValues(o,n,r);return new s.RiT(e+"."+i,o,a)}generateRotationTrack(e,n,r,i,o){let a,l;if(void 0!==n.x&&void 0!==n.y&&void 0!==n.z){let e=this.interpolateRotations(n.x,n.y,n.z,o);a=e[0],l=e[1]}void 0!==r&&((r=r.map(s.cj9.degToRad)).push(o),r=new s.O9p().fromArray(r),r=new s.PTz().setFromEuler(r)),void 0!==i&&((i=i.map(s.cj9.degToRad)).push(o),i=new s.O9p().fromArray(i),i=new s.PTz().setFromEuler(i).invert());let c=new s.PTz,u=new s.O9p,h=[];if(!l||!a)return new s.MBL(e+".quaternion",[0],[0]);for(let e=0;e<l.length;e+=3)u.set(l[e],l[e+1],l[e+2],o),c.setFromEuler(u),void 0!==r&&c.premultiply(r),void 0!==i&&c.multiply(i),e>2&&0>new s.PTz().fromArray(h,(e-3)/3*4).dot(c)&&c.set(-c.x,-c.y,-c.z,-c.w),c.toArray(h,e/3*4);return new s.MBL(e+".quaternion",a,h)}generateMorphTrack(e){let n=e.DeformPercent.curves.morph,r=n.values.map(function(e){return e/100}),i=a.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new s.Hit(e.modelName+".morphTargetInfluences["+i+"]",n.times,r)}getTimesForAllAxes(e){let n=[];if(void 0!==e.x&&(n=n.concat(e.x.times)),void 0!==e.y&&(n=n.concat(e.y.times)),void 0!==e.z&&(n=n.concat(e.z.times)),(n=n.sort(function(e,n){return e-n})).length>1){let e=1,r=n[0];for(let i=1;i<n.length;i++){let o=n[i];o!==r&&(n[e]=o,r=o,e++)}n=n.slice(0,e)}return n}getKeyframeTrackValues(e,n,r){let i=[],o=-1,a=-1,s=-1;return e.forEach(function(e){if(n.x&&(o=n.x.times.indexOf(e)),n.y&&(a=n.y.times.indexOf(e)),n.z&&(s=n.z.times.indexOf(e)),-1!==o){let e=n.x.values[o];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==a){let e=n.y.values[a];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==s){let e=n.z.values[s];i.push(e),r[2]=e}else i.push(r[2])}),i}interpolateRotations(e,n,r,i){let o=[],a=[];o.push(e.times[0]),a.push(s.cj9.degToRad(e.values[0])),a.push(s.cj9.degToRad(n.values[0])),a.push(s.cj9.degToRad(r.values[0]));for(let l=1;l<e.values.length;l++){let c=[e.values[l-1],n.values[l-1],r.values[l-1]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;let u=c.map(s.cj9.degToRad),h=[e.values[l],n.values[l],r.values[l]];if(isNaN(h[0])||isNaN(h[1])||isNaN(h[2]))continue;let d=h.map(s.cj9.degToRad),f=[h[0]-c[0],h[1]-c[1],h[2]-c[2]],p=[Math.abs(f[0]),Math.abs(f[1]),Math.abs(f[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){let n=Math.max(...p)/180,r=new s.O9p(...u,i),c=new s.O9p(...d,i),h=new s.PTz().setFromEuler(r),f=new s.PTz().setFromEuler(c);h.dot(f)&&f.set(-f.x,-f.y,-f.z,-f.w);let m=e.times[l-1],g=e.times[l]-m,y=new s.PTz,v=new s.O9p;for(let e=0;e<1;e+=1/n)y.copy(h.clone().slerp(f.clone(),e)),o.push(m+e*g),v.setFromQuaternion(y,i),a.push(v.x),a.push(v.y),a.push(v.z)}else o.push(e.times[l]),a.push(s.cj9.degToRad(e.values[l])),a.push(s.cj9.degToRad(n.values[l])),a.push(s.cj9.degToRad(r.values[l]))}return[o,a]}}class eM{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new eN,this.nodeStack=[],this.currentProp=[],this.currentPropName="";let n=this,r=e.split(/[\r\n]+/);return r.forEach(function(e,i){let o=e.match(/^[\s\t]*;/),a=e.match(/^[\s\t]*$/);if(o||a)return;let s=e.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),l=e.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(n.currentIndent-1)+"}}");s?n.parseNodeBegin(e,s):l?n.parseNodeProperty(e,l,r[++i]):c?n.popStack():e.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(e)}),this.allNodes}parseNodeBegin(e,n){let r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},a=this.parseNodeAttr(i),s=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,o):r in s?("PoseNode"===r?s.PoseNode.push(o):void 0!==s[r].id&&(s[r]={},s[r][s[r].id]=s[r]),""!==a.id&&(s[r][a.id]=o)):"number"==typeof a.id?(s[r]={},s[r][a.id]=o):"Properties70"!==r&&("PoseNode"===r?s[r]=[o]:s[r]=o),"number"==typeof a.id&&(o.id=a.id),""!==a.name&&(o.attrName=a.name),""!==a.type&&(o.attrType=a.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];""!==e[0]&&isNaN(n=parseInt(e[0]))&&(n=e[0]);let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:n,name:r,type:i}}parseNodeProperty(e,n,r){let i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===i&&","===o&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());let a=this.getCurrentNode();if("Properties70"===a.name)return void this.parseNodeSpecialProperty(e,i,o);if("C"===i){let e=o.split(",").slice(1),n=parseInt(e[0]),r=parseInt(e[1]),s=o.split(",").slice(3);s=s.map(function(e){return e.trim().replace(/^"/,"")}),i="connections",function(e,n){for(let r=0,i=e.length,o=n.length;r<o;r++,i++)e[i]=n[r]}(o=[n,r],s),void 0===a[i]&&(a[i]=[])}"Node"===i&&(a.id=o),i in a&&Array.isArray(a[i])?a[i].push(o):"a"!==i?a[i]=o:a.a=o,this.setCurrentProp(a,i),"a"===i&&","!==o.slice(-1)&&(a.a=eV(o))}parseNodePropertyContinued(e){let n=this.getCurrentNode();n.a+=e,","!==e.slice(-1)&&(n.a=eV(n.a))}parseNodeSpecialProperty(e,n,r){let i=r.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],a=i[1],s=i[2],l=i[3],c=i[4];switch(a){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=eV(c)}this.getPrevNode()[o]={type:a,type2:s,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),o)}}class eS{parse(e){let n=new eD(e);n.skip(23);let r=n.getUint32();if(r<6400)throw Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);let i=new eN;for(;!this.endOfContent(n);){let e=this.parseNode(n,r);null!==e&&i.add(e.name,e)}return i}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){let r={},i=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();let a=e.getUint8(),s=e.getString(a);if(0===i)return null;let l=[];for(let n=0;n<o;n++)l.push(this.parseProperty(e));let c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",h=l.length>2?l[2]:"";for(r.singleProperty=1===o&&e.getOffset()===i;i>e.getOffset();){let i=this.parseNode(e,n);null!==i&&this.parseSubNode(s,r,i)}return r.propertyList=l,"number"==typeof c&&(r.id=c),""!==u&&(r.attrName=u),""!==h&&(r.attrType=h),""!==s&&(r.name=s),r}parseSubNode(e,n,r){if(!0===r.singleProperty){let e=r.propertyList[0];Array.isArray(e)?(n[r.name]=r,r.a=e):n[r.name]=e}else if("Connections"===e&&"C"===r.name){let e=[];r.propertyList.forEach(function(n,r){0!==r&&e.push(n)}),void 0===n.connections&&(n.connections=[]),n.connections.push(e)}else if("Properties70"===r.name)Object.keys(r).forEach(function(e){n[e]=r[e]});else if("Properties70"===e&&"P"===r.name){let e,i=r.propertyList[0],o=r.propertyList[1],a=r.propertyList[2],s=r.propertyList[3];0===i.indexOf("Lcl ")&&(i=i.replace("Lcl ","Lcl_")),0===o.indexOf("Lcl ")&&(o=o.replace("Lcl ","Lcl_")),e="Color"===o||"ColorRGB"===o||"Vector"===o||"Vector3D"===o||0===o.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],n[i]={type:o,type2:a,flag:s,value:e}}else void 0===n[r.name]?"number"==typeof r.id?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:"PoseNode"===r.name?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):void 0===n[r.name][r.id]&&(n[r.name][r.id]=r)}parseProperty(e){let n,r=e.getString(1);switch(r){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var i,o;let a=e.getUint32(),s=e.getUint32(),l=e.getUint32();if(0===s)switch(r){case"b":case"c":return e.getBooleanArray(a);case"d":return e.getFloat64Array(a);case"f":return e.getFloat32Array(a);case"i":return e.getInt32Array(a);case"l":return e.getInt64Array(a)}let c=new eD(z((i=new Uint8Array(e.getArrayBuffer(l))).subarray(eg(i,void 0),-4),{i:2},o&&o.out,o&&o.dictionary).buffer);switch(r){case"b":case"c":return c.getBooleanArray(a);case"d":return c.getFloat64Array(a);case"f":return c.getFloat32Array(a);case"i":return c.getInt32Array(a);case"l":return c.getInt64Array(a)}break;default:throw Error("THREE.FBXLoader: Unknown property type "+r)}}}class eD{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===n||n,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(1&this.getUint8())==1}getBooleanArray(e){let n=[];for(let r=0;r<e;r++)n.push(this.getBoolean());return n}getUint8(){let e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){let e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){let e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){let n=[];for(let r=0;r<e;r++)n.push(this.getInt32());return n}getUint32(){let e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return(this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),0x80000000&n)?(n=~n,0xffffffff==(e=~e)&&(n=n+1|0),-(0x100000000*n+(e=e+1|0))):0x100000000*n+e}getInt64Array(e){let n=[];for(let r=0;r<e;r++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),0x100000000*n+e}getFloat32(){let e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){let n=[];for(let r=0;r<e;r++)n.push(this.getFloat32());return n}getFloat64(){let e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){let n=[];for(let r=0;r<e;r++)n.push(this.getFloat64());return n}getArrayBuffer(e){let n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){let n=this.offset,r=new Uint8Array(this.dv.buffer,n,e);this.skip(e);let i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,n,i)),this._textDecoder.decode(r)}}class eN{add(e,n){this[e]=n}}function ej(e){let n=e.match(/FBXVersion: (\d+)/);if(n)return parseInt(n[1]);throw Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function eR(e){return e/46186158e3}let eL=[];function eI(e,n,r,i){let o;switch(i.mappingType){case"ByPolygonVertex":o=e;break;case"ByPolygon":o=n;break;case"ByVertice":o=r;break;case"AllSame":o=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}"IndexToDirect"===i.referenceType&&(o=i.indices[o]);let a=o*i.dataSize,s=a+i.dataSize;var l=eL,c=i.buffer,u=a,h=s;for(let e=u,n=0;e<h;e++,n++)l[n]=c[e];return l}let ez=new s.O9p,eF=new s.Pq0;function eB(e){let n=new s.kn4,r=new s.kn4,i=new s.kn4,o=new s.kn4,a=new s.kn4,l=new s.kn4,c=new s.kn4,u=new s.kn4,h=new s.kn4,d=new s.kn4,f=new s.kn4,p=new s.kn4,m=e.inheritType?e.inheritType:0;if(e.translation&&n.setPosition(eF.fromArray(e.translation)),e.preRotation){let n=e.preRotation.map(s.cj9.degToRad);n.push(e.eulerOrder||s.O9p.DEFAULT_ORDER),r.makeRotationFromEuler(ez.fromArray(n))}if(e.rotation){let n=e.rotation.map(s.cj9.degToRad);n.push(e.eulerOrder||s.O9p.DEFAULT_ORDER),i.makeRotationFromEuler(ez.fromArray(n))}if(e.postRotation){let n=e.postRotation.map(s.cj9.degToRad);n.push(e.eulerOrder||s.O9p.DEFAULT_ORDER),o.makeRotationFromEuler(ez.fromArray(n)),o.invert()}e.scale&&a.scale(eF.fromArray(e.scale)),e.scalingOffset&&c.setPosition(eF.fromArray(e.scalingOffset)),e.scalingPivot&&l.setPosition(eF.fromArray(e.scalingPivot)),e.rotationOffset&&u.setPosition(eF.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(eF.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(f.copy(e.parentMatrix),d.copy(e.parentMatrixWorld));let g=r.clone().multiply(i).multiply(o),y=new s.kn4;y.extractRotation(d);let v=new s.kn4;v.copyPosition(d);let b=v.clone().invert().multiply(d),_=y.clone().invert().multiply(b),w=new s.kn4;if(0===m)w.copy(y).multiply(g).multiply(_).multiply(a);else if(1===m)w.copy(y).multiply(_).multiply(g).multiply(a);else{let e=new s.kn4().scale(new s.Pq0().setFromMatrixScale(f)).clone().invert(),n=_.clone().multiply(e);w.copy(y).multiply(g).multiply(n).multiply(a)}let x=h.clone().invert(),k=l.clone().invert(),E=n.clone().multiply(u).multiply(h).multiply(r).multiply(i).multiply(o).multiply(x).multiply(c).multiply(l).multiply(a).multiply(k),A=new s.kn4().copyPosition(E),O=d.clone().multiply(A);return p.copyPosition(O),(E=p.clone().multiply(w)).premultiply(d.invert()),E}function eU(e){let n=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),n[0]):n[e]}function eV(e){return e.split(",").map(function(e){return parseFloat(e)})}function eH(e,n,r){return void 0===n&&(n=0),void 0===r&&(r=e.byteLength),new TextDecoder().decode(new Uint8Array(e,n,r))}THREE.FBXLoader=eO,AFRAME.registerComponent("fbx-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let e=this.data;if(!e.src)return;this.remove();let n=new THREE.FBXLoader;e.crossorigin&&n.setCrossOrigin(e.crossorigin),n.load(e.src,this.load.bind(this))},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"fbx",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},35261:(e,n,r)=>{"use strict";r.r(n),r.d(n,{ForceGraph2D:()=>lN,ForceGraph3D:()=>lD,ForceGraphAR:()=>lS,ForceGraphVR:()=>lM});var i,o=r(14232);function a(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n){if(Object(r)!==r)return;c=!1}else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||s(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,n){if(e){if("string"==typeof e)return l(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,n)}}function l(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var c=function(e,n){var r,i=new Set(n);return Object.assign.apply(Object,[{}].concat(function(e){if(Array.isArray(e))return l(e)}(r=Object.entries(e).filter(function(e){var n=a(e,1)[0];return!i.has(n)}).map(function(e){var n=a(e,2);return function(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:String(i))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}({},n[0],n[1])}))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||s(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))};function u(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,n){if(e){if("string"==typeof e)return u(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,n):void 0}}function f(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.wrapperElementType,i=void 0===r?"div":r,a=n.nodeMapper,s=void 0===a?function(e){return e}:a,l=n.methodNames,u=void 0===l?[]:l,d=n.initPropNames,f=void 0===d?[]:d;return(0,o.forwardRef)(function(n,r){var a=(0,o.useRef)(),l=(0,o.useMemo)(function(){return e(Object.fromEntries(f.filter(function(e){return n.hasOwnProperty(e)}).map(function(e){return[e,n[e]]})))},[]);p(function(){l(s(a.current))},o.useLayoutEffect),p(function(){return l._destructor instanceof Function?l._destructor:void 0});var d=(0,o.useCallback)(function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return l[e]instanceof Function?l[e].apply(l,r):void 0},[l]),m=(0,o.useRef)({});return Object.keys(c(n,[].concat(h(u),h(f)))).filter(function(e){return m.current[e]!==n[e]}).forEach(function(e){return d(e,n[e])}),m.current=n,(0,o.useImperativeHandle)(r,function(){return Object.fromEntries(u.map(function(e){return[e,function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return d.apply(void 0,[e].concat(r))}]}))},[d]),o.createElement(i,{ref:a})})}function p(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.useEffect,i=(0,o.useRef)(),a=(0,o.useRef)(!1),s=(0,o.useRef)(!1),l=function(e){if(Array.isArray(e))return e}(n=(0,o.useState)(0))||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(n,2)||d(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();l[0];var c=l[1];a.current&&(s.current=!0),r(function(){return a.current||(i.current=e(),a.current=!0),c(function(e){return e+1}),function(){s.current&&i.current&&i.current()}},[])}r(58103);var m=r(66691),g={value:()=>{}};function y(){for(var e,n=0,r=arguments.length,i={};n<r;++n){if(!(e=arguments[n]+"")||e in i||/[\s.]/.test(e))throw Error("illegal type: "+e);i[e]=[]}return new v(i)}function v(e){this._=e}function b(e,n,r){for(var i=0,o=e.length;i<o;++i)if(e[i].name===n){e[i]=g,e=e.slice(0,i).concat(e.slice(i+1));break}return null!=r&&e.push({name:n,value:r}),e}v.prototype=y.prototype={constructor:v,on:function(e,n){var r,i=this._,o=(e+"").trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!i.hasOwnProperty(e))throw Error("unknown type: "+e);return{type:e,name:n}}),a=-1,s=o.length;if(arguments.length<2){for(;++a<s;)if((r=(e=o[a]).type)&&(r=function(e,n){for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).name===n)return r.value}(i[r],e.name)))return r;return}if(null!=n&&"function"!=typeof n)throw Error("invalid callback: "+n);for(;++a<s;)if(r=(e=o[a]).type)i[r]=b(i[r],e.name,n);else if(null==n)for(r in i)i[r]=b(i[r],e.name,null);return this},copy:function(){var e={},n=this._;for(var r in n)e[r]=n[r].slice();return new v(e)},call:function(e,n){if((r=arguments.length-2)>0)for(var r,i,o=Array(r),a=0;a<r;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(i=this._[e],a=0,r=i.length;a<r;++a)i[a].value.apply(n,o)},apply:function(e,n,r){if(!this._.hasOwnProperty(e))throw Error("unknown type: "+e);for(var i=this._[e],o=0,a=i.length;o<a;++o)i[o].value.apply(n,r)}};var _,w,x=0,k=0,E=0,A=0,O=0,T=0,C="object"==typeof performance&&performance.now?performance:Date,P="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function M(){return O||(P(S),O=C.now()+T)}function S(){O=0}function D(){this._call=this._time=this._next=null}function N(e,n,r){var i=new D;return i.restart(e,n,r),i}function j(){O=(A=C.now())+T,x=k=0;try{M(),++x;for(var e,n=_;n;)(e=O-n._time)>=0&&n._call.call(void 0,e),n=n._next;--x}finally{x=0,function(){for(var e,n,r=_,i=1/0;r;)r._call?(i>r._time&&(i=r._time),e=r,r=r._next):(n=r._next,r._next=null,r=e?e._next=n:_=n);w=e,L(i)}(),O=0}}function R(){var e=C.now(),n=e-A;n>1e3&&(T-=n,A=e)}function L(e){!x&&(k&&(k=clearTimeout(k)),e-O>24?(e<1/0&&(k=setTimeout(j,e-C.now()-T)),E&&(E=clearInterval(E))):(E||(A=C.now(),E=setInterval(R,1e3)),x=1,P(j)))}function I(e){return e.x}function z(e){return e.y}function F(e){return e.z}D.prototype=N.prototype={constructor:D,restart:function(e,n,r){if("function"!=typeof e)throw TypeError("callback is not a function");r=(null==r?M():+r)+(null==n?0:+n),this._next||w===this||(w?w._next=this:_=this,w=this),this._call=e,this._time=r,L()},stop:function(){this._call&&(this._call=null,this._time=1/0,L())}};var B=Math.PI*(3-Math.sqrt(5)),U=20*Math.PI/(9+Math.sqrt(221));function V(e,n){let r;var i,o=Math.min(3,Math.max(1,Math.round(n=n||2))),a=1,s=.001,l=1-Math.pow(.001,1/300),c=0,u=.6,h=new Map,d=N(m),f=y("tick","end"),p=(r=1,()=>(r=(1664525*r+0x3c6ef35f)%0x100000000)/0x100000000);function m(){g(),f.call("tick",i),a<s&&(d.stop(),f.call("end",i))}function g(n){var r,s,d=e.length;void 0===n&&(n=1);for(var f=0;f<n;++f)for(a+=(c-a)*l,h.forEach(function(e){e(a)}),r=0;r<d;++r)null==(s=e[r]).fx?s.x+=s.vx*=u:(s.x=s.fx,s.vx=0),o>1&&(null==s.fy?s.y+=s.vy*=u:(s.y=s.fy,s.vy=0)),o>2&&(null==s.fz?s.z+=s.vz*=u:(s.z=s.fz,s.vz=0));return i}function v(){for(var n,r=0,i=e.length;r<i;++r){if((n=e[r]).index=r,null!=n.fx&&(n.x=n.fx),null!=n.fy&&(n.y=n.fy),null!=n.fz&&(n.z=n.fz),isNaN(n.x)||o>1&&isNaN(n.y)||o>2&&isNaN(n.z)){var a=10*(o>2?Math.cbrt(.5+r):o>1?Math.sqrt(.5+r):r),s=r*B,l=r*U;1===o?n.x=a:2===o?(n.x=a*Math.cos(s),n.y=a*Math.sin(s)):(n.x=a*Math.sin(s)*Math.cos(l),n.y=a*Math.cos(s),n.z=a*Math.sin(s)*Math.sin(l))}(isNaN(n.vx)||o>1&&isNaN(n.vy)||o>2&&isNaN(n.vz))&&(n.vx=0,o>1&&(n.vy=0),o>2&&(n.vz=0))}}function b(n){return n.initialize&&n.initialize(e,p,o),n}return null==e&&(e=[]),v(),i={tick:g,restart:function(){return d.restart(m),i},stop:function(){return d.stop(),i},numDimensions:function(e){return arguments.length?(o=Math.min(3,Math.max(1,Math.round(e))),h.forEach(b),i):o},nodes:function(n){return arguments.length?(e=n,v(),h.forEach(b),i):e},alpha:function(e){return arguments.length?(a=+e,i):a},alphaMin:function(e){return arguments.length?(s=+e,i):s},alphaDecay:function(e){return arguments.length?(l=+e,i):+l},alphaTarget:function(e){return arguments.length?(c=+e,i):c},velocityDecay:function(e){return arguments.length?(u=1-e,i):1-u},randomSource:function(e){return arguments.length?(p=e,h.forEach(b),i):p},force:function(e,n){return arguments.length>1?(null==n?h.delete(e):h.set(e,b(n)),i):h.get(e)},find:function(){var n,r,i,a,s,l,c=Array.prototype.slice.call(arguments),u=c.shift()||0,h=(o>1?c.shift():null)||0,d=(o>2?c.shift():null)||0,f=c.shift()||1/0,p=0,m=e.length;for(f*=f,p=0;p<m;++p)n=u-(s=e[p]).x,(a=n*n+(r=h-(s.y||0))*r+(i=d-(s.z||0))*i)<f&&(l=s,f=a);return l},on:function(e,n){return arguments.length>1?(f.on(e,n),i):f.on(e)}}}function H(e){return function(){return e}}function q(e){return(e()-.5)*1e-6}function G(e){return e.index}function K(e,n){var r=e.get(n);if(!r)throw Error("node not found: "+n);return r}function $(e){var n,r,i,o,a,s,l,c=G,u=function(e){return 1/Math.min(a[e.source.index],a[e.target.index])},h=H(30),d=1;function f(i){for(var a=0,c=e.length;a<d;++a)for(var u,h,f,p,m,g=0,y=0,v=0,b=0;g<c;++g)h=(u=e[g]).source,y=(f=u.target).x+f.vx-h.x-h.vx||q(l),o>1&&(v=f.y+f.vy-h.y-h.vy||q(l)),o>2&&(b=f.z+f.vz-h.z-h.vz||q(l)),p=((p=Math.sqrt(y*y+v*v+b*b))-r[g])/p*i*n[g],y*=p,v*=p,b*=p,f.vx-=y*(m=s[g]),o>1&&(f.vy-=v*m),o>2&&(f.vz-=b*m),h.vx+=y*(m=1-m),o>1&&(h.vy+=v*m),o>2&&(h.vz+=b*m)}function p(){if(i){var o,l,u=i.length,h=e.length,d=new Map(i.map((e,n)=>[c(e,n,i),e]));for(o=0,a=Array(u);o<h;++o)(l=e[o]).index=o,"object"!=typeof l.source&&(l.source=K(d,l.source)),"object"!=typeof l.target&&(l.target=K(d,l.target)),a[l.source.index]=(a[l.source.index]||0)+1,a[l.target.index]=(a[l.target.index]||0)+1;for(o=0,s=Array(h);o<h;++o)l=e[o],s[o]=a[l.source.index]/(a[l.source.index]+a[l.target.index]);n=Array(h),m(),r=Array(h),g()}}function m(){if(i)for(var r=0,o=e.length;r<o;++r)n[r]=+u(e[r],r,e)}function g(){if(i)for(var n=0,o=e.length;n<o;++n)r[n]=+h(e[n],n,e)}return null==e&&(e=[]),f.initialize=function(e,...n){i=e,l=n.find(e=>"function"==typeof e)||Math.random,o=n.find(e=>[1,2,3].includes(e))||2,p()},f.links=function(n){return arguments.length?(e=n,p(),f):e},f.id=function(e){return arguments.length?(c=e,f):c},f.iterations=function(e){return arguments.length?(d=+e,f):d},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:H(+e),m(),f):u},f.distance=function(e){return arguments.length?(h="function"==typeof e?e:H(+e),g(),f):h},f}function Y(e,n,r){if(isNaN(n))return e;var i,o,a,s,l,c,u=e._root,h={data:r},d=e._x0,f=e._x1;if(!u)return e._root=h,e;for(;u.length;)if((s=n>=(o=(d+f)/2))?d=o:f=o,i=u,!(u=u[l=+s]))return i[l]=h,e;if(n===(a=+e._x.call(null,u.data)))return h.next=u,i?i[l]=h:e._root=h,e;do i=i?i[l]=[,,]:e._root=[,,],(s=n>=(o=(d+f)/2))?d=o:f=o;while((l=+s)==(c=+(a>=o)));return i[c]=u,i[l]=h,e}function W(e,n,r){this.node=e,this.x0=n,this.x1=r}function X(e){return e[0]}function Z(e,n){var r=new J(null==n?X:n,NaN,NaN);return null==e?r:r.addAll(e)}function J(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function Q(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var ee=Z.prototype=J.prototype;function et(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,a,s,l,c,u,h,d,f,p=e._root,m={data:i},g=e._x0,y=e._y0,v=e._x1,b=e._y1;if(!p)return e._root=m,e;for(;p.length;)if((u=n>=(a=(g+v)/2))?g=a:v=a,(h=r>=(s=(y+b)/2))?y=s:b=s,o=p,!(p=p[d=h<<1|u]))return o[d]=m,e;if(l=+e._x.call(null,p.data),c=+e._y.call(null,p.data),n===l&&r===c)return m.next=p,o?o[d]=m:e._root=m,e;do o=o?o[d]=[,,,,]:e._root=[,,,,],(u=n>=(a=(g+v)/2))?g=a:v=a,(h=r>=(s=(y+b)/2))?y=s:b=s;while((d=h<<1|u)==(f=(c>=s)<<1|l>=a));return o[f]=p,o[d]=m,e}function en(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function er(e){return e[0]}function ei(e){return e[1]}function eo(e,n,r){var i=new ea(null==n?er:n,null==r?ei:r,NaN,NaN,NaN,NaN);return null==e?i:i.addAll(e)}function ea(e,n,r,i,o,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function es(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}ee.copy=function(){var e,n,r=new J(this._x,this._x0,this._x1),i=this._root;if(!i)return r;if(!i.length)return r._root=Q(i),r;for(e=[{source:i,target:r._root=[,,]}];i=e.pop();)for(var o=0;o<2;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=[,,]}):i.target[o]=Q(n));return r},ee.add=function(e){let n=+this._x.call(null,e);return Y(this.cover(n),n,e)},ee.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let n=e.length,r=new Float64Array(n),i=1/0,o=-1/0;for(let a=0,s;a<n;++a)!isNaN(s=+this._x.call(null,e[a]))&&(r[a]=s,s<i&&(i=s),s>o&&(o=s));if(i>o)return this;this.cover(i).cover(o);for(let i=0;i<n;++i)Y(this,r[i],e[i]);return this},ee.cover=function(e){if(isNaN(e*=1))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i,o,a=r-n||1,s=this._root;n>e||e>=r;)switch(o=+(e<n),(i=[,,])[o]=s,s=i,a*=2,o){case 0:r=n+a;break;case 1:n=r-a}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._x1=r,this},ee.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},ee.extent=function(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]},ee.find=function(e,n){var r,i,o,a,s,l=this._x0,c=this._x1,u=[],h=this._root;for(h&&u.push(new W(h,l,c)),null==n?n=1/0:(l=e-n,c=e+n);a=u.pop();)if((h=a.node)&&!((i=a.x0)>c)&&!((o=a.x1)<l))if(h.length){var d=(i+o)/2;u.push(new W(h[1],d,o),new W(h[0],i,d)),(s=+(e>=d))&&(a=u[u.length-1],u[u.length-1]=u[u.length-1-s],u[u.length-1-s]=a)}else{var f=Math.abs(e-this._x.call(null,h.data));f<n&&(n=f,l=e-f,c=e+f,r=h.data)}return r},ee.remove=function(e){if(isNaN(a=+this._x.call(null,e)))return this;var n,r,i,o,a,s,l,c,u,h=this._root,d=this._x0,f=this._x1;if(!h)return this;if(h.length)for(;;){if((l=a>=(s=(d+f)/2))?d=s:f=s,n=h,!(h=h[c=+l]))return this;if(!h.length)break;n[c+1&1]&&(r=n,u=c)}for(;h.data!==e;)if(i=h,!(h=h.next))return this;return((o=h.next)&&delete h.next,i)?o?i.next=o:delete i.next:n?(o?n[c]=o:delete n[c],(h=n[0]||n[1])&&h===(n[1]||n[0])&&!h.length&&(r?r[u]=h:this._root=h)):this._root=o,this},ee.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},ee.root=function(){return this._root},ee.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},ee.visit=function(e){var n,r,i,o,a=[],s=this._root;for(s&&a.push(new W(s,this._x0,this._x1));n=a.pop();)if(!e(s=n.node,i=n.x0,o=n.x1)&&s.length){var l=(i+o)/2;(r=s[1])&&a.push(new W(r,l,o)),(r=s[0])&&a.push(new W(r,i,l))}return this},ee.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new W(this._root,this._x0,this._x1));n=r.pop();){var o=n.node;if(o.length){var a,s=n.x0,l=n.x1,c=(s+l)/2;(a=o[0])&&r.push(new W(a,s,c)),(a=o[1])&&r.push(new W(a,c,l))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.x1);return this},ee.x=function(e){return arguments.length?(this._x=e,this):this._x};var el=eo.prototype=ea.prototype;function ec(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,s,l,c,u,h,d,f,p,m,g,y,v=e._root,b={data:o},_=e._x0,w=e._y0,x=e._z0,k=e._x1,E=e._y1,A=e._z1;if(!v)return e._root=b,e;for(;v.length;)if((f=n>=(s=(_+k)/2))?_=s:k=s,(p=r>=(l=(w+E)/2))?w=l:E=l,(m=i>=(c=(x+A)/2))?x=c:A=c,a=v,!(v=v[g=m<<2|p<<1|f]))return a[g]=b,e;if(u=+e._x.call(null,v.data),h=+e._y.call(null,v.data),d=+e._z.call(null,v.data),n===u&&r===h&&i===d)return b.next=v,a?a[g]=b:e._root=b,e;do a=a?a[g]=Array(8):e._root=Array(8),(f=n>=(s=(_+k)/2))?_=s:k=s,(p=r>=(l=(w+E)/2))?w=l:E=l,(m=i>=(c=(x+A)/2))?x=c:A=c;while((g=m<<2|p<<1|f)==(y=(d>=c)<<2|(h>=l)<<1|u>=s));return a[y]=v,a[g]=b,e}function eu(e,n,r,i,o,a,s){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=a,this.z1=s}el.copy=function(){var e,n,r=new ea(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return r;if(!i.length)return r._root=es(i),r;for(e=[{source:i,target:r._root=[,,,,]}];i=e.pop();)for(var o=0;o<4;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=[,,,,]}):i.target[o]=es(n));return r},el.add=function(e){let n=+this._x.call(null,e),r=+this._y.call(null,e);return et(this.cover(n,r),n,r,e)},el.addAll=function(e){var n,r,i,o,a=e.length,s=Array(a),l=Array(a),c=1/0,u=1/0,h=-1/0,d=-1/0;for(r=0;r<a;++r)!(isNaN(i=+this._x.call(null,n=e[r]))||isNaN(o=+this._y.call(null,n)))&&(s[r]=i,l[r]=o,i<c&&(c=i),i>h&&(h=i),o<u&&(u=o),o>d&&(d=o));if(c>h||u>d)return this;for(this.cover(c,u).cover(h,d),r=0;r<a;++r)et(this,s[r],l[r],e[r]);return this},el.cover=function(e,n){if(isNaN(e*=1)||isNaN(n*=1))return this;var r=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var s,l,c=o-r||1,u=this._root;r>e||e>=o||i>n||n>=a;)switch(l=(n<i)<<1|e<r,(s=[,,,,])[l]=u,u=s,c*=2,l){case 0:o=r+c,a=i+c;break;case 1:r=o-c,a=i+c;break;case 2:o=r+c,i=a-c;break;case 3:r=o-c,i=a-c}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._x1=o,this._y1=a,this},el.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},el.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},el.find=function(e,n,r){var i,o,a,s,l,c,u,h=this._x0,d=this._y0,f=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new en(g,h,d,f,p)),null==r?r=1/0:(h=e-r,d=n-r,f=e+r,p=n+r,r*=r);c=m.pop();)if((g=c.node)&&!((o=c.x0)>f)&&!((a=c.y0)>p)&&!((s=c.x1)<h)&&!((l=c.y1)<d))if(g.length){var y=(o+s)/2,v=(a+l)/2;m.push(new en(g[3],y,v,s,l),new en(g[2],o,v,y,l),new en(g[1],y,a,s,v),new en(g[0],o,a,y,v)),(u=(n>=v)<<1|e>=y)&&(c=m[m.length-1],m[m.length-1]=m[m.length-1-u],m[m.length-1-u]=c)}else{var b=e-this._x.call(null,g.data),_=n-this._y.call(null,g.data),w=b*b+_*_;if(w<r){var x=Math.sqrt(r=w);h=e-x,d=n-x,f=e+x,p=n+x,i=g.data}}return i},el.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e)))return this;var n,r,i,o,a,s,l,c,u,h,d,f,p=this._root,m=this._x0,g=this._y0,y=this._x1,v=this._y1;if(!p)return this;if(p.length)for(;;){if((u=a>=(l=(m+y)/2))?m=l:y=l,(h=s>=(c=(g+v)/2))?g=c:v=c,n=p,!(p=p[d=h<<1|u]))return this;if(!p.length)break;(n[d+1&3]||n[d+2&3]||n[d+3&3])&&(r=n,f=d)}for(;p.data!==e;)if(i=p,!(p=p.next))return this;return((o=p.next)&&delete p.next,i)?o?i.next=o:delete i.next:n?(o?n[d]=o:delete n[d],(p=n[0]||n[1]||n[2]||n[3])&&p===(n[3]||n[2]||n[1]||n[0])&&!p.length&&(r?r[f]=p:this._root=p)):this._root=o,this},el.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},el.root=function(){return this._root},el.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},el.visit=function(e){var n,r,i,o,a,s,l=[],c=this._root;for(c&&l.push(new en(c,this._x0,this._y0,this._x1,this._y1));n=l.pop();)if(!e(c=n.node,i=n.x0,o=n.y0,a=n.x1,s=n.y1)&&c.length){var u=(i+a)/2,h=(o+s)/2;(r=c[3])&&l.push(new en(r,u,h,a,s)),(r=c[2])&&l.push(new en(r,i,h,u,s)),(r=c[1])&&l.push(new en(r,u,o,a,h)),(r=c[0])&&l.push(new en(r,i,o,u,h))}return this},el.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new en(this._root,this._x0,this._y0,this._x1,this._y1));n=r.pop();){var o=n.node;if(o.length){var a,s=n.x0,l=n.y0,c=n.x1,u=n.y1,h=(s+c)/2,d=(l+u)/2;(a=o[0])&&r.push(new en(a,s,l,h,d)),(a=o[1])&&r.push(new en(a,h,l,c,d)),(a=o[2])&&r.push(new en(a,s,d,h,u)),(a=o[3])&&r.push(new en(a,h,d,c,u))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this},el.x=function(e){return arguments.length?(this._x=e,this):this._x},el.y=function(e){return arguments.length?(this._y=e,this):this._y};let eh=(e,n,r,i,o,a)=>Math.sqrt((e-i)**2+(n-o)**2+(r-a)**2);function ed(e){return e[0]}function ef(e){return e[1]}function ep(e){return e[2]}function em(e,n,r,i){var o=new eg(null==n?ed:n,null==r?ef:r,null==i?ep:i,NaN,NaN,NaN,NaN,NaN,NaN);return null==e?o:o.addAll(e)}function eg(e,n,r,i,o,a,s,l,c){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=c,this._root=void 0}function ey(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var ev=em.prototype=eg.prototype;function eb(){var e,n,r,i,o,a,s=H(-30),l=1,c=1/0,u=.81;function h(i){var a,s=e.length,l=(1===n?Z(e,I):2===n?eo(e,I,z):3===n?em(e,I,z,F):null).visitAfter(f);for(o=i,a=0;a<s;++a)r=e[a],l.visit(p)}function d(){if(e){var n,r,i=e.length;for(n=0,a=Array(i);n<i;++n)a[(r=e[n]).index]=+s(r,n,e)}}function f(e){var r,i,o,s,l,c,u=0,h=0,d=e.length;if(d){for(o=s=l=c=0;c<d;++c)(r=e[c])&&(i=Math.abs(r.value))&&(u+=r.value,h+=i,o+=i*(r.x||0),s+=i*(r.y||0),l+=i*(r.z||0));u*=Math.sqrt(4/d),e.x=o/h,n>1&&(e.y=s/h),n>2&&(e.z=l/h)}else{(r=e).x=r.data.x,n>1&&(r.y=r.data.y),n>2&&(r.z=r.data.z);do u+=a[r.data.index];while(r=r.next)}e.value=u}function p(e,s,h,d,f){if(!e.value)return!0;var p=[h,d,f][n-1],m=e.x-r.x,g=n>1?e.y-r.y:0,y=n>2?e.z-r.z:0,v=p-s,b=m*m+g*g+y*y;if(v*v/u<b)return b<c&&(0===m&&(b+=(m=q(i))*m),n>1&&0===g&&(b+=(g=q(i))*g),n>2&&0===y&&(b+=(y=q(i))*y),b<l&&(b=Math.sqrt(l*b)),r.vx+=m*e.value*o/b,n>1&&(r.vy+=g*e.value*o/b),n>2&&(r.vz+=y*e.value*o/b)),!0;if(!e.length&&!(b>=c)){(e.data!==r||e.next)&&(0===m&&(b+=(m=q(i))*m),n>1&&0===g&&(b+=(g=q(i))*g),n>2&&0===y&&(b+=(y=q(i))*y),b<l&&(b=Math.sqrt(l*b)));do e.data!==r&&(v=a[e.data.index]*o/b,r.vx+=m*v,n>1&&(r.vy+=g*v),n>2&&(r.vz+=y*v));while(e=e.next)}}return h.initialize=function(r,...o){e=r,i=o.find(e=>"function"==typeof e)||Math.random,n=o.find(e=>[1,2,3].includes(e))||2,d()},h.strength=function(e){return arguments.length?(s="function"==typeof e?e:H(+e),d(),h):s},h.distanceMin=function(e){return arguments.length?(l=e*e,h):Math.sqrt(l)},h.distanceMax=function(e){return arguments.length?(c=e*e,h):Math.sqrt(c)},h.theta=function(e){return arguments.length?(u=e*e,h):Math.sqrt(u)},h}function e_(e,n,r){var i,o=1;function a(){var a,s,l=i.length,c=0,u=0,h=0;for(a=0;a<l;++a)c+=(s=i[a]).x||0,u+=s.y||0,h+=s.z||0;for(c=(c/l-e)*o,u=(u/l-n)*o,h=(h/l-r)*o,a=0;a<l;++a)s=i[a],c&&(s.x-=c),u&&(s.y-=u),h&&(s.z-=h)}return null==e&&(e=0),null==n&&(n=0),null==r&&(r=0),a.initialize=function(e){i=e},a.x=function(n){return arguments.length?(e=+n,a):e},a.y=function(e){return arguments.length?(n=+e,a):n},a.z=function(e){return arguments.length?(r=+e,a):r},a.strength=function(e){return arguments.length?(o=+e,a):o},a}function ew(e,n,r,i){var o,a,s,l,c=H(.1);function u(e){for(var c=0,u=o.length;c<u;++c){var h=o[c],d=h.x-n||1e-6,f=(h.y||0)-r||1e-6,p=(h.z||0)-i||1e-6,m=Math.sqrt(d*d+f*f+p*p),g=(l[c]-m)*s[c]*e/m;h.vx+=d*g,a>1&&(h.vy+=f*g),a>2&&(h.vz+=p*g)}}function h(){if(o){var n,r=o.length;for(n=0,s=Array(r),l=Array(r);n<r;++n)l[n]=+e(o[n],n,o),s[n]=isNaN(l[n])?0:+c(o[n],n,o)}}return"function"!=typeof e&&(e=H(+e)),null==n&&(n=0),null==r&&(r=0),null==i&&(i=0),u.initialize=function(e,...n){o=e,a=n.find(e=>[1,2,3].includes(e))||2,h()},u.strength=function(e){return arguments.length?(c="function"==typeof e?e:H(+e),h(),u):c},u.radius=function(n){return arguments.length?(e="function"==typeof n?n:H(+n),h(),u):e},u.x=function(e){return arguments.length?(n=+e,u):n},u.y=function(e){return arguments.length?(r=+e,u):r},u.z=function(e){return arguments.length?(i=+e,u):i},u}ev.copy=function(){var e,n,r=new eg(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),i=this._root;if(!i)return r;if(!i.length)return r._root=ey(i),r;for(e=[{source:i,target:r._root=Array(8)}];i=e.pop();)for(var o=0;o<8;++o)(n=i.source[o])&&(n.length?e.push({source:n,target:i.target[o]=Array(8)}):i.target[o]=ey(n));return r},ev.add=function(e){let n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return ec(this.cover(n,r,i),n,r,i,e)},ev.addAll=function(e){Array.isArray(e)||(e=Array.from(e));let n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n),a=1/0,s=1/0,l=1/0,c=-1/0,u=-1/0,h=-1/0;for(let d=0,f,p,m,g;d<n;++d)!(isNaN(p=+this._x.call(null,f=e[d]))||isNaN(m=+this._y.call(null,f))||isNaN(g=+this._z.call(null,f)))&&(r[d]=p,i[d]=m,o[d]=g,p<a&&(a=p),p>c&&(c=p),m<s&&(s=m),m>u&&(u=m),g<l&&(l=g),g>h&&(h=g));if(a>c||s>u||l>h)return this;this.cover(a,s,l).cover(c,u,h);for(let a=0;a<n;++a)ec(this,r[a],i[a],o[a],e[a]);return this},ev.cover=function(e,n,r){if(isNaN(e*=1)||isNaN(n*=1)||isNaN(r*=1))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,l=this._y1,c=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,l=(o=Math.floor(n))+1,c=(a=Math.floor(r))+1;else{for(var u,h,d=s-i||1,f=this._root;i>e||e>=s||o>n||n>=l||a>r||r>=c;)switch(h=(r<a)<<2|(n<o)<<1|e<i,(u=Array(8))[h]=f,f=u,d*=2,h){case 0:s=i+d,l=o+d,c=a+d;break;case 1:i=s-d,l=o+d,c=a+d;break;case 2:s=i+d,o=l-d,c=a+d;break;case 3:i=s-d,o=l-d,c=a+d;break;case 4:s=i+d,l=o+d,a=c-d;break;case 5:i=s-d,l=o+d,a=c-d;break;case 6:s=i+d,o=l-d,a=c-d;break;case 7:i=s-d,o=l-d,a=c-d}this._root&&this._root.length&&(this._root=f)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=l,this._z1=c,this},ev.data=function(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e},ev.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]},ev.find=function(e,n,r,i){var o,a,s,l,c,u,h,d,f,p=this._x0,m=this._y0,g=this._z0,y=this._x1,v=this._y1,b=this._z1,_=[],w=this._root;for(w&&_.push(new eu(w,p,m,g,y,v,b)),null==i?i=1/0:(p=e-i,m=n-i,g=r-i,y=e+i,v=n+i,b=r+i,i*=i);d=_.pop();)if((w=d.node)&&!((a=d.x0)>y)&&!((s=d.y0)>v)&&!((l=d.z0)>b)&&!((c=d.x1)<p)&&!((u=d.y1)<m)&&!((h=d.z1)<g))if(w.length){var x=(a+c)/2,k=(s+u)/2,E=(l+h)/2;_.push(new eu(w[7],x,k,E,c,u,h),new eu(w[6],a,k,E,x,u,h),new eu(w[5],x,s,E,c,k,h),new eu(w[4],a,s,E,x,k,h),new eu(w[3],x,k,l,c,u,E),new eu(w[2],a,k,l,x,u,E),new eu(w[1],x,s,l,c,k,E),new eu(w[0],a,s,l,x,k,E)),(f=(r>=E)<<2|(n>=k)<<1|e>=x)&&(d=_[_.length-1],_[_.length-1]=_[_.length-1-f],_[_.length-1-f]=d)}else{var A=e-this._x.call(null,w.data),O=n-this._y.call(null,w.data),T=r-this._z.call(null,w.data),C=A*A+O*O+T*T;if(C<i){var P=Math.sqrt(i=C);p=e-P,m=n-P,g=r-P,y=e+P,v=n+P,b=r+P,o=w.data}}return o},ev.findAllWithinRadius=function(e,n,r,i){let o=[],a=e-i,s=n-i,l=r-i,c=e+i,u=n+i,h=r+i;return this.visit((d,f,p,m,g,y,v)=>{if(!d.length)do{let a=d.data;eh(e,n,r,this._x(a),this._y(a),this._z(a))<=i&&o.push(a)}while(d=d.next);return f>c||p>u||m>h||g<a||y<s||v<l}),o},ev.remove=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(s=+this._y.call(null,e))||isNaN(l=+this._z.call(null,e)))return this;var n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y=this._root,v=this._x0,b=this._y0,_=this._z0,w=this._x1,x=this._y1,k=this._z1;if(!y)return this;if(y.length)for(;;){if((d=a>=(c=(v+w)/2))?v=c:w=c,(f=s>=(u=(b+x)/2))?b=u:x=u,(p=l>=(h=(_+k)/2))?_=h:k=h,n=y,!(y=y[m=p<<2|f<<1|d]))return this;if(!y.length)break;(n[m+1&7]||n[m+2&7]||n[m+3&7]||n[m+4&7]||n[m+5&7]||n[m+6&7]||n[m+7&7])&&(r=n,g=m)}for(;y.data!==e;)if(i=y,!(y=y.next))return this;return((o=y.next)&&delete y.next,i)?o?i.next=o:delete i.next:n?(o?n[m]=o:delete n[m],(y=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&y===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!y.length&&(r?r[g]=y:this._root=y)):this._root=o,this},ev.removeAll=function(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this},ev.root=function(){return this._root},ev.size=function(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e},ev.visit=function(e){var n,r,i,o,a,s,l,c,u=[],h=this._root;for(h&&u.push(new eu(h,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=u.pop();)if(!e(h=n.node,i=n.x0,o=n.y0,a=n.z0,s=n.x1,l=n.y1,c=n.z1)&&h.length){var d=(i+s)/2,f=(o+l)/2,p=(a+c)/2;(r=h[7])&&u.push(new eu(r,d,f,p,s,l,c)),(r=h[6])&&u.push(new eu(r,i,f,p,d,l,c)),(r=h[5])&&u.push(new eu(r,d,o,p,s,f,c)),(r=h[4])&&u.push(new eu(r,i,o,p,d,f,c)),(r=h[3])&&u.push(new eu(r,d,f,a,s,l,p)),(r=h[2])&&u.push(new eu(r,i,f,a,d,l,p)),(r=h[1])&&u.push(new eu(r,d,o,a,s,f,p)),(r=h[0])&&u.push(new eu(r,i,o,a,d,f,p))}return this},ev.visitAfter=function(e){var n,r=[],i=[];for(this._root&&r.push(new eu(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=r.pop();){var o=n.node;if(o.length){var a,s=n.x0,l=n.y0,c=n.z0,u=n.x1,h=n.y1,d=n.z1,f=(s+u)/2,p=(l+h)/2,m=(c+d)/2;(a=o[0])&&r.push(new eu(a,s,l,c,f,p,m)),(a=o[1])&&r.push(new eu(a,f,l,c,u,p,m)),(a=o[2])&&r.push(new eu(a,s,p,c,f,h,m)),(a=o[3])&&r.push(new eu(a,f,p,c,u,h,m)),(a=o[4])&&r.push(new eu(a,s,l,m,f,p,d)),(a=o[5])&&r.push(new eu(a,f,l,m,u,p,d)),(a=o[6])&&r.push(new eu(a,s,p,m,f,h,d)),(a=o[7])&&r.push(new eu(a,f,p,m,u,h,d))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this},ev.x=function(e){return arguments.length?(this._x=e,this):this._x},ev.y=function(e){return arguments.length?(this._y=e,this):this._y},ev.z=function(e){return arguments.length?(this._z=e,this):this._z};var ex=r(74339),ek=r(49062);let eE=function(e){var n=typeof e;return null!=e&&("object"==n||"function"==n)};var eA="object"==typeof global&&global&&global.Object===Object&&global,eO="object"==typeof self&&self&&self.Object===Object&&self,eT=eA||eO||Function("return this")();let eC=function(){return eT.Date.now()};var eP=/\s/;let eM=function(e){for(var n=e.length;n--&&eP.test(e.charAt(n)););return n};var eS=/^\s+/,eD=eT.Symbol,eN=Object.prototype,ej=eN.hasOwnProperty,eR=eN.toString,eL=eD?eD.toStringTag:void 0;let eI=function(e){var n=ej.call(e,eL),r=e[eL];try{e[eL]=void 0;var i=!0}catch(e){}var o=eR.call(e);return i&&(n?e[eL]=r:delete e[eL]),o};var ez=Object.prototype.toString,eF=eD?eD.toStringTag:void 0;let eB=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":eF&&eF in Object(e)?eI(e):ez.call(e)},eU=function(e){return"symbol"==typeof e||null!=e&&"object"==typeof e&&"[object Symbol]"==eB(e)};var eV=0/0,eH=/^[-+]0x[0-9a-f]+$/i,eq=/^0b[01]+$/i,eG=/^0o[0-7]+$/i,eK=parseInt;let e$=function(e){if("number"==typeof e)return e;if(eU(e))return eV;if(eE(e)){var n,r="function"==typeof e.valueOf?e.valueOf():e;e=eE(r)?r+"":r}if("string"!=typeof e)return 0===e?e:+e;e=(n=e)?n.slice(0,eM(n)+1).replace(eS,""):n;var i=eq.test(e);return i||eG.test(e)?eK(e.slice(2),i?2:8):eH.test(e)?eV:+e};var eY=Math.max,eW=Math.min;let eX=function(e,n,r){var i,o,a,s,l,c,u=0,h=!1,d=!1,f=!0;if("function"!=typeof e)throw TypeError("Expected a function");function p(n){var r=i,a=o;return i=o=void 0,u=n,s=e.apply(a,r)}function m(e){var r=e-c,i=e-u;return void 0===c||r>=n||r<0||d&&i>=a}function g(){var e,r,i,o=eC();if(m(o))return y(o);l=setTimeout(g,(e=o-c,r=o-u,i=n-e,d?eW(i,a-r):i))}function y(e){return(l=void 0,f&&i)?p(e):(i=o=void 0,s)}function v(){var e,r=eC(),a=m(r);if(i=arguments,o=this,c=r,a){if(void 0===l)return u=e=c,l=setTimeout(g,n),h?p(e):s;if(d)return clearTimeout(l),l=setTimeout(g,n),p(c)}return void 0===l&&(l=setTimeout(g,n)),s}return n=e$(n)||0,eE(r)&&(h=!!r.leading,a=(d="maxWait"in r)?eY(e$(r.maxWait)||0,n):a,f="trailing"in r?!!r.trailing:f),v.cancel=function(){void 0!==l&&clearTimeout(l),u=0,i=c=o=l=void 0},v.flush=function(){return void 0===l?s:y(eC())},v};function eZ(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}var eJ=function(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}(function e(n,r){var i=r.default,o=r.triggerUpdate,a=r.onChange;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");this.name=n,this.defaultVal=void 0===i?null:i,this.triggerUpdate=void 0===o||o,this.onChange=void 0===a?function(e,n){}:a});function eQ(e){var n=e.stateInit,r=void 0===n?function(){return{}}:n,i=e.props,o=void 0===i?{}:i,a=e.methods,s=void 0===a?{}:a,l=e.aliases,c=void 0===l?{}:l,u=e.init,h=void 0===u?function(){}:u,d=e.update,f=void 0===d?function(){}:d,p=Object.keys(o).map(function(e){return new eJ(e,o[e])});return function e(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=!!(this instanceof e?this.constructor:void 0),l=a?i.shift():void 0,u=i[0],d=void 0===u?{}:u,m=Object.assign({},r instanceof Function?r(d):r,{initialised:!1}),g={};function y(e){return v(e,d),b(),y}var v=function(e,n){h.call(y,e,m,n),m.initialised=!0},b=eX(function(){m.initialised&&(f.call(y,m,g),g={})},1);return p.forEach(function(e){var n,r,i,o,a,s,l,c;y[e.name]=(r=(n=e).name,o=void 0!==(i=n.triggerUpdate)&&i,s=void 0===(a=n.onChange)?function(e,n){}:a,c=void 0===(l=n.defaultVal)?null:l,function(e){var n=m[r];if(!arguments.length)return n;var i=void 0===e?c:e;return m[r]=i,s.call(y,i,m,n),g.hasOwnProperty(r)||(g[r]=n),o&&b(),y})}),Object.keys(s).forEach(function(e){y[e]=function(){for(var n,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=s[e]).call.apply(n,[y,m].concat(i))}}),Object.entries(c).forEach(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return eZ(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eZ(e,n):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];return y[r]=y[i]}),y.resetProps=function(){return p.forEach(function(e){y[e.name](e.defaultVal)}),y},y.resetProps(),m._rerender=b,a&&l&&y(l),y}}var e0=function(e){return"function"==typeof e?e:"string"==typeof e?function(n){return n[e]}:function(n){return e}};function e1(e,n){let r;if(void 0===n)for(let n of e)null!=n&&(r>n||void 0===r&&n>=n)&&(r=n);else{let i=-1;for(let o of e)null!=(o=n(o,++i,e))&&(r>o||void 0===r&&o>=o)&&(r=o)}return r}function e2(e,n){let r;if(void 0===n)for(let n of e)null!=n&&(r<n||void 0===r&&n>=n)&&(r=n);else{let i=-1;for(let o of e)null!=(o=n(o,++i,e))&&(r<o||void 0===r&&o>=o)&&(r=o)}return r}function e3(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function e5(e,n,r){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:r;throw TypeError("Private element is not present on this object")}function e4(e,n){return e.get(e5(e,n))}function e6(e,n,r){(function(e,n){if(n.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,n),n.set(e,r)}function e8(e,n,r){return e.set(e5(e,n),r),r}function e9(e,n){if(e){if("string"==typeof e)return e3(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e3(e,n):void 0}}var e7=new WeakMap,te=new WeakMap,tt=new WeakMap,tn=new WeakMap,tr=new WeakMap,ti=new WeakMap,to=function(){var e,n;return e=function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function");e6(this,e7,new Map),e6(this,te,new Map),e6(this,tt,function(e){return e}),e6(this,tn,function(){return{}}),e6(this,tr,function(){}),e6(this,ti,function(){})},n=[{key:"getObj",value:function(e){return e4(e7,this).get(e4(tt,this).call(this,e))}},{key:"getData",value:function(e){return e4(te,this).get(e)}},{key:"entries",value:function(){var e;return((function(e){if(Array.isArray(e))return e3(e)})(e=e4(te,this).entries())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||e9(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,2)||e9(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0];return[n[1],r]})}},{key:"id",value:function(e){return e8(tt,this,e0(e)),this}},{key:"onCreateObj",value:function(e){return e8(tn,this,e),this}},{key:"onUpdateObj",value:function(e){return e8(tr,this,e),this}},{key:"onRemoveObj",value:function(e){return e8(ti,this,e),this}},{key:"digest",value:function(e){var n=this;e.filter(function(e){return!e4(e7,n).has(e4(tt,n).call(n,e))}).forEach(function(e){var r=e4(tn,n).call(n,e);e4(e7,n).set(e4(tt,n).call(n,e),r),e4(te,n).set(r,e)});var r=new Map(e.map(function(e){return[e4(tt,n).call(n,e),e]}));return e4(e7,this).forEach(function(e,i){r.has(i)?e4(tr,n).call(n,e,r.get(i)):(e4(ti,n).call(n,e,i),e4(e7,n).delete(i),e4(te,n).delete(e))}),this}},{key:"clear",value:function(){return this.digest([]),this}}],function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();class ta extends Map{constructor(e,n=tl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),null!=e)for(let[n,r]of e)this.set(n,r)}get(e){return super.get(ts(this,e))}has(e){return super.has(ts(this,e))}set(e,n){return super.set(function({_intern:e,_key:n},r){let i=n(r);return e.has(i)?e.get(i):(e.set(i,r),r)}(this,e),n)}delete(e){return super.delete(function({_intern:e,_key:n},r){let i=n(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}(this,e))}}function ts({_intern:e,_key:n},r){let i=n(r);return e.has(i)?e.get(i):r}function tl(e){return null!==e&&"object"==typeof e?e.valueOf():e}function tc(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e)}return this}let tu=Symbol("implicit");function th(){var e=new ta,n=[],r=[],i=tu;function o(o){let a=e.get(o);if(void 0===a){if(i!==tu)return i;e.set(o,a=n.push(o)-1)}return r[a%r.length]}return o.domain=function(r){if(!arguments.length)return n.slice();for(let i of(n=[],e=new ta,r))e.has(i)||e.set(i,n.push(i)-1);return o},o.range=function(e){return arguments.length?(r=Array.from(e),o):r.slice()},o.unknown=function(e){return arguments.length?(i=e,o):i},o.copy=function(){return th(n,r).unknown(i)},tc.apply(o,arguments),o}let td=function(e){for(var n=e.length/6|0,r=Array(n),i=0;i<n;)r[i]="#"+e.slice(6*i,6*++i);return r}("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function tf(e){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var tp=/^\s+/,tm=/\s+$/;function tg(e,n){if(n=n||{},(e=e||"")instanceof tg)return e;if(!(this instanceof tg))return new tg(e,n);var r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,b,_,w,x,k=(i={r:0,g:0,b:0},o=1,a=null,s=null,l=null,c=!1,u=!1,"string"==typeof(r=e)&&(r=function(e){e=e.replace(tp,"").replace(tm,"").toLowerCase();var n,r=!1;if(tN[e])e=tN[e],r=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(n=tV.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=tV.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=tV.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=tV.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=tV.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=tV.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=tV.hex8.exec(e))?{r:tz(n[1]),g:tz(n[2]),b:tz(n[3]),a:tz(n[4])/255,format:r?"name":"hex8"}:(n=tV.hex6.exec(e))?{r:tz(n[1]),g:tz(n[2]),b:tz(n[3]),format:r?"name":"hex"}:(n=tV.hex4.exec(e))?{r:tz(n[1]+""+n[1]),g:tz(n[2]+""+n[2]),b:tz(n[3]+""+n[3]),a:tz(n[4]+""+n[4])/255,format:r?"name":"hex8"}:!!(n=tV.hex3.exec(e))&&{r:tz(n[1]+""+n[1]),g:tz(n[2]+""+n[2]),b:tz(n[3]+""+n[3]),format:r?"name":"hex"}}(r)),"object"==tf(r)&&(tH(r.r)&&tH(r.g)&&tH(r.b)?(h=r.r,d=r.g,f=r.b,i={r:255*tL(h,255),g:255*tL(d,255),b:255*tL(f,255)},c=!0,u="%"===String(r.r).substr(-1)?"prgb":"rgb"):tH(r.h)&&tH(r.s)&&tH(r.v)?(a=tB(r.s),s=tB(r.v),p=r.h,m=a,g=s,p=6*tL(p,360),m=tL(m,100),g=tL(g,100),y=Math.floor(p),v=p-y,b=g*(1-m),_=g*(1-v*m),w=g*(1-(1-v)*m),i={r:255*[g,_,b,b,w,g][x=y%6],g:255*[w,g,g,_,b,b][x],b:255*[b,b,w,g,g,_][x]},c=!0,u="hsv"):tH(r.h)&&tH(r.s)&&tH(r.l)&&(a=tB(r.s),l=tB(r.l),i=function(e,n,r){var i,o,a;function s(e,n,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(n-e)*6*r:r<.5?n:r<2/3?e+(n-e)*(2/3-r)*6:e}if(e=tL(e,360),n=tL(n,100),r=tL(r,100),0===n)i=o=a=r;else{var l=r<.5?r*(1+n):r+n-r*n,c=2*r-l;i=s(c,l,e+1/3),o=s(c,l,e),a=s(c,l,e-1/3)}return{r:255*i,g:255*o,b:255*a}}(r.h,a,l),c=!0,u="hsl"),r.hasOwnProperty("a")&&(o=r.a)),o=tR(o),{ok:c,format:r.format||u,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:o});this._originalInput=e,this._r=k.r,this._g=k.g,this._b=k.b,this._a=k.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||k.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=k.ok}function ty(e,n,r){e=tL(e,255);var i,o,a=Math.max(e,n=tL(n,255),r=tL(r,255)),s=Math.min(e,n,r),l=(a+s)/2;if(a==s)i=o=0;else{var c=a-s;switch(o=l>.5?c/(2-a-s):c/(a+s),a){case e:i=(n-r)/c+6*(n<r);break;case n:i=(r-e)/c+2;break;case r:i=(e-n)/c+4}i/=6}return{h:i,s:o,l:l}}function tv(e,n,r){e=tL(e,255);var i,o=Math.max(e,n=tL(n,255),r=tL(r,255)),a=Math.min(e,n,r),s=o-a;if(o==a)i=0;else{switch(o){case e:i=(n-r)/s+6*(n<r);break;case n:i=(r-e)/s+2;break;case r:i=(e-n)/s+4}i/=6}return{h:i,s:0===o?0:s/o,v:o}}function tb(e,n,r,i){var o=[tF(Math.round(e).toString(16)),tF(Math.round(n).toString(16)),tF(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function t_(e,n,r,i){return[tF(tU(i)),tF(Math.round(e).toString(16)),tF(Math.round(n).toString(16)),tF(Math.round(r).toString(16))].join("")}function tw(e,n){n=0===n?0:n||10;var r=tg(e).toHsl();return r.s-=n/100,r.s=tI(r.s),tg(r)}function tx(e,n){n=0===n?0:n||10;var r=tg(e).toHsl();return r.s+=n/100,r.s=tI(r.s),tg(r)}function tk(e){return tg(e).desaturate(100)}function tE(e,n){n=0===n?0:n||10;var r=tg(e).toHsl();return r.l+=n/100,r.l=tI(r.l),tg(r)}function tA(e,n){n=0===n?0:n||10;var r=tg(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(-(n/100*255)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(-(n/100*255)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(-(n/100*255)))),tg(r)}function tO(e,n){n=0===n?0:n||10;var r=tg(e).toHsl();return r.l-=n/100,r.l=tI(r.l),tg(r)}function tT(e,n){var r=tg(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,tg(r)}function tC(e){var n=tg(e).toHsl();return n.h=(n.h+180)%360,tg(n)}function tP(e,n){if(isNaN(n)||n<=0)throw Error("Argument to polyad must be a positive number");for(var r=tg(e).toHsl(),i=[tg(e)],o=360/n,a=1;a<n;a++)i.push(tg({h:(r.h+a*o)%360,s:r.s,l:r.l}));return i}function tM(e){var n=tg(e).toHsl(),r=n.h;return[tg(e),tg({h:(r+72)%360,s:n.s,l:n.l}),tg({h:(r+216)%360,s:n.s,l:n.l})]}function tS(e,n,r){n=n||6,r=r||30;var i=tg(e).toHsl(),o=360/r,a=[tg(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,a.push(tg(i));return a}function tD(e,n){n=n||6;for(var r=tg(e).toHsv(),i=r.h,o=r.s,a=r.v,s=[],l=1/n;n--;)s.push(tg({h:i,s:o,v:a})),a=(a+l)%1;return s}tg.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,n,r,i,o,a,s=this.toRgb();return e=s.r/255,n=s.g/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*((r=s.b/255)<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},setAlpha:function(e){return this._a=tR(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=tv(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=tv(this._r,this._g,this._b),n=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.v);return 1==this._a?"hsv("+n+", "+r+"%, "+i+"%)":"hsva("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=ty(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=ty(this._r,this._g,this._b),n=Math.round(360*e.h),r=Math.round(100*e.s),i=Math.round(100*e.l);return 1==this._a?"hsl("+n+", "+r+"%, "+i+"%)":"hsla("+n+", "+r+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return tb(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){var n,r,i,o,a,s;return n=this._r,r=this._g,i=this._b,o=this._a,a=e,s=[tF(Math.round(n).toString(16)),tF(Math.round(r).toString(16)),tF(Math.round(i).toString(16)),tF(tU(o))],a&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*tL(this._r,255))+"%",g:Math.round(100*tL(this._g,255))+"%",b:Math.round(100*tL(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*tL(this._r,255))+"%, "+Math.round(100*tL(this._g,255))+"%, "+Math.round(100*tL(this._b,255))+"%)":"rgba("+Math.round(100*tL(this._r,255))+"%, "+Math.round(100*tL(this._g,255))+"%, "+Math.round(100*tL(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(tj[tb(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var n="#"+t_(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var o=tg(e);r="#"+t_(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var n=!!e;e=e||this._format;var r=!1,i=this._a<1&&this._a>=0;return!n&&i&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e)?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(r=this.toRgbString()),"prgb"===e&&(r=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(r=this.toHexString()),"hex3"===e&&(r=this.toHexString(!0)),"hex4"===e&&(r=this.toHex8String(!0)),"hex8"===e&&(r=this.toHex8String()),"name"===e&&(r=this.toName()),"hsl"===e&&(r=this.toHslString()),"hsv"===e&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return tg(this.toString())},_applyModification:function(e,n){var r=e.apply(null,[this].concat([].slice.call(n)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(tE,arguments)},brighten:function(){return this._applyModification(tA,arguments)},darken:function(){return this._applyModification(tO,arguments)},desaturate:function(){return this._applyModification(tw,arguments)},saturate:function(){return this._applyModification(tx,arguments)},greyscale:function(){return this._applyModification(tk,arguments)},spin:function(){return this._applyModification(tT,arguments)},_applyCombination:function(e,n){return e.apply(null,[this].concat([].slice.call(n)))},analogous:function(){return this._applyCombination(tS,arguments)},complement:function(){return this._applyCombination(tC,arguments)},monochromatic:function(){return this._applyCombination(tD,arguments)},splitcomplement:function(){return this._applyCombination(tM,arguments)},triad:function(){return this._applyCombination(tP,[3])},tetrad:function(){return this._applyCombination(tP,[4])}},tg.fromRatio=function(e,n){if("object"==tf(e)){var r={};for(var i in e)e.hasOwnProperty(i)&&("a"===i?r[i]=e[i]:r[i]=tB(e[i]));e=r}return tg(e,n)},tg.equals=function(e,n){return!!e&&!!n&&tg(e).toRgbString()==tg(n).toRgbString()},tg.random=function(){return tg.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tg.mix=function(e,n,r){r=0===r?0:r||50;var i=tg(e).toRgb(),o=tg(n).toRgb(),a=r/100;return tg({r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a})},tg.readability=function(e,n){var r=tg(e),i=tg(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)},tg.isReadable=function(e,n,r){var i,o,a,s,l,c=tg.readability(e,n);switch(l=!1,(o=((i=(i=r)||{level:"AA",size:"small"}).level||"AA").toUpperCase(),a=(i.size||"small").toLowerCase(),"AA"!==o&&"AAA"!==o&&(o="AA"),"small"!==a&&"large"!==a&&(a="small"),s={level:o,size:a}).level+s.size){case"AAsmall":case"AAAlarge":l=c>=4.5;break;case"AAlarge":l=c>=3;break;case"AAAsmall":l=c>=7}return l},tg.mostReadable=function(e,n,r){var i,o,a,s,l=null,c=0;o=(r=r||{}).includeFallbackColors,a=r.level,s=r.size;for(var u=0;u<n.length;u++)(i=tg.readability(e,n[u]))>c&&(c=i,l=tg(n[u]));return tg.isReadable(e,l,{level:a,size:s})||!o?l:(r.includeFallbackColors=!1,tg.mostReadable(e,["#fff","#000"],r))};var tN=tg.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},tj=tg.hexNames=function(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}(tN);function tR(e){return(isNaN(e=parseFloat(e))||e<0||e>1)&&(e=1),e}function tL(e,n){"string"==typeof(r=e)&&-1!=r.indexOf(".")&&1===parseFloat(r)&&(e="100%");var r,i,o="string"==typeof(i=e)&&-1!=i.indexOf("%");return(e=Math.min(n,Math.max(0,parseFloat(e))),o&&(e=parseInt(e*n,10)/100),1e-6>Math.abs(e-n))?1:e%n/parseFloat(n)}function tI(e){return Math.min(1,Math.max(0,e))}function tz(e){return parseInt(e,16)}function tF(e){return 1==e.length?"0"+e:""+e}function tB(e){return e<=1&&(e=100*e+"%"),e}function tU(e){return Math.round(255*parseFloat(e)).toString(16)}var tV=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",r="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:RegExp("rgb"+n),rgba:RegExp("rgba"+r),hsl:RegExp("hsl"+n),hsla:RegExp("hsla"+r),hsv:RegExp("hsv"+n),hsva:RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function tH(e){return!!tV.CSS_UNIT.exec(e)}function tq(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function tG(e,n,r){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:r;throw TypeError("Private element is not present on this object")}function tK(e,n,r){return n=t1(n),function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw TypeError("Derived constructors may only return object or undefined");if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e,t3()?Reflect.construct(n,r||[],t1(e).constructor):n.apply(e,r))}function t$(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}function tY(e,n){return e.get(tG(e,n))}function tW(e,n,r){(function(e,n){if(n.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,n),n.set(e,r)}function tX(e,n,r){return e.set(tG(e,n),r),r}function tZ(e,n,r){if(t3())return Reflect.construct.apply(null,arguments);var i=[null];return i.push.apply(i,n),new(e.bind.apply(e,i))}function tJ(e,n,r){return n&&function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,t7(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function tQ(e,n,r){return(n=t7(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function t0(){return(t0="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,n,r){var i=function(e,n){for(;!({}).hasOwnProperty.call(e,n)&&null!==(e=t1(e)););return e}(e,n);if(i){var o=Object.getOwnPropertyDescriptor(i,n);return o.get?o.get.call(arguments.length<3?e:r):o.value}}).apply(null,arguments)}function t1(e){return(t1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function t2(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&t4(e,n)}function t3(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(t3=function(){return!!e})()}function t5(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function t4(e,n){return(t4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e})(e,n)}function t6(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n);else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||nt(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t8(e,n,r,i){var o=t0(t1(e.prototype),n,r);return"function"==typeof o?function(e){return o.apply(r,e)}:o}function t9(e){return function(e){if(Array.isArray(e))return tq(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||nt(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t7(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,n){if(e){if("string"==typeof e)return tq(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tq(e,n):void 0}}var nn=function(e){e instanceof Array?e.forEach(nn):(e.map&&e.map.dispose(),e.dispose())},nr=function(e){e.geometry&&e.geometry.dispose(),e.material&&nn(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(nr)},ni=function(e){for(;e.children.length;){var n=e.children[0];e.remove(n),nr(n)}},no=new WeakMap,na=new WeakMap,ns=function(e){function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.dataBindAttr,a=i.objBindAttr;return t$(this,n),tQ(r=tK(this,n),"scene",void 0),tW(r,no,void 0),tW(r,na,void 0),r.scene=e,tX(no,r,void 0===o?"__data":o),tX(na,r,void 0===a?"__threeObj":a),r.onRemoveObj(function(){}),r}return t2(n,e),tJ(n,[{key:"onCreateObj",value:function(e){var r=this;return t8(n,"onCreateObj",this)([function(n){var i=e(n);return n[tY(na,r)]=i,i[tY(no,r)]=n,r.scene.add(i),i}]),this}},{key:"onRemoveObj",value:function(e){var r=this;return t8(n,"onRemoveObj",this)([function(i,o){var a=t8(n,"getData",r)([i]);e(i,o),r.scene.remove(i),ni(i),delete a[tY(na,r)]}]),this}}])}(to),nl=function(e){return isNaN(e)?parseInt(tg(e).toHex(),16):e},nc=function(e){return isNaN(e)?tg(e).getAlpha():1},nu=th(td);function nh(e,n,r){n&&"string"==typeof r&&e.filter(function(e){return!e[r]}).forEach(function(e){e[r]=nu(n(e))})}var nd=window.THREE?window.THREE:{Group:m.YJl,Mesh:m.eaF,MeshLambertMaterial:m.G_z,Color:m.Q1f,BufferGeometry:m.LoY,BufferAttribute:m.THS,Matrix4:m.kn4,Vector3:m.Pq0,SphereGeometry:m.Gu$,CylinderGeometry:m.Ho_,TubeGeometry:m.j6,ConeGeometry:m.qFE,Line:m.N1A,LineBasicMaterial:m.mrM,QuadraticBezierCurve3:m.CV9,CubicBezierCurve3:m.s0K,Box3:m.NRn},nf={graph:ex,forcelayout:ek},np=new nd.BufferGeometry().setAttribute?"setAttribute":"addAttribute",nm=new nd.BufferGeometry().applyMatrix4?"applyMatrix4":"applyMatrix",ng=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=function(n){function i(){var n;t$(this,i);for(var o=arguments.length,a=Array(o),s=0;s<o;s++)a[s]=arguments[s];return(n=tK(this,i,[].concat(a))).__kapsuleInstance=tZ(e,[].concat(t9(r?[n]:[]),a)),n}return t2(i,n),tJ(i)}(n);return Object.keys(e()).forEach(function(e){return i.prototype[e]=function(){var n,r=(n=this.__kapsuleInstance)[e].apply(n,arguments);return r===this.__kapsuleInstance?this:r}}),i}(eQ({props:{jsonUrl:{onChange:function(e,n){var r=this;e&&!n.fetchingJson&&(n.fetchingJson=!0,n.onLoading(),fetch(e).then(function(e){return e.json()}).then(function(e){n.fetchingJson=!1,n.onFinishLoading(e),r.graphData(e)}))},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1}},numDimensions:{default:3,onChange:function(e,n){var r=n.d3ForceLayout.force("charge");function i(e,n){e.forEach(function(e){delete e[n],delete e["v".concat(n)]})}r&&r.strength(e>2?-60:-30),e<3&&i(n.graphData.nodes,"z"),e<2&&i(n.graphData.nodes,"y")}},dagMode:{onChange:function(e,n){e||"d3"!==n.forceEngine||(n.graphData.nodes||[]).forEach(function(e){return e.fx=e.fy=e.fz=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeVisibility:{default:!0},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},nodePositionUpdate:{triggerUpdate:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{},linkResolution:{default:6},linkCurvature:{default:0,triggerUpdate:!1},linkCurveRotation:{default:0,triggerUpdate:!1},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{triggerUpdate:!1},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.d3ForceLayout.velocityDecay(e)}},ngraphPhysics:{default:{timeStep:20,gravity:-1.2,theta:.8,springLength:30,springCoefficient:8e-4,dragCoefficient:.02}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onLoading:{default:function(){},triggerUpdate:!1},onFinishLoading:{default:function(){},triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1}},methods:{refresh:function(e){return e._flushObjects=!0,e._rerender(),this},d3Force:function(e,n,r){return void 0===r?e.d3ForceLayout.force(n):(e.d3ForceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.d3ForceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},tickFrame:function(e){var n,r,i,o,a,s,l,c,u,h="ngraph"!==e.forceEngine;return e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||h&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.layout[h?"tick":"step"](),e.onEngineTick()),n=e0(e.nodeThreeObjectExtend),e.nodeDataMapper.entries().forEach(function(r){var i=t6(r,2),o=i[0],a=i[1];if(a){var s=h?o:e.layout.getNodePosition(o[e.nodeId]),l=n(o);e.nodePositionUpdate&&e.nodePositionUpdate(l?a.children[0]:a,{x:s.x,y:s.y,z:s.z},o)&&!l||(a.position.x=s.x,a.position.y=s.y||0,a.position.z=s.z||0)}}),r=e0(e.linkWidth),i=e0(e.linkCurvature),o=e0(e.linkCurveRotation),a=e0(e.linkThreeObjectExtend),e.linkDataMapper.entries().forEach(function(n){var s=t6(n,2),l=s[0],c=s[1];if(c){var u=h?l:e.layout.getLinkPosition(e.layout.graph.getLink(l.source,l.target).id),d=u[h?"source":"from"],f=u[h?"target":"to"];if(d&&f&&d.hasOwnProperty("x")&&f.hasOwnProperty("x")){!function(n){var r=h?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),a=r[h?"source":"from"],s=r[h?"target":"to"];if(a&&s&&a.hasOwnProperty("x")&&s.hasOwnProperty("x")){var l=i(n);if(l){var c,u=new nd.Vector3(a.x,a.y||0,a.z||0),d=new nd.Vector3(s.x,s.y||0,s.z||0),f=u.distanceTo(d),p=o(n);if(f>0){var m=s.x-a.x,g=s.y-a.y||0,y=new nd.Vector3().subVectors(d,u),v=y.clone().multiplyScalar(l).cross(0!==m||0!==g?new nd.Vector3(0,0,1):new nd.Vector3(0,1,0)).applyAxisAngle(y.normalize(),p).add(new nd.Vector3().addVectors(u,d).divideScalar(2));c=new nd.QuadraticBezierCurve3(u,v,d)}else{var b=70*l,_=-p,w=_+Math.PI/2;c=new nd.CubicBezierCurve3(u,new nd.Vector3(b*Math.cos(w),b*Math.sin(w),0).add(u),new nd.Vector3(b*Math.cos(_),b*Math.sin(_),0).add(u),d)}n.__curve=c}else n.__curve=null}}(l);var p=a(l);if(!(e.linkPositionUpdate&&e.linkPositionUpdate(p?c.children[1]:c,{start:{x:d.x,y:d.y,z:d.z},end:{x:f.x,y:f.y,z:f.z}},l))||p){var m=l.__curve,g=c.children.length?c.children[0]:c;if("Line"===g.type){if(m){var y=m.getPoints(30);g.geometry.getAttribute("position").array.length!==3*y.length&&g.geometry[np]("position",new nd.BufferAttribute(new Float32Array(3*y.length),3)),g.geometry.setFromPoints(y)}else{var v=g.geometry.getAttribute("position");v&&v.array&&6===v.array.length||g.geometry[np]("position",v=new nd.BufferAttribute(new Float32Array(6),3)),v.array[0]=d.x,v.array[1]=d.y||0,v.array[2]=d.z||0,v.array[3]=f.x,v.array[4]=f.y||0,v.array[5]=f.z||0,v.needsUpdate=!0}g.geometry.computeBoundingSphere()}else if("Mesh"===g.type)if(m){g.geometry.type.match(/^Tube(Buffer)?Geometry$/)||(g.position.set(0,0,0),g.rotation.set(0,0,0),g.scale.set(1,1,1));var b=Math.ceil(10*r(l))/10,_=new nd.TubeGeometry(m,30,b/2,e.linkResolution,!1);g.geometry.dispose(),g.geometry=_}else{if(!g.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)){var w=Math.ceil(10*r(l))/10/2,x=new nd.CylinderGeometry(w,w,1,e.linkResolution,1,!1);x[nm](new nd.Matrix4().makeTranslation(0,.5,0)),x[nm](new nd.Matrix4().makeRotationX(Math.PI/2)),g.geometry.dispose(),g.geometry=x}var k=new nd.Vector3(d.x,d.y||0,d.z||0),E=new nd.Vector3(f.x,f.y||0,f.z||0),A=k.distanceTo(E);g.position.x=k.x,g.position.y=k.y,g.position.z=k.z,g.scale.z=A,g.parent.localToWorld(E),g.lookAt(E)}}}}})),s=e0(e.linkDirectionalArrowRelPos),l=e0(e.linkDirectionalArrowLength),c=e0(e.nodeVal),e.arrowDataMapper.entries().forEach(function(n){var r=t6(n,2),i=r[0],o=r[1];if(o){var a=h?i:e.layout.getLinkPosition(e.layout.graph.getLink(i.source,i.target).id),u=a[h?"source":"from"],d=a[h?"target":"to"];if(u&&d&&u.hasOwnProperty("x")&&d.hasOwnProperty("x")){var f=Math.cbrt(Math.max(0,c(u)||1))*e.nodeRelSize,p=Math.cbrt(Math.max(0,c(d)||1))*e.nodeRelSize,m=l(i),g=s(i),y=i.__curve?function(e){return i.__curve.getPoint(e)}:function(e){var n=function(e,n,r,i){return n[e]+(r[e]-n[e])*i||0};return{x:n("x",u,d,e),y:n("y",u,d,e),z:n("z",u,d,e)}},v=i.__curve?i.__curve.getLength():Math.sqrt(["x","y","z"].map(function(e){return Math.pow((d[e]||0)-(u[e]||0),2)}).reduce(function(e,n){return e+n},0)),b=f+m+(v-f-p-m)*g,_=y(b/v),w=y((b-m)/v);["x","y","z"].forEach(function(e){return o.position[e]=w[e]});var x=tZ(nd.Vector3,t9(["x","y","z"].map(function(e){return _[e]})));o.parent.localToWorld(x),o.lookAt(x)}}}),u=e0(e.linkDirectionalParticleSpeed),e.graphData.links.forEach(function(n){var r=e.particlesDataMapper.getObj(n),i=r&&r.children,o=n.__singleHopPhotonsObj&&n.__singleHopPhotonsObj.children;if(o&&o.length||i&&i.length){var a=h?n:e.layout.getLinkPosition(e.layout.graph.getLink(n.source,n.target).id),s=a[h?"source":"from"],l=a[h?"target":"to"];if(s&&l&&s.hasOwnProperty("x")&&l.hasOwnProperty("x")){var c=u(n),d=n.__curve?function(e){return n.__curve.getPoint(e)}:function(e){var n=function(e,n,r,i){return n[e]+(r[e]-n[e])*i||0};return{x:n("x",s,l,e),y:n("y",s,l,e),z:n("z",s,l,e)}};[].concat(t9(i||[]),t9(o||[])).forEach(function(e,n){var r="singleHopPhotons"===e.parent.__linkThreeObjType;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=r?0:n/i.length),e.__progressRatio+=c,e.__progressRatio>=1)if(r){e.parent.remove(e),ni(e);return}else e.__progressRatio=e.__progressRatio%1;var o=d(e.__progressRatio);["x","y","z"].forEach(function(n){return e.position[n]=o[n]})})}}}),this},emitParticle:function(e,n){if(n&&e.graphData.links.includes(n)){if(!n.__singleHopPhotonsObj){var r=new nd.Group;r.__linkThreeObjType="singleHopPhotons",n.__singleHopPhotonsObj=r,e.graphScene.add(r)}var i=Math.ceil(10*e0(e.linkDirectionalParticleWidth)(n))/10/2,o=e.linkDirectionalParticleResolution,a=new nd.SphereGeometry(i,o,o),s=e0(e.linkColor),l=e0(e.linkDirectionalParticleColor)(n)||s(n)||"#f0f0f0",c=new nd.Color(nl(l)),u=3*e.linkOpacity,h=new nd.MeshLambertMaterial({color:c,transparent:!0,opacity:u});n.__singleHopPhotonsObj.add(new nd.Mesh(a,h))}return this},getGraphBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0};if(!e.initialised)return null;var r=function e(r){var i=[];if(r.geometry){r.geometry.computeBoundingBox();var o=new nd.Box3;o.copy(r.geometry.boundingBox).applyMatrix4(r.matrixWorld),i.push(o)}return i.concat.apply(i,t9((r.children||[]).filter(function(e){return!e.hasOwnProperty("__graphObjType")||"node"===e.__graphObjType&&n(e.__data)}).map(e)))}(e.graphScene);return r.length?Object.assign.apply(Object,t9(["x","y","z"].map(function(e){return tQ({},e,[e1(r,function(n){return n.min[e]}),e2(r,function(n){return n.max[e]})])}))):null}},stateInit:function(){return{d3ForceLayout:V().force("link",$()).force("charge",eb()).force("center",e_()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.graphScene=e,n.nodeDataMapper=new ns(e,{objBindAttr:"__threeObj"}),n.linkDataMapper=new ns(e,{objBindAttr:"__lineObj"}),n.arrowDataMapper=new ns(e,{objBindAttr:"__arrowObj"}),n.particlesDataMapper=new ns(e,{objBindAttr:"__photonsObj"})},update:function(e,n){var r=function(e){return e.some(function(e){return n.hasOwnProperty(e)})};if(e.engineRunning=!1,"function"==typeof e.onUpdate&&e.onUpdate(),null!==e.nodeAutoColorBy&&r(["nodeAutoColorBy","graphData","nodeColor"])&&nh(e.graphData.nodes,e0(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&r(["linkAutoColorBy","graphData","linkColor"])&&nh(e.graphData.links,e0(e.linkAutoColorBy),e.linkColor),e._flushObjects||r(["graphData","nodeThreeObject","nodeThreeObjectExtend","nodeVal","nodeColor","nodeVisibility","nodeRelSize","nodeResolution","nodeOpacity"])){var i=e0(e.nodeThreeObject),o=e0(e.nodeThreeObjectExtend),a=e0(e.nodeVal),s=e0(e.nodeColor),l=e0(e.nodeVisibility),c={},u={};(e._flushObjects||r(["nodeThreeObject","nodeThreeObjectExtend"]))&&e.nodeDataMapper.clear(),e.nodeDataMapper.onCreateObj(function(n){var r,a=i(n),s=o(n);return a&&e.nodeThreeObject===a&&(a=a.clone()),a&&!s?r=a:((r=new nd.Mesh).__graphDefaultObj=!0,a&&s&&r.add(a)),r.__graphObjType="node",r}).onUpdateObj(function(n,r){if(n.__graphDefaultObj){var i=a(r)||1,o=Math.cbrt(i)*e.nodeRelSize,l=e.nodeResolution;n.geometry.type.match(/^Sphere(Buffer)?Geometry$/)&&n.geometry.parameters.radius===o&&n.geometry.parameters.widthSegments===l||(c.hasOwnProperty(i)||(c[i]=new nd.SphereGeometry(o,l,l)),n.geometry.dispose(),n.geometry=c[i]);var h=s(r),d=new nd.Color(nl(h||"#ffffaa")),f=e.nodeOpacity*nc(h);"MeshLambertMaterial"===n.material.type&&n.material.color.equals(d)&&n.material.opacity===f||(u.hasOwnProperty(h)||(u[h]=new nd.MeshLambertMaterial({color:d,transparent:!0,opacity:f})),n.material.dispose(),n.material=u[h])}}).digest(e.graphData.nodes.filter(l))}if(e._flushObjects||r(["graphData","linkThreeObject","linkThreeObjectExtend","linkMaterial","linkColor","linkWidth","linkVisibility","linkResolution","linkOpacity","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution"])){var h=e0(e.linkThreeObject),d=e0(e.linkThreeObjectExtend),f=e0(e.linkMaterial),p=e0(e.linkVisibility),m=e0(e.linkColor),g=e0(e.linkWidth),y={},v={},b={},_=e.graphData.links.filter(p);if((e._flushObjects||r(["linkThreeObject","linkThreeObjectExtend","linkWidth"]))&&e.linkDataMapper.clear(),e.linkDataMapper.onRemoveObj(function(e){var n=e.__data&&e.__data.__singleHopPhotonsObj;n&&(n.parent.remove(n),ni(n),delete e.__data.__singleHopPhotonsObj)}).onCreateObj(function(n){var r,i,o=h(n),a=d(n);if(o&&e.linkThreeObject===o&&(o=o.clone()),!o||a)if(g(n))r=new nd.Mesh;else{var s=new nd.BufferGeometry;s[np]("position",new nd.BufferAttribute(new Float32Array(6),3)),r=new nd.Line(s)}return o?a?((i=new nd.Group).__graphDefaultObj=!0,i.add(r),i.add(o)):i=o:(i=r).__graphDefaultObj=!0,i.renderOrder=10,i.__graphObjType="link",i}).onUpdateObj(function(n,r){if(n.__graphDefaultObj){var i=n.children.length?n.children[0]:n,o=Math.ceil(10*g(r))/10,a=!!o;if(a){var s=o/2,l=e.linkResolution;if(!i.geometry.type.match(/^Cylinder(Buffer)?Geometry$/)||i.geometry.parameters.radiusTop!==s||i.geometry.parameters.radialSegments!==l){if(!y.hasOwnProperty(o)){var c=new nd.CylinderGeometry(s,s,1,l,1,!1);c[nm](new nd.Matrix4().makeTranslation(0,.5,0)),c[nm](new nd.Matrix4().makeRotationX(Math.PI/2)),y[o]=c}i.geometry.dispose(),i.geometry=y[o]}}var u=f(r);if(u)i.material=u;else{var h=m(r),d=new nd.Color(nl(h||"#f0f0f0")),p=e.linkOpacity*nc(h),_=a?"MeshLambertMaterial":"LineBasicMaterial";if(i.material.type!==_||!i.material.color.equals(d)||i.material.opacity!==p){var w=a?v:b;w.hasOwnProperty(h)||(w[h]=new nd[_]({color:d,transparent:p<1,opacity:p,depthWrite:p>=1})),i.material.dispose(),i.material=w[h]}}}}).digest(_),e.linkDirectionalArrowLength||n.hasOwnProperty("linkDirectionalArrowLength")){var w=e0(e.linkDirectionalArrowLength),x=e0(e.linkDirectionalArrowColor);e.arrowDataMapper.onCreateObj(function(){var e=new nd.Mesh(void 0,new nd.MeshLambertMaterial({transparent:!0}));return e.__linkThreeObjType="arrow",e}).onUpdateObj(function(n,r){var i=w(r),o=e.linkDirectionalArrowResolution;if(!n.geometry.type.match(/^Cone(Buffer)?Geometry$/)||n.geometry.parameters.height!==i||n.geometry.parameters.radialSegments!==o){var a=new nd.ConeGeometry(.25*i,i,o);a.translate(0,i/2,0),a.rotateX(Math.PI/2),n.geometry.dispose(),n.geometry=a}var s=x(r)||m(r)||"#f0f0f0";n.material.color=new nd.Color(nl(s)),n.material.opacity=3*e.linkOpacity*nc(s)}).digest(_.filter(w))}if(e.linkDirectionalParticles||n.hasOwnProperty("linkDirectionalParticles")){var k=e0(e.linkDirectionalParticles),E=e0(e.linkDirectionalParticleWidth),A=e0(e.linkDirectionalParticleColor),O={},T={};e.particlesDataMapper.onCreateObj(function(){var e=new nd.Group;return e.__linkThreeObjType="photons",e.__photonDataMapper=new ns(e),e}).onUpdateObj(function(n,r){var i,o,a=Math.round(Math.abs(k(r))),s=!!n.children.length&&n.children[0],l=Math.ceil(10*E(r))/10/2,c=e.linkDirectionalParticleResolution;s&&s.geometry.parameters.radius===l&&s.geometry.parameters.widthSegments===c?i=s.geometry:(T.hasOwnProperty(l)||(T[l]=new nd.SphereGeometry(l,c,c)),i=T[l],s&&s.geometry.dispose());var u=A(r)||m(r)||"#f0f0f0",h=new nd.Color(nl(u)),d=3*e.linkOpacity;s&&s.material.color.equals(h)&&s.material.opacity===d?o=s.material:(O.hasOwnProperty(u)||(O[u]=new nd.MeshLambertMaterial({color:h,transparent:!0,opacity:d})),o=O[u],s&&s.material.dispose()),n.__photonDataMapper.id(function(e){return e.idx}).onCreateObj(function(){return new nd.Mesh(i,o)}).onUpdateObj(function(e){e.geometry=i,e.material=o}).digest(t9(Array(a)).map(function(e,n){return{idx:n}}))}).digest(_.filter(k))}}if(e._flushObjects=!1,r(["graphData","nodeId","linkSource","linkTarget","numDimensions","forceEngine","dagMode","dagNodeFilter","dagLevelDistance"])){e.engineRunning=!1,e.graphData.links.forEach(function(n){n.source=n[e.linkSource],n.target=n[e.linkTarget]});var C,P="ngraph"!==e.forceEngine;if(P){(C=e.d3ForceLayout).stop().alpha(1).numDimensions(e.numDimensions).nodes(e.graphData.nodes);var M=e.d3ForceLayout.force("link");M&&M.id(function(n){return n[e.nodeId]}).links(e.graphData.links);var S=e.dagMode&&function(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.nodeFilter,s=void 0===a?function(){return!0}:a,l=o.onLoopError,c=void 0===l?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:l,u={};r.forEach(function(e){return u[n(e)]={data:e,out:[],depth:-1,skip:!s(e)}}),i.forEach(function(e){var r=e.source,i=e.target,o=c(r),a=c(i);if(!u.hasOwnProperty(o))throw"Missing source node with id: ".concat(o);if(!u.hasOwnProperty(a))throw"Missing target node with id: ".concat(a);var s=u[o],l=u[a];function c(e){return"object"===ne(e)?n(e):e}s.out.push(l)});var h=[];return function e(r){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0,s=r.length;a<s;a++)if(function(){var s=r[a];if(-1!==i.indexOf(s)){var l=[].concat(t9(i.slice(i.indexOf(s))),[s]).map(function(e){return n(e.data)});return h.some(function(e){return e.length===l.length&&e.every(function(e,n){return e===l[n]})})||(h.push(l),c(l)),1}o>s.depth&&(s.depth=o,e(s.out,[].concat(t9(i),[s]),o+ +!s.skip))}())continue}(Object.values(u)),Object.assign.apply(Object,[{}].concat(t9(Object.entries(u).filter(function(e){return!t6(e,2)[1].skip}).map(function(e){var n=t6(e,2);return tQ({},n[0],n[1].depth)}))))}(e.graphData,function(n){return n[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),D=Math.max.apply(Math,t9(Object.values(S||[]))),N=e.dagLevelDistance||e.graphData.nodes.length/(D||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(["lr","rl","td","bu","zin","zout"].includes(n.dagMode)){var j=["lr","rl"].includes(n.dagMode)?"fx":["td","bu"].includes(n.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(e){return delete e[j]})}if(["lr","rl","td","bu","zin","zout"].includes(e.dagMode)){var R=["rl","td","zout"].includes(e.dagMode),L=["lr","rl"].includes(e.dagMode)?"fx":["td","bu"].includes(e.dagMode)?"fy":"fz";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(n){return n[L]=(S[n[e.nodeId]]-D/2)*N*(R?-1:1)})}e.d3ForceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?ew(function(n){var r=S[n[e.nodeId]]||-1;return("radialin"===e.dagMode?D-r:r)*N}).strength(function(n){return+!!e.dagNodeFilter(n)}):null)}else{var I=nf.graph();e.graphData.nodes.forEach(function(n){I.addNode(n[e.nodeId])}),e.graphData.links.forEach(function(e){I.addLink(e.source,e.target)}),(C=nf.forcelayout(I,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t5(Object(r),!0).forEach(function(n){tQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t5(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}({dimensions:e.numDimensions},e.ngraphPhysics))).graph=I}for(var z=0;z<e.warmupTicks&&!(P&&e.d3AlphaMin>0&&e.d3ForceLayout.alpha()<e.d3AlphaMin);z++)C[P?"tick":"step"]();e.layout=C,this.resetCountdown()}e.engineRunning=!0,e.onFinishUpdate()}}),(window.THREE?window.THREE:{Group:m.YJl}).Group,!0);if("undefined"==typeof AFRAME)throw Error("Component attempted to register before AFRAME was available.");var ny=function(e){return"string"==typeof e?JSON.parse(e):e},nv=function e(e){if("function"==typeof e)return e;var n=eval;try{return n("("+e+")")}catch(e){}return null},nb=function(e){return isNaN(parseFloat(e))?nv(e)?nv(e):e:parseFloat(e)};AFRAME.components.hasOwnProperty("forcegraph")||AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string",default:""},nodes:{parse:ny,default:[]},links:{parse:ny,default:[]},numDimensions:{type:"number",default:3},dagMode:{type:"string",default:""},dagLevelDistance:{type:"number",default:0},dagNodeFilter:{parse:nv,default:function(){return!0}},onDagError:{parse:nv,default:void 0},nodeRelSize:{type:"number",default:4},nodeId:{type:"string",default:"id"},nodeVal:{parse:nb,default:"val"},nodeResolution:{type:"number",default:8},nodeVisibility:{parse:nb,default:!0},nodeColor:{parse:nb,default:"color"},nodeAutoColorBy:{parse:nb,default:""},nodeOpacity:{type:"number",default:.75},nodeThreeObject:{parse:nb,default:null},nodeThreeObjectExtend:{parse:nb,default:!1},linkSource:{type:"string",default:"source"},linkTarget:{type:"string",default:"target"},linkVisibility:{parse:nb,default:!0},linkColor:{parse:nb,default:"color"},linkAutoColorBy:{parse:nb,default:""},linkOpacity:{type:"number",default:.2},linkWidth:{parse:nb,default:0},linkResolution:{type:"number",default:6},linkCurvature:{parse:nb,default:0},linkCurveRotation:{parse:nb,default:0},linkMaterial:{parse:nb,default:null},linkThreeObject:{parse:nb,default:null},linkThreeObjectExtend:{parse:nb,default:!1},linkPositionUpdate:{parse:nv,default:null},linkDirectionalArrowLength:{parse:nb,default:0},linkDirectionalArrowColor:{parse:nb,default:null},linkDirectionalArrowRelPos:{parse:nb,default:.5},linkDirectionalArrowResolution:{type:"number",default:8},linkDirectionalParticles:{parse:nb,default:0},linkDirectionalParticleSpeed:{parse:nb,default:.01},linkDirectionalParticleWidth:{parse:nb,default:.5},linkDirectionalParticleColor:{parse:nb,default:null},linkDirectionalParticleResolution:{type:"number",default:4},onNodeHover:{parse:nv,default:function(){}},onLinkHover:{parse:nv,default:function(){}},onNodeClick:{parse:nv,default:function(){}},onLinkClick:{parse:nv,default:function(){}},forceEngine:{type:"string",default:"d3"},d3AlphaMin:{type:"number",default:0},d3AlphaDecay:{type:"number",default:.0228},d3VelocityDecay:{type:"number",default:.4},ngraphPhysics:{parse:ny,default:null},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1e18},cooldownTime:{type:"int",default:15e3},onEngineTick:{parse:nv,default:function(){}},onEngineStop:{parse:nv,default:function(){}}},getGraphBbox:function(e){return this.forceGraph||(this.forceGraph=new ng),this.forceGraph.getGraphBbox(e)},emitParticle:function(){this.forceGraph||(this.forceGraph=new ng);var e=this.forceGraph,n=e.emitParticle.apply(e,arguments);return n===e?this:n},d3Force:function(){this.forceGraph||(this.forceGraph=new ng);var e=this.forceGraph,n=e.d3Force.apply(e,arguments);return n===e?this:n},d3ReheatSimulation:function(){return this.forceGraph&&this.forceGraph.d3ReheatSimulation(),this},refresh:function(){return this.forceGraph&&this.forceGraph.refresh(),this},init:function(){var e=this,n=this.state={};n.infoEl=document.createElement("a-text"),n.infoEl.setAttribute("position","0 -0.1 -1"),n.infoEl.setAttribute("width",1),n.infoEl.setAttribute("align","center"),n.infoEl.setAttribute("color","lavender");var r=document.querySelector("a-entity[camera], a-camera");r.appendChild(n.infoEl),n.cameraObj=r.object3D.children.filter(function(e){return"PerspectiveCamera"===e.type})[0],this.el.sceneEl.addEventListener("camera-set-active",function(e){n.cameraObj=e.detail.cameraEl.components.camera.camera}),this.forceGraph||(this.forceGraph=new ng),this.forceGraph.onFinishUpdate(function(){return e.el.setObject3D("forcegraphGroup",e.forceGraph)}).onLoading(function(){return n.infoEl.setAttribute("value","Loading...")}).onFinishLoading(function(){return n.infoEl.setAttribute("value","")}),this.el.addEventListener("raycaster-intersected",function(e){return n.hoverDetail=e.detail}),this.el.addEventListener("raycaster-intersected-cleared",function(e){return n.hoverDetail=e.detail}),this.el.addEventListener("click",function(){return n.hoverObj&&e.data["on"+("node"===n.hoverObj.__graphObjType?"Node":"Link")+"Click"](n.hoverObj.__data)})},remove:function(){this.state.infoEl.remove(),this.el.removeObject3D("forcegraphGroup")},update:function(e){var n=this,r=this.data,i=AFRAME.utils.diff(r,e);["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].filter(function(e){return e in i}).forEach(function(e){n.forceGraph[e](""!==r[e]?r[e]:null)}),("nodes"in i||"links"in i)&&n.forceGraph.graphData({nodes:r.nodes,links:r.links})},tick:function(e,n){for(var r=this.state,i=this.data,o=r.hoverDetail?r.hoverDetail.getIntersection?r.hoverDetail.getIntersection(this.el):r.hoverDetail.intersection||void 0:void 0,a=o?o.object:void 0;a&&!a.hasOwnProperty("__graphObjType");)a=a.parent;if(a!==r.hoverObj){var s=r.hoverObj?r.hoverObj.__graphObjType:null,l=r.hoverObj?r.hoverObj.__data:null,c=a?a.__graphObjType:null,u=a?a.__data:null;s&&s!==c&&i["on"+("node"===s?"Node":"Link")+"Hover"](null,l),c&&i["on"+("node"===c?"Node":"Link")+"Hover"](u,s===c?l:null),r.hoverObj=a}this.forceGraph.tickFrame()}});var n_=r(44501),nw=r(1584),nx=r(66702);function nk(e){return(nk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var nE=r(74767);function nA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(nA=function(){return!!e})()}function nO(e){var n="function"==typeof Map?new Map:void 0;return(nO=function(e){if(null===e||!function(e){try{return -1!==Function.toString.call(e).indexOf("[native code]")}catch(n){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return function(e,n,r){if(nA())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var o=new(e.bind.apply(e,i));return r&&(0,nE.A)(o,r.prototype),o}(e,arguments,nk(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),(0,nE.A)(r,e)})(e)}var nT=function(e){function n(n){var r;return r=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+n+" for more information.")||this,(0,nw.A)(r)}return(0,nx.A)(n,e),n}(nO(Error));function nC(e,n){return e.substr(-n.length)===n}var nP=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function nM(e){return"string"!=typeof e?e:e.match(nP)?parseFloat(e):e}var nS=function(e){return function(n,r){void 0===r&&(r="16px");var i=n,o=r;if("string"==typeof n){if(!nC(n,"px"))throw new nT(69,e,n);i=nM(n)}if("string"==typeof r){if(!nC(r,"px"))throw new nT(70,e,r);o=nM(r)}if("string"==typeof i)throw new nT(71,n,e);if("string"==typeof o)throw new nT(72,r,e);return""+i/o+e}};nS("em");var nD=/^([+-]?(?:\d+|\d*\.\d+))([a-z]*|%)$/;function nN(e){if("string"!=typeof e)return[e,""];var n=e.match(nD);return n?[parseFloat(e),n[2]]:[e,void 0]}nS("rem");var nj={woff:"woff",woff2:"woff2",ttf:"truetype",otf:"opentype",eot:"embedded-opentype",svg:"svg",svgz:"svg"};function nR(e){return Math.round(255*e)}function nL(e,n,r){return nR(e)+","+nR(n)+","+nR(r)}function nI(e,n,r,i){if(void 0===i&&(i=nL),0===n)return i(r,r,r);var o=(e%360+360)%360/60,a=(1-Math.abs(2*r-1))*n,s=a*(1-Math.abs(o%2-1)),l=0,c=0,u=0;o>=0&&o<1?(l=a,c=s):o>=1&&o<2?(l=s,c=a):o>=2&&o<3?(c=a,u=s):o>=3&&o<4?(c=s,u=a):o>=4&&o<5?(l=s,u=a):o>=5&&o<6&&(l=a,u=s);var h=r-a/2;return i(l+h,c+h,u+h)}var nz={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},nF=/^#[a-fA-F0-9]{6}$/,nB=/^#[a-fA-F0-9]{8}$/,nU=/^#[a-fA-F0-9]{3}$/,nV=/^#[a-fA-F0-9]{4}$/,nH=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,nq=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,nG=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,nK=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;function n$(e){if("string"!=typeof e)throw new nT(3);var n=function(e){if("string"!=typeof e)return e;var n=e.toLowerCase();return nz[n]?"#"+nz[n]:e}(e);if(n.match(nF))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(nB)){var r=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:r}}if(n.match(nU))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(nV)){var i=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:i}}var o=nH.exec(n);if(o)return{red:parseInt(""+o[1],10),green:parseInt(""+o[2],10),blue:parseInt(""+o[3],10)};var a=nq.exec(n.substring(0,50));if(a)return{red:parseInt(""+a[1],10),green:parseInt(""+a[2],10),blue:parseInt(""+a[3],10),alpha:parseFloat(""+a[4])>1?parseFloat(""+a[4])/100:parseFloat(""+a[4])};var s=nG.exec(n);if(s){var l="rgb("+nI(parseInt(""+s[1],10),parseInt(""+s[2],10)/100,parseInt(""+s[3],10)/100)+")",c=nH.exec(l);if(!c)throw new nT(4,n,l);return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10)}}var u=nK.exec(n.substring(0,50));if(u){var h="rgb("+nI(parseInt(""+u[1],10),parseInt(""+u[2],10)/100,parseInt(""+u[3],10)/100)+")",d=nH.exec(h);if(!d)throw new nT(4,n,h);return{red:parseInt(""+d[1],10),green:parseInt(""+d[2],10),blue:parseInt(""+d[3],10),alpha:parseFloat(""+u[4])>1?parseFloat(""+u[4])/100:parseFloat(""+u[4])}}throw new nT(5)}function nY(e){return function(e){var n,r=e.red/255,i=e.green/255,o=e.blue/255,a=Math.max(r,i,o),s=Math.min(r,i,o),l=(a+s)/2;if(a===s)if(void 0!==e.alpha)return{hue:0,saturation:0,lightness:l,alpha:e.alpha};else return{hue:0,saturation:0,lightness:l};var c=a-s,u=l>.5?c/(2-a-s):c/(a+s);switch(a){case r:n=(i-o)/c+6*(i<o);break;case i:n=(o-r)/c+2;break;default:n=(r-i)/c+4}return(n*=60,void 0!==e.alpha)?{hue:n,saturation:u,lightness:l,alpha:e.alpha}:{hue:n,saturation:u,lightness:l}}(n$(e))}var nW=function(e){return 7===e.length&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e};function nX(e){var n=e.toString(16);return 1===n.length?"0"+n:n}function nZ(e){return nX(Math.round(255*e))}function nJ(e,n,r){return nW("#"+nZ(e)+nZ(n)+nZ(r))}function nQ(e,n,r){if("number"==typeof e&&"number"==typeof n&&"number"==typeof r)return nW("#"+nX(e)+nX(n)+nX(r));if("object"==typeof e&&void 0===n&&void 0===r)return nW("#"+nX(e.red)+nX(e.green)+nX(e.blue));throw new nT(6)}function n0(e,n,r,i){if("string"==typeof e&&"number"==typeof n){var o=n$(e);return"rgba("+o.red+","+o.green+","+o.blue+","+n+")"}if("number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i)return i>=1?nQ(e,n,r):"rgba("+e+","+n+","+r+","+i+")";if("object"==typeof e&&void 0===n&&void 0===r&&void 0===i)return e.alpha>=1?nQ(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new nT(7)}function n1(e){if("object"!=typeof e)throw new nT(8);if("number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&"number"==typeof e.alpha)return n0(e);if("number"==typeof e.red&&"number"==typeof e.green&&"number"==typeof e.blue&&("number"!=typeof e.alpha||void 0===e.alpha))return nQ(e);if("number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&"number"==typeof e.alpha)return function(e,n,r,i){"number"==typeof e&&!1;if("object"==typeof e&&void 0===n&&void 0===r&&void 0===i){var o;return e.alpha>=1?(o=e.hue,nI(o,e.saturation,e.lightness,nJ)):"rgba("+nI(e.hue,e.saturation,e.lightness)+","+e.alpha+")"}throw new nT(2)}(e);if("number"==typeof e.hue&&"number"==typeof e.saturation&&"number"==typeof e.lightness&&("number"!=typeof e.alpha||void 0===e.alpha))return function(e,n,r){"number"==typeof e&&!1;if("object"==typeof e&&void 0===n&&void 0===r){var i;return i=e.hue,nI(i,e.saturation,e.lightness,nJ)}throw new nT(1)}(e);throw new nT(8)}function n2(e){return function e(n,r,i){return function(){var o=i.concat(Array.prototype.slice.call(arguments));return o.length>=r?n.apply(this,o):e(n,r,o)}}(e,e.length,[])}function n3(e,n,r){return Math.max(e,Math.min(n,r))}function n5(e){if("transparent"===e)return 0;var n=n$(e),r=Object.keys(n).map(function(e){var r=n[e]/255;return r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)});return parseFloat((.2126*r[0]+.7152*r[1]+.0722*r[2]).toFixed(3))}n2(function(e,n){if("transparent"===n)return n;var r=nY(n);return n1((0,n_.A)({},r,{hue:r.hue+parseFloat(e)}))}),n2(function(e,n){if("transparent"===n)return n;var r=nY(n);return n1((0,n_.A)({},r,{lightness:n3(0,1,r.lightness-parseFloat(e))}))}),n2(function(e,n){if("transparent"===n)return n;var r=nY(n);return n1((0,n_.A)({},r,{saturation:n3(0,1,r.saturation-parseFloat(e))}))});n2(function(e,n){if("transparent"===n)return n;var r=nY(n);return n1((0,n_.A)({},r,{lightness:n3(0,1,r.lightness+parseFloat(e))}))});var n4=n2(function(e,n,r){if("transparent"===n)return r;if("transparent"===r)return n;if(0===e)return r;var i=n$(n),o=(0,n_.A)({},i,{alpha:"number"==typeof i.alpha?i.alpha:1}),a=n$(r),s=(0,n_.A)({},a,{alpha:"number"==typeof a.alpha?a.alpha:1}),l=o.alpha-s.alpha,c=2*parseFloat(e)-1,u=((c*l==-1?c:c+l)/(1+c*l)+1)/2,h=1-u;return n0({red:Math.floor(o.red*u+s.red*h),green:Math.floor(o.green*u+s.green*h),blue:Math.floor(o.blue*u+s.blue*h),alpha:o.alpha*parseFloat(e)+s.alpha*(1-parseFloat(e))})}),n6=n2(function(e,n){if("transparent"===n)return n;var r=n$(n),i="number"==typeof r.alpha?r.alpha:1;return n0((0,n_.A)({},r,{alpha:n3(0,1,(100*i+100*parseFloat(e))/100)}))});n2(function(e,n){if("transparent"===n)return n;var r=nY(n);return n1((0,n_.A)({},r,{saturation:n3(0,1,r.saturation+parseFloat(e))}))}),n2(function(e,n){return"transparent"===n?n:n1((0,n_.A)({},nY(n),{hue:parseFloat(e)}))}),n2(function(e,n){return"transparent"===n?n:n1((0,n_.A)({},nY(n),{lightness:parseFloat(e)}))}),n2(function(e,n){return"transparent"===n?n:n1((0,n_.A)({},nY(n),{saturation:parseFloat(e)}))}),n2(function(e,n){return"transparent"===n?n:n4(parseFloat(e),"rgb(0, 0, 0)",n)}),n2(function(e,n){return"transparent"===n?n:n4(parseFloat(e),"rgb(255, 255, 255)",n)}),n2(function(e,n){if("transparent"===n)return n;var r=n$(n),i="number"==typeof r.alpha?r.alpha:1;return n0((0,n_.A)({},r,{alpha:n3(0,1,(100*i-100*parseFloat(e)).toFixed(2)/100)}))});function n8(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function n9(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:i+"")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function n7(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function re(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?n7(Object(r),!0).forEach(function(n){n9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n7(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n);else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||rr(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e){return function(e){if(Array.isArray(e))return n8(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rr(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(e,n){if(e){if("string"==typeof e)return n8(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n8(e,n):void 0}}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".graph-nav-info {\n  position: absolute;\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n  font-family: Sans-serif;\n  z-index: 1000;\n}");var ri=eQ({props:{width:{default:window.innerWidth,triggerUpdate:!1,onChange:function(e,n){n.container&&(n.container.style.width="".concat(e,"px"))}},height:{default:window.innerHeight,triggerUpdate:!1,onChange:function(e,n){n.container&&(n.container.style.height="".concat(e,"px"))}},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},backgroundColor:{default:"#002"},showNavInfo:{default:!0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeLabel:{default:"name"},nodeDesc:{default:"desc"},onNodeHover:{},onNodeClick:{},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkLabel:{default:"name"},linkDesc:{default:"desc"},onLinkHover:{},onLinkClick:{},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:re(re({},Object.assign.apply(Object,[{}].concat(rn(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(e){return n9({},e,function(n){for(var r=n.forcegraph.components.forcegraph,i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[e].apply(r,o);return s===r?this:s})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,n){e.innerHTML="",n.container=document.createElement("div"),e.appendChild(n.container),n.container.style.position="relative",n.container.style.width="".concat(n.width,"px"),n.container.style.height="".concat(n.height,"px"),n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="graph-nav-info",n.navInfo.textContent="Mouse drag: look, gamepad/arrow/wasd keys: move";var r,i,o,a,s,l=document.createElement("a-scene");l.setAttribute("embedded",""),l.appendChild(n.sky=document.createElement("a-sky")),n.sky.setAttribute("radius",3e3),l.appendChild(r=document.createElement("a-entity")),r.setAttribute("position","0 0 300"),r.setAttribute("movement-controls","controls: gamepad, touch; fly: true; speed: 7"),r.appendChild(i=document.createElement("a-entity")),i.setAttribute("camera",""),i.setAttribute("position","0 0 0"),i.setAttribute("look-controls","pointerLockEnabled: false"),i.setAttribute("wasd-controls","fly: true; acceleration: 700"),i.appendChild(o=document.createElement("a-text")),o.setAttribute("position","0 -0.3 -1"),o.setAttribute("width",2),o.setAttribute("align","center"),o.setAttribute("color","lavender"),o.setAttribute("value",""),i.appendChild(a=document.createElement("a-text")),a.setAttribute("position","0 -0.4 -1"),a.setAttribute("width",1.3),a.setAttribute("align","center"),a.setAttribute("color","lavender"),a.setAttribute("value",""),n.raycasterEls=[],l.appendChild(s=document.createElement("a-entity")),s.setAttribute("cursor","rayOrigin: mouse; mouseCursorStylesEnabled: true"),s.setAttribute("raycaster","objects: [forcegraph]; interval: 100"),n.raycasterEls.push(s),["left","right"].forEach(function(e){var i;r.appendChild(i=document.createElement("a-entity")),i.setAttribute("laser-controls","hand: ".concat(e,"; model: false;")),i.setAttribute("raycaster","objects: [forcegraph]; interval: 100; lineColor: steelblue; lineOpacity: 0.85"),n.raycasterEls.push(i)}),l.appendChild(n.forcegraph=document.createElement("a-entity")),n.forcegraph.setAttribute("forcegraph",null),n.container.appendChild(l),n.forcegraph.setAttribute("forcegraph",Object.assign.apply(Object,rn(["node","link"].map(function(e){var r={node:"Node",link:"Link"}[e];return n9({},"on".concat(r,"Hover"),function(i,s){var l=i&&e0(n["".concat(e,"Label")])(i)||"",c=i&&e0(n["".concat(e,"Desc")])(i)||"";o.setAttribute("value",l),a.setAttribute("value",c),n["on".concat(r,"Hover")]&&n["on".concat(r,"Hover")](i,s)})}))))},update:function(e,n){if(n.hasOwnProperty("backgroundColor")){var r=n$(e.backgroundColor).alpha;void 0===r&&(r=1),e.sky.setAttribute("color",n6(1,e.backgroundColor)),e.sky.setAttribute("opacity",r)}n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none");var i=["onNodeHover","onLinkHover","onNodeClick","onLinkClick"].some(function(n){return e[n]})||["nodeLabel","linkLabel"].some(function(n){return"name"!==e[n]})||["nodeDesc","linkDesc"].some(function(n){return"desc"!==e[n]});e.raycasterEls.forEach(function(e){return e.setAttribute("raycaster",i?"objects: [forcegraph]; interval: 100":"objects: __none__")});var o=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","onNodeClick","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","onLinkClick","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],a=Object.assign.apply(Object,[{}].concat(rn(Object.entries(e).filter(function(e){var r=rt(e,2),i=r[0],a=r[1];return n.hasOwnProperty(i)&&-1!==o.indexOf(i)&&null!=a}).map(function(e){var n=rt(e,2);return n9({},n[0],n[1])})),rn(Object.entries(e.graphData).map(function(e){var n=rt(e,2);return n9({},n[0],n[1])}))));e.forcegraph.setAttribute("forcegraph",a)}}),ro=r(95062);function ra(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function rs(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:i+"")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function rl(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function rc(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?rl(Object(r),!0).forEach(function(n){rs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rl(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ru(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n);else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||rd(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rh(e){return function(e){if(Array.isArray(e))return ra(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||rd(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rd(e,n){if(e){if("string"==typeof e)return ra(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ra(e,n):void 0}}var rf=eQ({props:{width:{},height:{},yOffset:{default:1.5},glScale:{default:200},jsonUrl:{},graphData:{default:{nodes:[],links:[]}},numDimensions:{default:3},dagMode:{},dagLevelDistance:{},dagNodeFilter:{default:function(){return!0}},onDagError:{default:void 0},nodeRelSize:{default:4},nodeId:{default:"id"},nodeVal:{default:"val"},nodeResolution:{default:8},nodeVisibility:{default:!0},nodeColor:{default:"color"},nodeAutoColorBy:{},nodeOpacity:{default:.75},nodeThreeObject:{},nodeThreeObjectExtend:{default:!1},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0},linkColor:{default:"color"},linkAutoColorBy:{},linkOpacity:{default:.2},linkWidth:{default:0},linkResolution:{default:6},linkCurvature:{default:0},linkCurveRotation:{default:0},linkMaterial:{},linkThreeObject:{},linkThreeObjectExtend:{default:!1},linkPositionUpdate:{},linkDirectionalArrowLength:{default:0},linkDirectionalArrowColor:{},linkDirectionalArrowRelPos:{default:.5},linkDirectionalArrowResolution:{default:8},linkDirectionalParticles:{default:0},linkDirectionalParticleSpeed:{default:.01},linkDirectionalParticleWidth:{default:.5},linkDirectionalParticleColor:{},linkDirectionalParticleResolution:{default:4},onNodeHover:{},onNodeClick:{},onLinkHover:{},onLinkClick:{},forceEngine:{default:"d3"},d3AlphaMin:{default:0},d3AlphaDecay:{default:.0228},d3VelocityDecay:{default:.4},ngraphPhysics:{},warmupTicks:{default:0},cooldownTicks:{},cooldownTime:{default:15e3},onEngineTick:{},onEngineStop:{}},methods:rc(rc({},Object.assign.apply(Object,[{}].concat(rh(["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"].map(function(e){return rs({},e,function(n){for(var r=n.forcegraph.components.forcegraph,i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=r[e].apply(r,o);return s===r?this:s})}))))),{},{_destructor:function(){this.graphData({nodes:[],links:[]})}}),init:function(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.markerAttrs;e.innerHTML="",n.container=document.createElement("div"),e.appendChild(n.container);var a=document.createElement("a-scene");a.setAttribute("embedded",""),a.setAttribute("vr-mode-ui","enabled: false"),a.setAttribute("arjs","debugUIEnabled: false;");var s=document.createElement("a-marker");Object.entries(void 0===o?{preset:"hiro"}:o).forEach(function(e){var n=ru(e,2),r=n[0],i=n[1];return s.setAttribute(r,i)}),a.appendChild(s),a.appendChild(r=document.createElement("a-entity")),r.setAttribute("cursor"),r.setAttribute("raycaster","objects: [forcegraph]"),n.forcegraph=document.createElement("a-entity"),n.forcegraph.setAttribute("forcegraph",null),s.appendChild(n.forcegraph);var l=document.createElement("a-entity");l.setAttribute("camera",""),a.appendChild(l),n.container.appendChild(a)},update:function(e,n){n.hasOwnProperty("width")&&e.width&&(e.container.style.width="".concat(e.width,"px")),n.hasOwnProperty("height")&&e.height&&(e.container.style.height="".concat(e.height,"px")),n.hasOwnProperty("glScale")&&e.forcegraph.setAttribute("scale",rh([,,,]).map(function(){return 1/e.glScale}).join(" ")),n.hasOwnProperty("yOffset")&&e.forcegraph.setAttribute("position","0 ".concat(e.yOffset," 0"));var r=["jsonUrl","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeVisibility","nodeColor","nodeAutoColorBy","nodeOpacity","nodeThreeObject","nodeThreeObjectExtend","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","onNodeHover","onNodeClick","onLinkHover","onLinkClick","forceEngine","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"],i=Object.assign.apply(Object,[{}].concat(rh(Object.entries(e).filter(function(e){var i=ru(e,2),o=i[0],a=i[1];return n.hasOwnProperty(o)&&-1!==r.indexOf(o)&&null!=a}).map(function(e){var n=ru(e,2);return rs({},n[0],n[1])})),rh(Object.entries(e.graphData).map(function(e){var n=ru(e,2);return rs({},n[0],n[1])}))));e.forcegraph.setAttribute("forcegraph",i)}});let rp=new m.Zcv,rm=new m.I9Y,rg=new m.Pq0,ry=new m.I9Y,rv=new m.I9Y,rb=new m.Pq0,r_=new m.Pq0,rw=new m.kn4,rx=new m.Pq0,rk=new m.Pq0,rE=null,rA=null,rO=[],rT={NONE:-1,PAN:0,ROTATE:1};class rC extends m.H2z{constructor(e,n,r=null){super(n,r),this.objects=e,this.recursive=!0,this.transformGroup=!1,this.rotateSpeed=1,this.raycaster=new m.tBo,this.mouseButtons={LEFT:m.kBv.PAN,MIDDLE:m.kBv.PAN,RIGHT:m.kBv.ROTATE},this.touches={ONE:m.wtR.PAN},this._onPointerMove=rP.bind(this),this._onPointerDown=rM.bind(this),this._onPointerCancel=rS.bind(this),this._onContextMenu=rD.bind(this),null!==r&&this.connect(r)}connect(e){super.connect(e),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerCancel),this.domElement.addEventListener("pointerleave",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerCancel),this.domElement.removeEventListener("pointerleave",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto",this.domElement.style.cursor=""}dispose(){this.disconnect()}_updatePointer(e){let n=this.domElement.getBoundingClientRect();rm.x=(e.clientX-n.left)/n.width*2-1,rm.y=-(e.clientY-n.top)/n.height*2+1}_updateState(e){let n;if("touch"===e.pointerType)n=this.touches.ONE;else switch(e.button){case 0:n=this.mouseButtons.LEFT;break;case 1:n=this.mouseButtons.MIDDLE;break;case 2:n=this.mouseButtons.RIGHT;break;default:n=null}switch(n){case m.kBv.PAN:case m.wtR.PAN:this.state=rT.PAN;break;case m.kBv.ROTATE:case m.wtR.ROTATE:this.state=rT.ROTATE;break;default:this.state=rT.NONE}}getRaycaster(){return console.warn("THREE.DragControls: getRaycaster() has been deprecated. Use controls.raycaster instead."),this.raycaster}setObjects(e){console.warn("THREE.DragControls: setObjects() has been deprecated. Use controls.objects instead."),this.objects=e}getObjects(){return console.warn("THREE.DragControls: getObjects() has been deprecated. Use controls.objects instead."),this.objects}activate(){console.warn("THREE.DragControls: activate() has been renamed to connect()."),this.connect()}deactivate(){console.warn("THREE.DragControls: deactivate() has been renamed to disconnect()."),this.disconnect()}set mode(e){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}get mode(){console.warn("THREE.DragControls: The .mode property has been removed. Define the type of transformation via the .mouseButtons or .touches properties.")}}function rP(e){let n=this.object,r=this.domElement,i=this.raycaster;if(!1!==this.enabled){if(this._updatePointer(e),i.setFromCamera(rm,n),rE)this.state===rT.PAN?i.ray.intersectPlane(rp,rb)&&rE.position.copy(rb.sub(rg).applyMatrix4(rw)):this.state===rT.ROTATE&&(ry.subVectors(rm,rv).multiplyScalar(this.rotateSpeed),rE.rotateOnWorldAxis(rx,ry.x),rE.rotateOnWorldAxis(rk.normalize(),-ry.y)),this.dispatchEvent({type:"drag",object:rE}),rv.copy(rm);else if("mouse"===e.pointerType||"pen"===e.pointerType)if(rO.length=0,i.setFromCamera(rm,n),i.intersectObjects(this.objects,this.recursive,rO),rO.length>0){let e=rO[0].object;rp.setFromNormalAndCoplanarPoint(n.getWorldDirection(rp.normal),r_.setFromMatrixPosition(e.matrixWorld)),rA!==e&&null!==rA&&(this.dispatchEvent({type:"hoveroff",object:rA}),r.style.cursor="auto",rA=null),rA!==e&&(this.dispatchEvent({type:"hoveron",object:e}),r.style.cursor="pointer",rA=e)}else null!==rA&&(this.dispatchEvent({type:"hoveroff",object:rA}),r.style.cursor="auto",rA=null);rv.copy(rm)}}function rM(e){let n=this.object,r=this.domElement,i=this.raycaster;!1!==this.enabled&&(this._updatePointer(e),this._updateState(e),rO.length=0,i.setFromCamera(rm,n),i.intersectObjects(this.objects,this.recursive,rO),rO.length>0&&(rE=!0===this.transformGroup?function e(n,r=null){return(n.isGroup&&(r=n),null===n.parent)?r:e(n.parent,r)}(rO[0].object):rO[0].object,rp.setFromNormalAndCoplanarPoint(n.getWorldDirection(rp.normal),r_.setFromMatrixPosition(rE.matrixWorld)),i.ray.intersectPlane(rp,rb)&&(this.state===rT.PAN?(rw.copy(rE.parent.matrixWorld).invert(),rg.copy(rb).sub(r_.setFromMatrixPosition(rE.matrixWorld))):this.state===rT.ROTATE&&(rx.set(0,1,0).applyQuaternion(n.quaternion).normalize(),rk.set(1,0,0).applyQuaternion(n.quaternion).normalize())),r.style.cursor="move",this.dispatchEvent({type:"dragstart",object:rE})),rv.copy(rm))}function rS(){!1!==this.enabled&&(rE&&(this.dispatchEvent({type:"dragend",object:rE}),rE=null),this.domElement.style.cursor=rA?"pointer":"auto",this.state=rT.NONE)}function rD(e){!1!==this.enabled&&e.preventDefault()}var rN=r(92415),rj=r(66744);let rR={type:"change"},rL={type:"start"},rI={type:"end"},rz={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4},rF=new m.I9Y,rB=new m.I9Y,rU=new m.Pq0,rV=new m.Pq0,rH=new m.Pq0,rq=new m.PTz,rG=new m.Pq0,rK=new m.Pq0,r$=new m.Pq0,rY=new m.Pq0;class rW extends m.H2z{constructor(e,n=null){super(e,n),this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.keys=["KeyA","KeyS","KeyD"],this.mouseButtons={LEFT:m.kBv.ROTATE,MIDDLE:m.kBv.DOLLY,RIGHT:m.kBv.PAN},this.target=new m.Pq0,this.state=rz.NONE,this.keyState=rz.NONE,this._lastPosition=new m.Pq0,this._lastZoom=1,this._touchZoomDistanceStart=0,this._touchZoomDistanceEnd=0,this._lastAngle=0,this._eye=new m.Pq0,this._movePrev=new m.I9Y,this._moveCurr=new m.I9Y,this._lastAxis=new m.Pq0,this._zoomStart=new m.I9Y,this._zoomEnd=new m.I9Y,this._panStart=new m.I9Y,this._panEnd=new m.I9Y,this._pointers=[],this._pointerPositions={},this._onPointerMove=rZ.bind(this),this._onPointerDown=rX.bind(this),this._onPointerUp=rJ.bind(this),this._onPointerCancel=rQ.bind(this),this._onContextMenu=r6.bind(this),this._onMouseWheel=r4.bind(this),this._onKeyDown=r1.bind(this),this._onKeyUp=r0.bind(this),this._onTouchStart=r8.bind(this),this._onTouchMove=r9.bind(this),this._onTouchEnd=r7.bind(this),this._onMouseDown=r2.bind(this),this._onMouseMove=r3.bind(this),this._onMouseUp=r5.bind(this),this._target0=this.target.clone(),this._position0=this.object.position.clone(),this._up0=this.object.up.clone(),this._zoom0=this.object.zoom,null!==n&&(this.connect(n),this.handleResize()),this.update()}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="none"}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}handleResize(){let e=this.domElement.getBoundingClientRect(),n=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-n.clientLeft,this.screen.top=e.top+window.pageYOffset-n.clientTop,this.screen.width=e.width,this.screen.height=e.height}update(){this._eye.subVectors(this.object.position,this.target),this.noRotate||this._rotateCamera(),this.noZoom||this._zoomCamera(),this.noPan||this._panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this._checkDistances(),this.object.lookAt(this.target),this._lastPosition.distanceToSquared(this.object.position)>1e-6&&(this.dispatchEvent(rR),this._lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this._lastPosition.distanceToSquared(this.object.position)>1e-6||this._lastZoom!==this.object.zoom)&&(this.dispatchEvent(rR),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type.")}reset(){this.state=rz.NONE,this.keyState=rz.NONE,this.target.copy(this._target0),this.object.position.copy(this._position0),this.object.up.copy(this._up0),this.object.zoom=this._zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(rR),this._lastPosition.copy(this.object.position),this._lastZoom=this.object.zoom}_panCamera(){if(rB.copy(this._panEnd).sub(this._panStart),rB.lengthSq()){if(this.object.isOrthographicCamera){let e=(this.object.right-this.object.left)/this.object.zoom/this.domElement.clientWidth,n=(this.object.top-this.object.bottom)/this.object.zoom/this.domElement.clientWidth;rB.x*=e,rB.y*=n}rB.multiplyScalar(this._eye.length()*this.panSpeed),rV.copy(this._eye).cross(this.object.up).setLength(rB.x),rV.add(rU.copy(this.object.up).setLength(rB.y)),this.object.position.add(rV),this.target.add(rV),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(rB.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}_rotateCamera(){rY.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0);let e=rY.length();e?(this._eye.copy(this.object.position).sub(this.target),rG.copy(this._eye).normalize(),rK.copy(this.object.up).normalize(),r$.crossVectors(rK,rG).normalize(),rK.setLength(this._moveCurr.y-this._movePrev.y),r$.setLength(this._moveCurr.x-this._movePrev.x),rY.copy(rK.add(r$)),rH.crossVectors(rY,this._eye).normalize(),e*=this.rotateSpeed,rq.setFromAxisAngle(rH,e),this._eye.applyQuaternion(rq),this.object.up.applyQuaternion(rq),this._lastAxis.copy(rH),this._lastAngle=e):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),rq.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(rq),this.object.up.applyQuaternion(rq)),this._movePrev.copy(this._moveCurr)}_zoomCamera(){let e;this.state===rz.TOUCH_ZOOM_PAN?(e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=m.cj9.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!=(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed)&&e>0&&(this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom=m.cj9.clamp(this.object.zoom/e,this.minZoom,this.maxZoom),this._lastZoom!==this.object.zoom&&this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor)}_getMouseOnScreen(e,n){return rF.set((e-this.screen.left)/this.screen.width,(n-this.screen.top)/this.screen.height),rF}_getMouseOnCircle(e,n){return rF.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-n))/this.screen.width),rF}_addPointer(e){this._pointers.push(e)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n].pointerId==e.pointerId)return void this._pointers.splice(n,1)}_trackPointer(e){let n=this._pointerPositions[e.pointerId];void 0===n&&(n=new m.I9Y,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let n=e.pointerId===this._pointers[0].pointerId?this._pointers[1]:this._pointers[0];return this._pointerPositions[n.pointerId]}_checkDistances(){this.noZoom&&this.noPan||(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}}function rX(e){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._addPointer(e),"touch"===e.pointerType?this._onTouchStart(e):this._onMouseDown(e))}function rZ(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchMove(e):this._onMouseMove(e))}function rJ(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchEnd(e):this._onMouseUp(),this._removePointer(e),0===this._pointers.length&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp)))}function rQ(e){this._removePointer(e)}function r0(){!1!==this.enabled&&(this.keyState=rz.NONE,window.addEventListener("keydown",this._onKeyDown))}function r1(e){!1!==this.enabled&&(window.removeEventListener("keydown",this._onKeyDown),this.keyState===rz.NONE&&(e.code!==this.keys[rz.ROTATE]||this.noRotate?e.code!==this.keys[rz.ZOOM]||this.noZoom?e.code!==this.keys[rz.PAN]||this.noPan||(this.keyState=rz.PAN):this.keyState=rz.ZOOM:this.keyState=rz.ROTATE))}function r2(e){let n;switch(e.button){case 0:n=this.mouseButtons.LEFT;break;case 1:n=this.mouseButtons.MIDDLE;break;case 2:n=this.mouseButtons.RIGHT;break;default:n=-1}switch(n){case m.kBv.DOLLY:this.state=rz.ZOOM;break;case m.kBv.ROTATE:this.state=rz.ROTATE;break;case m.kBv.PAN:this.state=rz.PAN;break;default:this.state=rz.NONE}let r=this.keyState!==rz.NONE?this.keyState:this.state;r!==rz.ROTATE||this.noRotate?r!==rz.ZOOM||this.noZoom?r!==rz.PAN||this.noPan||(this._panStart.copy(this._getMouseOnScreen(e.pageX,e.pageY)),this._panEnd.copy(this._panStart)):(this._zoomStart.copy(this._getMouseOnScreen(e.pageX,e.pageY)),this._zoomEnd.copy(this._zoomStart)):(this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY)),this._movePrev.copy(this._moveCurr)),this.dispatchEvent(rL)}function r3(e){let n=this.keyState!==rz.NONE?this.keyState:this.state;n!==rz.ROTATE||this.noRotate?n!==rz.ZOOM||this.noZoom?n!==rz.PAN||this.noPan||this._panEnd.copy(this._getMouseOnScreen(e.pageX,e.pageY)):this._zoomEnd.copy(this._getMouseOnScreen(e.pageX,e.pageY)):(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY)))}function r5(){this.state=rz.NONE,this.dispatchEvent(rI)}function r4(e){if(!1!==this.enabled&&!0!==this.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:this._zoomStart.y-=.025*e.deltaY;break;case 1:this._zoomStart.y-=.01*e.deltaY;break;default:this._zoomStart.y-=25e-5*e.deltaY}this.dispatchEvent(rL),this.dispatchEvent(rI)}}function r6(e){!1!==this.enabled&&e.preventDefault()}function r8(e){if(this._trackPointer(e),1===this._pointers.length)this.state=rz.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(this._pointers[0].pageX,this._pointers[0].pageY)),this._movePrev.copy(this._moveCurr);else{this.state=rz.TOUCH_ZOOM_PAN;let e=this._pointers[0].pageX-this._pointers[1].pageX,n=this._pointers[0].pageY-this._pointers[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(e*e+n*n);let r=(this._pointers[0].pageX+this._pointers[1].pageX)/2,i=(this._pointers[0].pageY+this._pointers[1].pageY)/2;this._panStart.copy(this._getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart)}this.dispatchEvent(rL)}function r9(e){if(this._trackPointer(e),1===this._pointers.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY));else{let n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y;this._touchZoomDistanceEnd=Math.sqrt(r*r+i*i);let o=(e.pageX+n.x)/2,a=(e.pageY+n.y)/2;this._panEnd.copy(this._getMouseOnScreen(o,a))}}function r7(e){switch(this._pointers.length){case 0:this.state=rz.NONE;break;case 1:this.state=rz.TOUCH_ROTATE,this._moveCurr.copy(this._getMouseOnCircle(e.pageX,e.pageY)),this._movePrev.copy(this._moveCurr);break;case 2:this.state=rz.TOUCH_ZOOM_PAN;for(let n=0;n<this._pointers.length;n++)if(this._pointers[n].pointerId!==e.pointerId){let e=this._pointerPositions[this._pointers[n].pointerId];this._moveCurr.copy(this._getMouseOnCircle(e.x,e.y)),this._movePrev.copy(this._moveCurr);break}}this.dispatchEvent(rI)}let ie={type:"change"},it={type:"start"},ir={type:"end"},ii=new m.RlV,io=new m.Zcv,ia=Math.cos(70*m.cj9.DEG2RAD),is=new m.Pq0,il=2*Math.PI,ic={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};class iu extends m.H2z{constructor(e,n=null){super(e,n),this.state=ic.NONE,this.target=new m.Pq0,this.cursor=new m.Pq0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:m.kBv.ROTATE,MIDDLE:m.kBv.DOLLY,RIGHT:m.kBv.PAN},this.touches={ONE:m.wtR.ROTATE,TWO:m.wtR.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new m.Pq0,this._lastQuaternion=new m.PTz,this._lastTargetPosition=new m.Pq0,this._quat=new m.PTz().setFromUnitVectors(e.up,new m.Pq0(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new m.YHV,this._sphericalDelta=new m.YHV,this._scale=1,this._panOffset=new m.Pq0,this._rotateStart=new m.I9Y,this._rotateEnd=new m.I9Y,this._rotateDelta=new m.I9Y,this._panStart=new m.I9Y,this._panEnd=new m.I9Y,this._panDelta=new m.I9Y,this._dollyStart=new m.I9Y,this._dollyEnd=new m.I9Y,this._dollyDelta=new m.I9Y,this._dollyDirection=new m.Pq0,this._mouse=new m.I9Y,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=id.bind(this),this._onPointerDown=ih.bind(this),this._onPointerUp=ip.bind(this),this._onContextMenu=iw.bind(this),this._onMouseWheel=iy.bind(this),this._onKeyDown=iv.bind(this),this._onTouchStart=ib.bind(this),this._onTouchMove=i_.bind(this),this._onMouseDown=im.bind(this),this._onMouseMove=ig.bind(this),this._interceptControlDown=ix.bind(this),this._interceptControlUp=ik.bind(this),null!==this.domElement&&this.connect(this.domElement),this.update()}connect(e){super.connect(e),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(e){e.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=e}stopListenToKeyEvents(){null!==this._domElementKeyEvents&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(ie),this.update(),this.state=ic.NONE}update(e=null){let n=this.object.position;is.copy(n).sub(this.target),is.applyQuaternion(this._quat),this._spherical.setFromVector3(is),this.autoRotate&&this.state===ic.NONE&&this._rotateLeft(this._getAutoRotationAngle(e)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let r=this.minAzimuthAngle,i=this.maxAzimuthAngle;isFinite(r)&&isFinite(i)&&(r<-Math.PI?r+=il:r>Math.PI&&(r-=il),i<-Math.PI?i+=il:i>Math.PI&&(i-=il),r<=i?this._spherical.theta=Math.max(r,Math.min(i,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(r+i)/2?Math.max(r,this._spherical.theta):Math.min(i,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),!0===this.enableDamping?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let e=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=e!=this._spherical.radius}if(is.setFromSpherical(this._spherical),is.applyQuaternion(this._quatInverse),n.copy(this.target).add(is),this.object.lookAt(this.target),!0===this.enableDamping?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let e=null;if(this.object.isPerspectiveCamera){let n=is.length();e=this._clampDistance(n*this._scale);let r=n-e;this.object.position.addScaledVector(this._dollyDirection,r),this.object.updateMatrixWorld(),o=!!r}else if(this.object.isOrthographicCamera){let n=new m.Pq0(this._mouse.x,this._mouse.y,0);n.unproject(this.object);let r=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=r!==this.object.zoom;let i=new m.Pq0(this._mouse.x,this._mouse.y,0);i.unproject(this.object),this.object.position.sub(i).add(n),this.object.updateMatrixWorld(),e=is.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;null!==e&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(e).add(this.object.position):(ii.origin.copy(this.object.position),ii.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(ii.direction))<ia?this.object.lookAt(this.target):(io.setFromNormalAndCoplanarPoint(this.object.up,this.target),ii.intersectPlane(io,this.target))))}else if(this.object.isOrthographicCamera){let e=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),e!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,!!(o||this._lastPosition.distanceToSquared(this.object.position)>1e-6||8*(1-this._lastQuaternion.dot(this.object.quaternion))>1e-6||this._lastTargetPosition.distanceToSquared(this.target)>1e-6)&&(this.dispatchEvent(ie),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0)}_getAutoRotationAngle(e){return null!==e?il/60*this.autoRotateSpeed*e:il/60/60*this.autoRotateSpeed}_getZoomScale(e){let n=Math.abs(.01*e);return Math.pow(.95,this.zoomSpeed*n)}_rotateLeft(e){this._sphericalDelta.theta-=e}_rotateUp(e){this._sphericalDelta.phi-=e}_panLeft(e,n){is.setFromMatrixColumn(n,0),is.multiplyScalar(-e),this._panOffset.add(is)}_panUp(e,n){!0===this.screenSpacePanning?is.setFromMatrixColumn(n,1):(is.setFromMatrixColumn(n,0),is.crossVectors(this.object.up,is)),is.multiplyScalar(e),this._panOffset.add(is)}_pan(e,n){let r=this.domElement;if(this.object.isPerspectiveCamera){let i=this.object.position;is.copy(i).sub(this.target);let o=is.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*e*o/r.clientHeight,this.object.matrix),this._panUp(2*n*o/r.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(e*(this.object.right-this.object.left)/this.object.zoom/r.clientWidth,this.object.matrix),this._panUp(n*(this.object.top-this.object.bottom)/this.object.zoom/r.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(e){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(e,n){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let r=this.domElement.getBoundingClientRect(),i=e-r.left,o=n-r.top,a=r.width,s=r.height;this._mouse.x=i/a*2-1,this._mouse.y=-(o/s*2)+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(e){return Math.max(this.minDistance,Math.min(this.maxDistance,e))}_handleMouseDownRotate(e){this._rotateStart.set(e.clientX,e.clientY)}_handleMouseDownDolly(e){this._updateZoomParameters(e.clientX,e.clientX),this._dollyStart.set(e.clientX,e.clientY)}_handleMouseDownPan(e){this._panStart.set(e.clientX,e.clientY)}_handleMouseMoveRotate(e){this._rotateEnd.set(e.clientX,e.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let n=this.domElement;this._rotateLeft(il*this._rotateDelta.x/n.clientHeight),this._rotateUp(il*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(e){this._dollyEnd.set(e.clientX,e.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(e){this._panEnd.set(e.clientX,e.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(e){this._updateZoomParameters(e.clientX,e.clientY),e.deltaY<0?this._dollyIn(this._getZoomScale(e.deltaY)):e.deltaY>0&&this._dollyOut(this._getZoomScale(e.deltaY)),this.update()}_handleKeyDown(e){let n=!1;switch(e.code){case this.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(il*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),n=!0;break;case this.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateUp(-il*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),n=!0;break;case this.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(il*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),n=!0;break;case this.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?this.enableRotate&&this._rotateLeft(-il*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),n=!0}n&&(e.preventDefault(),this.update())}_handleTouchStartRotate(e){if(1===this._pointers.length)this._rotateStart.set(e.pageX,e.pageY);else{let n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._rotateStart.set(r,i)}}_handleTouchStartPan(e){if(1===this._pointers.length)this._panStart.set(e.pageX,e.pageY);else{let n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panStart.set(r,i)}}_handleTouchStartDolly(e){let n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(r*r+i*i);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enablePan&&this._handleTouchStartPan(e)}_handleTouchStartDollyRotate(e){this.enableZoom&&this._handleTouchStartDolly(e),this.enableRotate&&this._handleTouchStartRotate(e)}_handleTouchMoveRotate(e){if(1==this._pointers.length)this._rotateEnd.set(e.pageX,e.pageY);else{let n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._rotateEnd.set(r,i)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let n=this.domElement;this._rotateLeft(il*this._rotateDelta.x/n.clientHeight),this._rotateUp(il*this._rotateDelta.y/n.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(e){if(1===this._pointers.length)this._panEnd.set(e.pageX,e.pageY);else{let n=this._getSecondPointerPosition(e),r=.5*(e.pageX+n.x),i=.5*(e.pageY+n.y);this._panEnd.set(r,i)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(e){let n=this._getSecondPointerPosition(e),r=e.pageX-n.x,i=e.pageY-n.y,o=Math.sqrt(r*r+i*i);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let a=(e.pageX+n.x)*.5,s=(e.pageY+n.y)*.5;this._updateZoomParameters(a,s)}_handleTouchMoveDollyPan(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enablePan&&this._handleTouchMovePan(e)}_handleTouchMoveDollyRotate(e){this.enableZoom&&this._handleTouchMoveDolly(e),this.enableRotate&&this._handleTouchMoveRotate(e)}_addPointer(e){this._pointers.push(e.pointerId)}_removePointer(e){delete this._pointerPositions[e.pointerId];for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return void this._pointers.splice(n,1)}_isTrackingPointer(e){for(let n=0;n<this._pointers.length;n++)if(this._pointers[n]==e.pointerId)return!0;return!1}_trackPointer(e){let n=this._pointerPositions[e.pointerId];void 0===n&&(n=new m.I9Y,this._pointerPositions[e.pointerId]=n),n.set(e.pageX,e.pageY)}_getSecondPointerPosition(e){let n=e.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[n]}_customWheelEvent(e){let n=e.deltaMode,r={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(n){case 1:r.deltaY*=16;break;case 2:r.deltaY*=100}return e.ctrlKey&&!this._controlActive&&(r.deltaY*=10),r}}function ih(e){!1!==this.enabled&&(0===this._pointers.length&&(this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerup",this._onPointerUp)),this._isTrackingPointer(e)||(this._addPointer(e),"touch"===e.pointerType?this._onTouchStart(e):this._onMouseDown(e)))}function id(e){!1!==this.enabled&&("touch"===e.pointerType?this._onTouchMove(e):this._onMouseMove(e))}function ip(e){switch(this._removePointer(e),this._pointers.length){case 0:this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(ir),this.state=ic.NONE;break;case 1:let n=this._pointers[0],r=this._pointerPositions[n];this._onTouchStart({pointerId:n,pageX:r.x,pageY:r.y})}}function im(e){let n;switch(e.button){case 0:n=this.mouseButtons.LEFT;break;case 1:n=this.mouseButtons.MIDDLE;break;case 2:n=this.mouseButtons.RIGHT;break;default:n=-1}switch(n){case m.kBv.DOLLY:if(!1===this.enableZoom)return;this._handleMouseDownDolly(e),this.state=ic.DOLLY;break;case m.kBv.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=ic.PAN}else{if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=ic.ROTATE}break;case m.kBv.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===this.enableRotate)return;this._handleMouseDownRotate(e),this.state=ic.ROTATE}else{if(!1===this.enablePan)return;this._handleMouseDownPan(e),this.state=ic.PAN}break;default:this.state=ic.NONE}this.state!==ic.NONE&&this.dispatchEvent(it)}function ig(e){switch(this.state){case ic.ROTATE:if(!1===this.enableRotate)return;this._handleMouseMoveRotate(e);break;case ic.DOLLY:if(!1===this.enableZoom)return;this._handleMouseMoveDolly(e);break;case ic.PAN:if(!1===this.enablePan)return;this._handleMouseMovePan(e)}}function iy(e){!1!==this.enabled&&!1!==this.enableZoom&&this.state===ic.NONE&&(e.preventDefault(),this.dispatchEvent(it),this._handleMouseWheel(this._customWheelEvent(e)),this.dispatchEvent(ir))}function iv(e){!1!==this.enabled&&this._handleKeyDown(e)}function ib(e){switch(this._trackPointer(e),this._pointers.length){case 1:switch(this.touches.ONE){case m.wtR.ROTATE:if(!1===this.enableRotate)return;this._handleTouchStartRotate(e),this.state=ic.TOUCH_ROTATE;break;case m.wtR.PAN:if(!1===this.enablePan)return;this._handleTouchStartPan(e),this.state=ic.TOUCH_PAN;break;default:this.state=ic.NONE}break;case 2:switch(this.touches.TWO){case m.wtR.DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchStartDollyPan(e),this.state=ic.TOUCH_DOLLY_PAN;break;case m.wtR.DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchStartDollyRotate(e),this.state=ic.TOUCH_DOLLY_ROTATE;break;default:this.state=ic.NONE}break;default:this.state=ic.NONE}this.state!==ic.NONE&&this.dispatchEvent(it)}function i_(e){switch(this._trackPointer(e),this.state){case ic.TOUCH_ROTATE:if(!1===this.enableRotate)return;this._handleTouchMoveRotate(e),this.update();break;case ic.TOUCH_PAN:if(!1===this.enablePan)return;this._handleTouchMovePan(e),this.update();break;case ic.TOUCH_DOLLY_PAN:if(!1===this.enableZoom&&!1===this.enablePan)return;this._handleTouchMoveDollyPan(e),this.update();break;case ic.TOUCH_DOLLY_ROTATE:if(!1===this.enableZoom&&!1===this.enableRotate)return;this._handleTouchMoveDollyRotate(e),this.update();break;default:this.state=ic.NONE}}function iw(e){!1!==this.enabled&&e.preventDefault()}function ix(e){"Control"===e.key&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function ik(e){"Control"===e.key&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}let iE={type:"change"},iA=new m.PTz;class iO extends m.H2z{constructor(e,n=null){super(e,n),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this._moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this._moveVector=new m.Pq0(0,0,0),this._rotationVector=new m.Pq0(0,0,0),this._lastQuaternion=new m.PTz,this._lastPosition=new m.Pq0,this._status=0,this._onKeyDown=iT.bind(this),this._onKeyUp=iC.bind(this),this._onPointerMove=iM.bind(this),this._onPointerDown=iP.bind(this),this._onPointerUp=iS.bind(this),this._onPointerCancel=iD.bind(this),this._onContextMenu=iN.bind(this),null!==n&&this.connect(n)}connect(e){super.connect(e),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("keyup",this._onKeyUp),this.domElement.addEventListener("pointermove",this._onPointerMove),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.addEventListener("pointercancel",this._onPointerCancel),this.domElement.addEventListener("contextmenu",this._onContextMenu)}disconnect(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerCancel),this.domElement.removeEventListener("contextmenu",this._onContextMenu)}dispose(){this.disconnect()}update(e){if(!1===this.enabled)return;let n=this.object,r=e*this.movementSpeed,i=e*this.rollSpeed;n.translateX(this._moveVector.x*r),n.translateY(this._moveVector.y*r),n.translateZ(this._moveVector.z*r),iA.set(this._rotationVector.x*i,this._rotationVector.y*i,this._rotationVector.z*i,1).normalize(),n.quaternion.multiply(iA),(this._lastPosition.distanceToSquared(n.position)>1e-6||8*(1-this._lastQuaternion.dot(n.quaternion))>1e-6)&&(this.dispatchEvent(iE),this._lastQuaternion.copy(n.quaternion),this._lastPosition.copy(n.position))}_updateMovementVector(){let e=this._moveState.forward||this.autoForward&&!this._moveState.back?1:0;this._moveVector.x=-this._moveState.left+this._moveState.right,this._moveVector.y=-this._moveState.down+this._moveState.up,this._moveVector.z=-e+this._moveState.back}_updateRotationVector(){this._rotationVector.x=-this._moveState.pitchDown+this._moveState.pitchUp,this._rotationVector.y=-this._moveState.yawRight+this._moveState.yawLeft,this._rotationVector.z=-this._moveState.rollRight+this._moveState.rollLeft}_getContainerDimensions(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}}}function iT(e){if(!e.altKey&&!1!==this.enabled){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this._moveState.forward=1;break;case"KeyS":this._moveState.back=1;break;case"KeyA":this._moveState.left=1;break;case"KeyD":this._moveState.right=1;break;case"KeyR":this._moveState.up=1;break;case"KeyF":this._moveState.down=1;break;case"ArrowUp":this._moveState.pitchUp=1;break;case"ArrowDown":this._moveState.pitchDown=1;break;case"ArrowLeft":this._moveState.yawLeft=1;break;case"ArrowRight":this._moveState.yawRight=1;break;case"KeyQ":this._moveState.rollLeft=1;break;case"KeyE":this._moveState.rollRight=1}this._updateMovementVector(),this._updateRotationVector()}}function iC(e){if(!1!==this.enabled){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this._moveState.forward=0;break;case"KeyS":this._moveState.back=0;break;case"KeyA":this._moveState.left=0;break;case"KeyD":this._moveState.right=0;break;case"KeyR":this._moveState.up=0;break;case"KeyF":this._moveState.down=0;break;case"ArrowUp":this._moveState.pitchUp=0;break;case"ArrowDown":this._moveState.pitchDown=0;break;case"ArrowLeft":this._moveState.yawLeft=0;break;case"ArrowRight":this._moveState.yawRight=0;break;case"KeyQ":this._moveState.rollLeft=0;break;case"KeyE":this._moveState.rollRight=0}this._updateMovementVector(),this._updateRotationVector()}}function iP(e){if(!1!==this.enabled)if(this.dragToLook)this._status++;else{switch(e.button){case 0:this._moveState.forward=1;break;case 2:this._moveState.back=1}this._updateMovementVector()}}function iM(e){if(!1!==this.enabled&&(!this.dragToLook||this._status>0)){let n=this._getContainerDimensions(),r=n.size[0]/2,i=n.size[1]/2;this._moveState.yawLeft=-(e.pageX-n.offset[0]-r)/r,this._moveState.pitchDown=(e.pageY-n.offset[1]-i)/i,this._updateRotationVector()}}function iS(e){if(!1!==this.enabled){if(this.dragToLook)this._status--,this._moveState.yawLeft=this._moveState.pitchDown=0;else{switch(e.button){case 0:this._moveState.forward=0;break;case 2:this._moveState.back=0}this._updateMovementVector()}this._updateRotationVector()}}function iD(){!1!==this.enabled&&(this.dragToLook?(this._status=0,this._moveState.yawLeft=this._moveState.pitchDown=0):(this._moveState.forward=0,this._moveState.back=0,this._updateMovementVector()),this._updateRotationVector())}function iN(e){!1!==this.enabled&&e.preventDefault()}let ij={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class iR{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}let iL=new m.qUd(-1,1,1,-1,0,1);class iI extends m.LoY{constructor(){super(),this.setAttribute("position",new m.qtW([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new m.qtW([0,2,0,0,2,0],2))}}let iz=new iI;class iF{constructor(e){this._mesh=new m.eaF(iz,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,iL)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class iB extends iR{constructor(e,n="tDiffuse"){super(),this.textureID=n,this.uniforms=null,this.material=null,e instanceof m.BKk?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=m.LlO.clone(e.uniforms),this.material=new m.BKk({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this._fsQuad=new iF(this.material)}render(e,n,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this._fsQuad.material=this.material,this.renderToScreen?e.setRenderTarget(null):(e.setRenderTarget(n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil)),this._fsQuad.render(e)}dispose(){this.material.dispose(),this._fsQuad.dispose()}}class iU extends iR{constructor(e,n){super(),this.scene=e,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,n,r){let i,o,a=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(i=0,o=1):(i=1,o=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.buffers.stencil.setFunc(a.ALWAYS,i,0xffffffff),s.buffers.stencil.setClear(o),s.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(a.EQUAL,1,0xffffffff),s.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.buffers.stencil.setLocked(!0)}}class iV extends iR{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class iH{constructor(e,n){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===n){let r=e.getSize(new m.I9Y);this._width=r.width,this._height=r.height,(n=new m.nWS(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:m.ix0})).texture.name="EffectComposer.rt1"}else this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new iB(ij),this.copyPass.material.blending=m.XIg,this.clock=new m.zD7}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,n){this.passes.splice(n,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let n=this.passes.indexOf(e);-1!==n&&this.passes.splice(n,1)}isLastEnabledPass(e){for(let n=e+1;n<this.passes.length;n++)if(this.passes[n].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());let n=this.renderer.getRenderTarget(),r=!1;for(let n=0,i=this.passes.length;n<i;n++){let i=this.passes[n];if(!1!==i.enabled){if(i.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),i.render(this.renderer,this.writeBuffer,this.readBuffer,e,r),i.needsSwap){if(r){let n=this.renderer.getContext(),r=this.renderer.state.buffers.stencil;r.setFunc(n.NOTEQUAL,1,0xffffffff),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),r.setFunc(n.EQUAL,1,0xffffffff)}this.swapBuffers()}void 0!==iU&&(i instanceof iU?r=!0:i instanceof iV&&(r=!1))}}this.renderer.setRenderTarget(n)}reset(e){if(void 0===e){let n=this.renderer.getSize(new m.I9Y);this._pixelRatio=this.renderer.getPixelRatio(),this._width=n.width,this._height=n.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,n){this._width=e,this._height=n;let r=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(r,i),this.renderTarget2.setSize(r,i);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(r,i)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class iq extends iR{constructor(e,n,r=null,i=null,o=null){super(),this.scene=e,this.camera=n,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=o,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new m.Q1f}render(e,n,r){let i,o,a=e.autoClear;e.autoClear=!1,null!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),null!==this.clearAlpha&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),!0==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(i),null!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}}var iG=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1}}),Back:Object.freeze({In:function(e){return 1===e?1:e*e*(2.70158*e-1.70158)},Out:function(e){return 0===e?0:--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}}),Bounce:Object.freeze({In:function(e){return 1-iG.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*iG.Bounce.In(2*e):.5*iG.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(2*n,e)/2:(1-Math.pow(2-2*n,e))/2+.5}}}}),iK=function(){return performance.now()},i$=function(){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,e)}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var e,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i];null==(e=o._group)||e.remove(o),o._group=this,this._tweens[o.getId()]=o,this._tweensAddedDuringUpdate[o.getId()]=o}},e.prototype.remove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=0;r<e.length;r++){var i=e[r];i._group=void 0,delete this._tweens[i.getId()],delete this._tweensAddedDuringUpdate[i.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(e){return!e.isPlaying()})},e.prototype.update=function(e,n){void 0===e&&(e=iK()),void 0===n&&(n=!0);var r=Object.keys(this._tweens);if(0!==r.length)for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<r.length;i++){var o=this._tweens[r[i]],a=!n;o&&!1===o.update(e,a)&&!n&&this.remove(o)}r=Object.keys(this._tweensAddedDuringUpdate)}},e}(),iY={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=iY.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Bezier:function(e,n){for(var r=0,i=e.length-1,o=Math.pow,a=iY.Utils.Bernstein,s=0;s<=i;s++)r+=o(1-n,i-s)*o(n,s)*e[s]*a(i,s);return r},CatmullRom:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=iY.Utils.CatmullRom;return e[0]===e[r]?(n<0&&(o=Math.floor(i=r*(1+n))),a(e[(o-1+r)%r],e[o],e[(o+1)%r],e[(o+2)%r],i-o)):n<0?e[0]-(a(e[0],e[0],e[1],e[1],-i)-e[0]):n>1?e[r]-(a(e[r],e[r],e[r-1],e[r-1],i-r)-e[r]):a(e[o?o-1:0],e[o],e[r<o+1?r:o+1],e[r<o+2?r:o+2],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e},Bernstein:function(e,n){var r=iY.Utils.Factorial;return r(e)/r(n)/r(e-n)},Factorial:function(){var e=[1];return function(n){var r=1;if(e[n])return e[n];for(var i=n;i>1;i--)r*=i;return e[n]=r,r}}(),CatmullRom:function(e,n,r,i,o){var a=(r-e)*.5,s=(i-n)*.5,l=o*o;return o*l*(2*n-2*r+a+s)+(-3*n+3*r-2*a-s)*l+a*o+n}}},iW=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),iX=new i$,iZ=function(){function e(e,n){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=iG.Linear.None,this._interpolationFunction=iY.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=iW.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=e,"object"==typeof n?(this._group=n,n.add(this)):!0===n&&(this._group=iX,iX.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,n){if(void 0===n&&(n=1e3),this._isPlaying)throw Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=n<0?0:n,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,n){if(void 0===e&&(e=iK()),void 0===n&&(n=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed)for(var r in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||n){if(this._propertiesAreSetUp=!0,!this._isDynamic){var i={};for(var o in this._valuesEnd)i[o]=this._valuesEnd[o];this._valuesEnd=i}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,n,r,i,o){for(var a in r){var s=e[a],l=Array.isArray(s),c=l?"array":typeof s,u=!l&&Array.isArray(r[a]);if("undefined"!==c&&"function"!==c){if(u){var h=r[a];if(0===h.length)continue;for(var d=[s],f=0,p=h.length;f<p;f+=1){var m=this._handleRelativeValue(s,h[f]);if(isNaN(m)){u=!1,console.warn("Found invalid interpolation list. Skipping.");break}d.push(m)}u&&(r[a]=d)}if(("object"===c||l)&&s&&!u){for(var g in n[a]=l?[]:{},s)n[a][g]=s[g];i[a]=l?[]:{};var h=r[a];if(!this._isDynamic){var y={};for(var g in h)y[g]=h[g];r[a]=h=y}this._setupProperties(s,n[a],h,i[a],o)}else(void 0===n[a]||o)&&(n[a]=s),l||(n[a]*=1),u?i[a]=r[a].slice().reverse():i[a]=n[a]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying&&(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object)),this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(e){return void 0===e&&(e=iK()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e),this},e.prototype.resume=function(e){return void 0===e&&(e=iK()),this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0),this},e.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return e?e.add(this):console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this},e.prototype.remove=function(){var e;return null==(e=this._group)||e.remove(this),this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=iG.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=iY.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(n,r){var i,o,a=this;if(void 0===n&&(n=iK()),void 0===r&&(r=e.autoStartOnUpdate),this._isPaused)return!0;if(!this._goToEnd&&!this._isPlaying)if(!r)return!1;else this.start(n,!0);if(this._goToEnd=!1,n<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=n-this._startTime,l=this._duration+(null!=(i=this._repeatDelayTime)?i:this._delayTime),c=this._duration+this._repeat*l,u=function(){if(0===a._duration||s>c)return 1;var e=Math.trunc(s/l),n=Math.min((s-e*l)/a._duration,1);return 0===n&&s===a._duration?1:n}(),h=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),0===this._duration||s>=this._duration)if(this._repeat>0){var d=Math.min(Math.trunc((s-this._duration)/l)+1,this._repeat);for(o in isFinite(this._repeat)&&(this._repeat-=d),this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[o]||(this._valuesStartRepeat[o]=this._valuesStartRepeat[o]+parseFloat(this._valuesEnd[o])),this._yoyo&&this._swapEndStartRepeatValues(o),this._valuesStart[o]=this._valuesStartRepeat[o];this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var f=0,p=this._chainedTweens.length;f<p;f++)this._chainedTweens[f].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,n,r,i){for(var o in r)if(void 0!==n[o]){var a=n[o]||0,s=r[o],l=Array.isArray(e[o]),c=Array.isArray(s);!l&&c?e[o]=this._interpolationFunction(s,i):"object"==typeof s&&s?this._updateProperties(e[o],a,s,i):"number"==typeof(s=this._handleRelativeValue(a,s))&&(e[o]=a+(s-a)*i)}},e.prototype._handleRelativeValue=function(e,n){return"string"!=typeof n?n:"+"===n.charAt(0)||"-"===n.charAt(0)?e+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],r=this._valuesEnd[e];"string"==typeof r?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(r):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},e.autoStartOnUpdate=!1,e}();function iJ(){}function iQ(e){return null==e?iJ:function(){return this.querySelector(e)}}function i0(){return[]}function i1(e){return null==e?i0:function(){return this.querySelectorAll(e)}}function i2(e){return function(){return this.matches(e)}}function i3(e){return function(n){return n.matches(e)}}iW.nextId,iX.getAll.bind(iX),iX.removeAll.bind(iX),iX.add.bind(iX),iX.remove.bind(iX),iX.update.bind(iX);var i5=Array.prototype.find;function i4(){return this.firstElementChild}var i6=Array.prototype.filter;function i8(){return Array.from(this.children)}function i9(e){return Array(e.length)}function i7(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}function oe(e,n,r,i,o,a){for(var s,l=0,c=n.length,u=a.length;l<u;++l)(s=n[l])?(s.__data__=a[l],i[l]=s):r[l]=new i7(e,a[l]);for(;l<c;++l)(s=n[l])&&(o[l]=s)}function ot(e,n,r,i,o,a,s){var l,c,u,h=new Map,d=n.length,f=a.length,p=Array(d);for(l=0;l<d;++l)(c=n[l])&&(p[l]=u=s.call(c,c.__data__,l,n)+"",h.has(u)?o[l]=c:h.set(u,c));for(l=0;l<f;++l)u=s.call(e,a[l],l,a)+"",(c=h.get(u))?(i[l]=c,c.__data__=a[l],h.delete(u)):r[l]=new i7(e,a[l]);for(l=0;l<d;++l)(c=n[l])&&h.get(p[l])===c&&(o[l]=c)}function on(e){return e.__data__}function or(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}i7.prototype={constructor:i7,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var oi="http://www.w3.org/1999/xhtml";let oo={svg:"http://www.w3.org/2000/svg",xhtml:oi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function oa(e){var n=e+="",r=n.indexOf(":");return r>=0&&"xmlns"!==(n=e.slice(0,r))&&(e=e.slice(r+1)),oo.hasOwnProperty(n)?{space:oo[n],local:e}:e}function os(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ol(e,n){return e.style.getPropertyValue(n)||os(e).getComputedStyle(e,null).getPropertyValue(n)}function oc(e){return e.trim().split(/^|\s+/)}function ou(e){return e.classList||new oh(e)}function oh(e){this._node=e,this._names=oc(e.getAttribute("class")||"")}function od(e,n){for(var r=ou(e),i=-1,o=n.length;++i<o;)r.add(n[i])}function of(e,n){for(var r=ou(e),i=-1,o=n.length;++i<o;)r.remove(n[i])}function op(){this.textContent=""}function om(){this.innerHTML=""}function og(){this.nextSibling&&this.parentNode.appendChild(this)}function oy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ov(e){var n=oa(e);return(n.local?function(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}:function(e){return function(){var n=this.ownerDocument,r=this.namespaceURI;return r===oi&&n.documentElement.namespaceURI===oi?n.createElement(e):n.createElementNS(r,e)}})(n)}function ob(){return null}function o_(){var e=this.parentNode;e&&e.removeChild(this)}function ow(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ox(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function ok(e){return function(){var n=this.__on;if(n){for(var r,i=0,o=-1,a=n.length;i<a;++i)(r=n[i],e.type&&r.type!==e.type||r.name!==e.name)?n[++o]=r:this.removeEventListener(r.type,r.listener,r.options);++o?n.length=o:delete this.__on}}}function oE(e,n,r){return function(){var i,o=this.__on,a=function(e){n.call(this,e,this.__data__)};if(o){for(var s=0,l=o.length;s<l;++s)if((i=o[s]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=r),i.value=n;return}}this.addEventListener(e.type,a,r),i={type:e.type,name:e.name,value:n,listener:a,options:r},o?o.push(i):this.__on=[i]}}function oA(e,n,r){var i=os(e),o=i.CustomEvent;"function"==typeof o?o=new o(n,r):(o=i.document.createEvent("Event"),r?(o.initEvent(n,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(n,!1,!1)),e.dispatchEvent(o)}oh.prototype={add:function(e){0>this._names.indexOf(e)&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var oO=[null];function oT(e,n){this._groups=e,this._parents=n}function oC(){return new oT([[document.documentElement]],oO)}function oP(e){return"string"==typeof e?new oT([[document.querySelector(e)]],[document.documentElement]):new oT([[e]],oO)}function oM(e,n){if(e=function(e){let n;for(;n=e.sourceEvent;)e=n;return e}(e),void 0===n&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,[(i=i.matrixTransform(n.getScreenCTM().inverse())).x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}oT.prototype=oC.prototype={constructor:oT,select:function(e){"function"!=typeof e&&(e=iQ(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s,l=n[o],c=l.length,u=i[o]=Array(c),h=0;h<c;++h)(a=l[h])&&(s=e.call(a,a.__data__,h,l))&&("__data__"in a&&(s.__data__=a.__data__),u[h]=s);return new oT(i,this._parents)},selectAll:function(e){if("function"==typeof e){var n;n=e,e=function(){var e;return e=n.apply(this,arguments),null==e?[]:Array.isArray(e)?e:Array.from(e)}}else e=i1(e);for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,h=0;h<u;++h)(l=c[h])&&(o.push(e.call(l,l.__data__,h,c)),a.push(l));return new oT(o,a)},selectChild:function(e){var n;return this.select(null==e?i4:(n="function"==typeof e?e:i3(e),function(){return i5.call(this.children,n)}))},selectChildren:function(e){var n;return this.selectAll(null==e?i8:(n="function"==typeof e?e:i3(e),function(){return i6.call(this.children,n)}))},filter:function(e){"function"!=typeof e&&(e=i2(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s=n[o],l=s.length,c=i[o]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&c.push(a);return new oT(i,this._parents)},data:function(e,n){if(!arguments.length)return Array.from(this,on);var r=n?ot:oe,i=this._parents,o=this._groups;"function"!=typeof e&&(b=e,e=function(){return b});for(var a=o.length,s=Array(a),l=Array(a),c=Array(a),u=0;u<a;++u){var h=i[u],d=o[u],f=d.length,p="object"==typeof(v=e.call(h,h&&h.__data__,u,i))&&"length"in v?v:Array.from(v),m=p.length,g=l[u]=Array(m),y=s[u]=Array(m);r(h,d,g,y,c[u]=Array(f),p,n);for(var v,b,_,w,x=0,k=0;x<m;++x)if(_=g[x]){for(x>=k&&(k=x+1);!(w=y[k])&&++k<m;);_._next=w||null}}return(s=new oT(s,i))._enter=l,s._exit=c,s},enter:function(){return new oT(this._enter||this._groups.map(i9),this._parents)},exit:function(){return new oT(this._exit||this._groups.map(i9),this._parents)},join:function(e,n,r){var i=this.enter(),o=this,a=this.exit();return"function"==typeof e?(i=e(i))&&(i=i.selection()):i=i.append(e+""),null!=n&&(o=n(o))&&(o=o.selection()),null==r?a.remove():r(a),i&&o?i.merge(o).order():o},merge:function(e){for(var n=e.selection?e.selection():e,r=this._groups,i=n._groups,o=r.length,a=i.length,s=Math.min(o,a),l=Array(o),c=0;c<s;++c)for(var u,h=r[c],d=i[c],f=h.length,p=l[c]=Array(f),m=0;m<f;++m)(u=h[m]||d[m])&&(p[m]=u);for(;c<o;++c)l[c]=r[c];return new oT(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,n=-1,r=e.length;++n<r;)for(var i,o=e[n],a=o.length-1,s=o[a];--a>=0;)(i=o[a])&&(s&&4^i.compareDocumentPosition(s)&&s.parentNode.insertBefore(i,s),s=i);return this},sort:function(e){function n(n,r){return n&&r?e(n.__data__,r.__data__):!n-!r}e||(e=or);for(var r=this._groups,i=r.length,o=Array(i),a=0;a<i;++a){for(var s,l=r[a],c=l.length,u=o[a]=Array(c),h=0;h<c;++h)(s=l[h])&&(u[h]=s);u.sort(n)}return new oT(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length;o<a;++o){var s=i[o];if(s)return s}return null},size:function(){let e=0;for(let n of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var n=this._groups,r=0,i=n.length;r<i;++r)for(var o,a=n[r],s=0,l=a.length;s<l;++s)(o=a[s])&&e.call(o,o.__data__,s,a);return this},attr:function(e,n){var r=oa(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((null==n?r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}}:"function"==typeof n?r.local?function(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}:function(e,n){return function(){var r=n.apply(this,arguments);null==r?this.removeAttribute(e):this.setAttribute(e,r)}}:r.local?function(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}:function(e,n){return function(){this.setAttribute(e,n)}})(r,n))},style:function(e,n,r){return arguments.length>1?this.each((null==n?function(e){return function(){this.style.removeProperty(e)}}:"function"==typeof n?function(e,n,r){return function(){var i=n.apply(this,arguments);null==i?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}:function(e,n,r){return function(){this.style.setProperty(e,n,r)}})(e,n,null==r?"":r)):ol(this.node(),e)},property:function(e,n){return arguments.length>1?this.each((null==n?function(e){return function(){delete this[e]}}:"function"==typeof n?function(e,n){return function(){var r=n.apply(this,arguments);null==r?delete this[e]:this[e]=r}}:function(e,n){return function(){this[e]=n}})(e,n)):this.node()[e]},classed:function(e,n){var r=oc(e+"");if(arguments.length<2){for(var i=ou(this.node()),o=-1,a=r.length;++o<a;)if(!i.contains(r[o]))return!1;return!0}return this.each(("function"==typeof n?function(e,n){return function(){(n.apply(this,arguments)?od:of)(this,e)}}:n?function(e){return function(){od(this,e)}}:function(e){return function(){of(this,e)}})(r,n))},text:function(e){return arguments.length?this.each(null==e?op:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.textContent=null==n?"":n}}:function(e){return function(){this.textContent=e}})(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?om:("function"==typeof e?function(e){return function(){var n=e.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(e){return function(){this.innerHTML=e}})(e)):this.node().innerHTML},raise:function(){return this.each(og)},lower:function(){return this.each(oy)},append:function(e){var n="function"==typeof e?e:ov(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(e,n){var r="function"==typeof e?e:ov(e),i=null==n?ob:"function"==typeof n?n:iQ(n);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})},remove:function(){return this.each(o_)},clone:function(e){return this.select(e?ox:ow)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,n,r){var i,o,a=(e+"").trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}}),s=a.length;if(arguments.length<2){var l=this.node().__on;if(l){for(var c,u=0,h=l.length;u<h;++u)for(i=0,c=l[u];i<s;++i)if((o=a[i]).type===c.type&&o.name===c.name)return c.value}return}for(i=0,l=n?oE:ok;i<s;++i)this.each(l(a[i],n,r));return this},dispatch:function(e,n){return this.each(("function"==typeof n?function(e,n){return function(){return oA(this,e,n.apply(this,arguments))}}:function(e,n){return function(){return oA(this,e,n)}})(e,n))},[Symbol.iterator]:function*(){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&(yield i)}};var oS,oD,oN,oj,oR,oL,oI,oz,oF,oB,oU,oV={},oH=[],oq=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,oG=Array.isArray;function oK(e,n){for(var r in n)e[r]=n[r];return e}function o$(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function oY(e,n,r,i,o){var a={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==o?++oN:o,__i:-1,__u:0};return null==o&&null!=oD.vnode&&oD.vnode(a),a}function oW(e){return e.children}function oX(e,n){this.props=e,this.context=n}function oZ(e,n){if(null==n)return e.__?oZ(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if(null!=(r=e.__k[n])&&null!=r.__e)return r.__e;return"function"==typeof e.type?oZ(e):null}function oJ(e){(!e.__d&&(e.__d=!0)&&oj.push(e)&&!oQ.__r++||oR!=oD.debounceRendering)&&((oR=oD.debounceRendering)||oL)(oQ)}function oQ(){for(var e,n,r,i,o,a,s=1;oj.length;)oj.length>s&&oj.sort(oI),e=oj.shift(),s=oj.length,e.__d&&(n=void 0,i=(r=e.__v).__e,o=[],a=[],e.__P&&((n=oK({},r)).__v=r.__v+1,oD.vnode&&oD.vnode(n),o5(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,o,null==i?oZ(r):i,!!(32&r.__u),a),n.__v=r.__v,n.__.__k[n.__i]=n,o4(o,n,a),n.__e!=i&&function e(n){var r,i;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,r=0;r<n.__k.length;r++)if(null!=(i=n.__k[r])&&null!=i.__e){n.__e=n.__c.base=i.__e;break}return e(n)}}(n)));oQ.__r=0}function o0(e,n,r,i,o,a,s,l,c,u,h){var d,f,p,m,g,y,v=i&&i.__k||oH,b=n.length;for(c=function(e,n,r,i,o){var a,s,l,c,u,h=r.length,d=h,f=0;for(e.__k=Array(o),a=0;a<o;a++)null!=(s=n[a])&&"boolean"!=typeof s&&"function"!=typeof s?(c=a+f,(s=e.__k[a]="string"==typeof s||"number"==typeof s||"bigint"==typeof s||s.constructor==String?oY(null,s,null,null,null):oG(s)?oY(oW,{children:s},null,null,null):null==s.constructor&&s.__b>0?oY(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=e,s.__b=e.__b+1,l=null,-1!=(u=s.__i=function(e,n,r,i){var o,a,s=e.key,l=e.type,c=n[r];if(null===c&&null==e.key||c&&s==c.key&&l==c.type&&0==(2&c.__u))return r;if(i>+(null!=c&&0==(2&c.__u)))for(o=r-1,a=r+1;o>=0||a<n.length;){if(o>=0){if((c=n[o])&&0==(2&c.__u)&&s==c.key&&l==c.type)return o;o--}if(a<n.length){if((c=n[a])&&0==(2&c.__u)&&s==c.key&&l==c.type)return a;a++}}return -1}(s,r,c,d))&&(d--,(l=r[u])&&(l.__u|=2)),null==l||null==l.__v?(-1==u&&(o>h?f--:o<h&&f++),"function"!=typeof s.type&&(s.__u|=4)):u!=c&&(u==c-1?f--:u==c+1?f++:(u>c?f--:f++,s.__u|=4))):e.__k[a]=null;if(d)for(a=0;a<h;a++)null!=(l=r[a])&&0==(2&l.__u)&&(l.__e==i&&(i=oZ(l)),function e(n,r,i){var o,a;if(oD.unmount&&oD.unmount(n),(o=n.ref)&&(o.current&&o.current!=n.__e||o6(o,null,r)),null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){oD.__e(e,r)}o.base=o.__P=null}if(o=n.__k)for(a=0;a<o.length;a++)o[a]&&e(o[a],r,i||"function"!=typeof n.type);i||o$(n.__e),n.__c=n.__=n.__e=void 0}(l,l));return i}(r,n,v,c,b),d=0;d<b;d++)null!=(p=r.__k[d])&&(f=-1==p.__i?oV:v[p.__i]||oV,p.__i=d,y=o5(e,p,f,o,a,s,l,c,u,h),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&o6(f.ref,null,p),h.push(p.ref,p.__c||m,p)),null==g&&null!=m&&(g=m),4&p.__u||f.__k===p.__k?c=function e(n,r,i){var o,a;if("function"==typeof n.type){for(o=n.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=n,r=e(o[a],r,i));return r}n.__e!=r&&(r&&n.type&&!i.contains(r)&&(r=oZ(n)),i.insertBefore(n.__e,r||null),r=n.__e);do r=r&&r.nextSibling;while(null!=r&&8==r.nodeType);return r}(p,c,e):"function"==typeof p.type&&void 0!==y?c=y:m&&(c=m.nextSibling),p.__u&=-7);return r.__e=g,c}function o1(e,n,r){"-"==n[0]?e.setProperty(n,null==r?"":r):e[n]=null==r?"":"number"!=typeof r||oq.test(n)?r:r+"px"}function o2(e,n,r,i,o){var a;e:if("style"==n)if("string"==typeof r)e.style.cssText=r;else{if("string"==typeof i&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||o1(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||o1(e.style,n,r[n])}else if("o"==n[0]&&"n"==n[1])a=n!=(n=n.replace(oz,"$1")),n=n.toLowerCase()in e||"onFocusOut"==n||"onFocusIn"==n?n.toLowerCase().slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?i?r.u=i.u:(r.u=oF,e.addEventListener(n,a?oU:oB,a)):e.removeEventListener(n,a?oU:oB,a);else{if("http://www.w3.org/2000/svg"==o)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=n&&"height"!=n&&"href"!=n&&"list"!=n&&"form"!=n&&"tabIndex"!=n&&"download"!=n&&"rowSpan"!=n&&"colSpan"!=n&&"role"!=n&&"popover"!=n&&n in e)try{e[n]=null==r?"":r;break e}catch(e){}"function"==typeof r||(null==r||!1===r&&"-"!=n[4]?e.removeAttribute(n):e.setAttribute(n,"popover"==n&&1==r?"":r))}}function o3(e){return function(n){if(this.l){var r=this.l[n.type+e];if(null==n.t)n.t=oF++;else if(n.t<r.u)return;return r(oD.event?oD.event(n):n)}}}function o5(e,n,r,i,o,a,s,l,c,u){var h,d,f,p,m,g,y,v,b,_,w,x,k,E,A,O,T,C=n.type;if(null!=n.constructor)return null;128&r.__u&&(c=!!(32&r.__u),a=[l=n.__e=r.__e]),(h=oD.__b)&&h(n);e:if("function"==typeof C)try{if(v=n.props,b="prototype"in C&&C.prototype.render,_=(h=C.contextType)&&i[h.__c],w=h?_?_.props.value:h.__:i,r.__c?y=(d=n.__c=r.__c).__=d.__E:(b?n.__c=d=new C(v,w):(n.__c=d=new oX(v,w),d.constructor=C,d.render=o8),_&&_.sub(d),d.props=v,d.state||(d.state={}),d.context=w,d.__n=i,f=d.__d=!0,d.__h=[],d._sb=[]),b&&null==d.__s&&(d.__s=d.state),b&&null!=C.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=oK({},d.__s)),oK(d.__s,C.getDerivedStateFromProps(v,d.__s))),p=d.props,m=d.state,d.__v=n,f)b&&null==C.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),b&&null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(b&&null==C.getDerivedStateFromProps&&v!==p&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(v,w),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(v,d.__s,w)||n.__v==r.__v){for(n.__v!=r.__v&&(d.props=v,d.state=d.__s,d.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(e){e&&(e.__=n)}),x=0;x<d._sb.length;x++)d.__h.push(d._sb[x]);d._sb=[],d.__h.length&&s.push(d);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(v,d.__s,w),b&&null!=d.componentDidUpdate&&d.__h.push(function(){d.componentDidUpdate(p,m,g)})}if(d.context=w,d.props=v,d.__P=e,d.__e=!1,k=oD.__r,E=0,b){for(d.state=d.__s,d.__d=!1,k&&k(n),h=d.render(d.props,d.state,d.context),A=0;A<d._sb.length;A++)d.__h.push(d._sb[A]);d._sb=[]}else do d.__d=!1,k&&k(n),h=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++E<25);d.state=d.__s,null!=d.getChildContext&&(i=oK(oK({},i),d.getChildContext())),b&&!f&&null!=d.getSnapshotBeforeUpdate&&(g=d.getSnapshotBeforeUpdate(p,m)),O=h,null!=h&&h.type===oW&&null==h.key&&(O=function e(n){return"object"!=typeof n||null==n||n.__b&&n.__b>0?n:oG(n)?n.map(e):oK({},n)}(h.props.children)),l=o0(e,oG(O)?O:[O],n,r,i,o,a,s,l,c,u),d.base=n.__e,n.__u&=-161,d.__h.length&&s.push(d),y&&(d.__E=d.__=null)}catch(e){if(n.__v=null,c||null!=a)if(e.then){for(n.__u|=c?160:128;l&&8==l.nodeType&&l.nextSibling;)l=l.nextSibling;a[a.indexOf(l)]=null,n.__e=l}else for(T=a.length;T--;)o$(a[T]);else n.__e=r.__e,n.__k=r.__k;oD.__e(e,n,r)}else null==a&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):l=n.__e=function(e,n,r,i,o,a,s,l,c){var u,h,d,f,p,m,g,y=r.props,v=n.props,b=n.type;if("svg"==b?o="http://www.w3.org/2000/svg":"math"==b?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),null!=a){for(u=0;u<a.length;u++)if((p=a[u])&&"setAttribute"in p==!!b&&(b?p.localName==b:3==p.nodeType)){e=p,a[u]=null;break}}if(null==e){if(null==b)return document.createTextNode(v);e=document.createElementNS(o,b,v.is&&v),l&&(oD.__m&&oD.__m(n,a),l=!1),a=null}if(null==b)y===v||l&&e.data==v||(e.data=v);else{if(a=a&&oS.call(e.childNodes),y=r.props||oV,!l&&null!=a)for(y={},u=0;u<e.attributes.length;u++)y[(p=e.attributes[u]).name]=p.value;for(u in y)if(p=y[u],"children"==u);else if("dangerouslySetInnerHTML"==u)d=p;else if(!(u in v)){if("value"==u&&"defaultValue"in v||"checked"==u&&"defaultChecked"in v)continue;o2(e,u,null,p,o)}for(u in v)p=v[u],"children"==u?f=p:"dangerouslySetInnerHTML"==u?h=p:"value"==u?m=p:"checked"==u?g=p:l&&"function"!=typeof p||y[u]===p||o2(e,u,p,y[u],o);if(h)l||d&&(h.__html==d.__html||h.__html==e.innerHTML)||(e.innerHTML=h.__html),n.__k=[];else if(d&&(e.innerHTML=""),o0("template"==n.type?e.content:e,oG(f)?f:[f],n,r,i,"foreignObject"==b?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&oZ(r,0),l,c),null!=a)for(u=a.length;u--;)o$(a[u]);l||(u="value","progress"==b&&null==m?e.removeAttribute("value"):null==m||m===e[u]&&("progress"!=b||m)&&("option"!=b||m==y[u])||o2(e,u,m,y[u],o),u="checked",null!=g&&g!=e[u]&&o2(e,u,g,y[u],o))}return e}(r.__e,n,r,i,o,a,s,c,u);return(h=oD.diffed)&&h(n),128&n.__u?void 0:l}function o4(e,n,r){for(var i=0;i<r.length;i++)o6(r[i],r[++i],r[++i]);oD.__c&&oD.__c(n,e),e.some(function(n){try{e=n.__h,n.__h=[],e.some(function(e){e.call(n)})}catch(e){oD.__e(e,n.__v)}})}function o6(e,n,r){try{if("function"==typeof e){var i="function"==typeof e.__u;i&&e.__u(),i&&null==n||(e.__u=e(n))}else e.current=n}catch(e){oD.__e(e,r)}}function o8(e,n,r){return this.constructor(e,r)}function o9(e,n,r){var i,o,a,s;n==document&&(n=document.documentElement),oD.__&&oD.__(e,n),o=(i="function"==typeof r)?null:r&&r.__k||n.__k,a=[],s=[],o5(n,e=(!i&&r||n).__k=function(e,n,r){var i,o,a,s={};for(a in n)"key"==a?i=n[a]:"ref"==a?o=n[a]:s[a]=n[a];if(arguments.length>2&&(s.children=arguments.length>3?oS.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)null==s[a]&&(s[a]=e.defaultProps[a]);return oY(e,s,i,o,null)}(oW,null,[e]),o||oV,oV,n.namespaceURI,!i&&r?[r]:o?null:n.firstChild?oS.call(n.childNodes):null,a,!i&&r?r:o?o.__e:n.firstChild,i,s),o4(a,e,s)}function o7(e,n){o9(e,n,o7)}function ae(e,n,r){var i,o,a,s,l=oK({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)"key"==a?i=n[a]:"ref"==a?o=n[a]:l[a]=null==n[a]&&null!=s?s[a]:n[a];return arguments.length>2&&(l.children=arguments.length>3?oS.call(arguments,2):r),oY(e.type,l,i||e.key,o||e.ref,null)}function at(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function an(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}oS=oH.slice,oD={__e:function(e,n,r,i){for(var o,a,s;n=n.__;)if((o=n.__c)&&!o.__)try{if((a=o.constructor)&&null!=a.getDerivedStateFromError&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(n){e=n}throw e}},oN=0,oX.prototype.setState=function(e,n){var r;r=null!=this.__s&&this.__s!=this.state?this.__s:this.__s=oK({},this.state),"function"==typeof e&&(e=e(oK({},r),this.props)),e&&oK(r,e),null!=e&&this.__v&&(n&&this._sb.push(n),oJ(this))},oX.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),oJ(this))},oX.prototype.render=oW,oj=[],oL="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,oI=function(e,n){return e.__v.__b-n.__v.__b},oQ.__r=0,oz=/(PointerCapture)$|Capture$/i,oF=0,oB=o3(!1),oU=o3(!0);var ai=function(e){if("object"!==ar(e))return e;var n,r=ae(e);return r.props&&(r.props=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?an(Object(r),!0).forEach(function(n){var i,o;i=n,o=r[n],(i=function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:n+""}(i))in e?Object.defineProperty(e,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):an(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}({},r.props),null!=r&&null!=(n=r.props)&&n.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(ai):ai(r.props.children))),r},ao=function(e){var n;return null!=(n=ae(e))&&null==n.constructor},aa=function(e,n){delete n.__k,o9(ai(e),n)};!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".float-tooltip-kap {\n  position: absolute;\n  width: max-content; /* prevent shrinking near right edge */\n  max-width: max(50%, 150px);\n  padding: 3px 5px;\n  border-radius: 3px;\n  font: 12px sans-serif;\n  color: #eee;\n  background: rgba(0,0,0,0.6);\n  pointer-events: none;\n}\n");var as=eQ({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.style,o=oP(e&&"object"===ar(e)&&e.node&&"function"==typeof e.node?e.node():e);"static"===o.style("position")&&o.style("position","relative"),n.tooltipEl=o.append("div").attr("class","float-tooltip-kap"),Object.entries(void 0===i?{}:i).forEach(function(e){var r=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,2)||function(e,n){if(e){if("string"==typeof e)return at(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,n):void 0}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=r[0],o=r[1];return n.tooltipEl.style(i,o)}),n.tooltipEl.style("left","-10000px").style("display","none");var a="tooltip-".concat(Math.round(1e12*Math.random()));n.mouseInside=!1,o.on("mousemove.".concat(a),function(e){n.mouseInside=!0;var r=oM(e),i=o.node(),a=i.offsetWidth,s=i.offsetHeight,l=[null===n.offsetX||void 0===n.offsetX?"-".concat(r[0]/a*100,"%"):"number"==typeof n.offsetX?"calc(-50% + ".concat(n.offsetX,"px)"):n.offsetX,null===n.offsetY||void 0===n.offsetY?s>130&&s-r[1]<100?"calc(-100% - 6px)":"21px":"number"==typeof n.offsetY?n.offsetY<0?"calc(-100% - ".concat(Math.abs(n.offsetY),"px)"):"".concat(n.offsetY,"px"):n.offsetY];n.tooltipEl.style("left",r[0]+"px").style("top",r[1]+"px").style("transform","translate(".concat(l.join(","),")")),n.content&&n.tooltipEl.style("display","inline")}),o.on("mouseover.".concat(a),function(){n.mouseInside=!0,n.content&&n.tooltipEl.style("display","inline")}),o.on("mouseout.".concat(a),function(){n.mouseInside=!1,n.tooltipEl.style("display","none")})},update:function(e){e.tooltipEl.style("display",e.content&&e.mouseInside?"inline":"none"),e.content?e.content instanceof HTMLElement?(e.tooltipEl.text(""),e.tooltipEl.append(function(){return e.content})):"string"==typeof e.content?e.tooltipEl.html(e.content):ao(e.content)?(e.tooltipEl.text(""),aa(e.content,e.tooltipEl.node())):(e.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",e.content,e.content.toString())):e.tooltipEl.text("")}});function al(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function ac(e){return function(e){if(Array.isArray(e))return al(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||au(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function au(e,n){if(e){if("string"==typeof e)return al(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?al(e,n):void 0}}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".scene-nav-info {\n  position: absolute;\n  bottom: 5px;\n  width: 100%;\n  text-align: center;\n  color: slategrey;\n  opacity: 0.7;\n  font-size: 10px;\n  font-family: sans-serif;\n  pointer-events: none;\n  user-select: none;\n}\n\n.scene-container canvas:focus {\n  outline: none;\n}");var ah=window.THREE?window.THREE:{WebGLRenderer:rN.JeP,Scene:m.Z58,PerspectiveCamera:m.ubm,Raycaster:m.tBo,SRGBColorSpace:m.er$,TextureLoader:m.Tap,Vector2:m.I9Y,Vector3:m.Pq0,Box3:m.NRn,Color:m.Q1f,Mesh:m.eaF,SphereGeometry:m.Gu$,MeshBasicMaterial:m.V9B,BackSide:m.hsX,Clock:m.zD7},ad=eQ({props:{width:{default:window.innerWidth,onChange:function(e,n,r){isNaN(e)&&(n.width=r)}},height:{default:window.innerHeight,onChange:function(e,n,r){isNaN(e)&&(n.height=r)}},viewOffset:{default:[0,0]},backgroundColor:{default:"#000011"},backgroundImageUrl:{},onBackgroundImageLoaded:{},showNavInfo:{default:!0},skyRadius:{default:5e4},objects:{default:[]},lights:{default:[]},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null,n.tooltip&&n.tooltip.content(null)},triggerUpdate:!1},pointerRaycasterThrottleMs:{default:50,triggerUpdate:!1},lineHoverPrecision:{default:1,triggerUpdate:!1},pointsHoverPrecision:{default:1,triggerUpdate:!1},hoverOrderComparator:{triggerUpdate:!1},hoverFilter:{default:function(){return!0},triggerUpdate:!1},tooltipContent:{triggerUpdate:!1},hoverDuringDrag:{default:!1,triggerUpdate:!1},clickAfterDrag:{default:!1,triggerUpdate:!1},onHover:{default:function(){},triggerUpdate:!1},onClick:{default:function(){},triggerUpdate:!1},onRightClick:{triggerUpdate:!1}},methods:{tick:function(e){if(e.initialised){e.controls.update&&e.controls.update(Math.min(1,e.clock.getDelta())),e.postProcessingComposer?e.postProcessingComposer.render():e.renderer.render(e.scene,e.camera),e.extraRenderers.forEach(function(n){return n.render(e.scene,e.camera)});var n=+new Date;if(e.enablePointerInteraction&&n-e.lastRaycasterCheck>=e.pointerRaycasterThrottleMs){e.lastRaycasterCheck=n;var r=null;if(e.hoverDuringDrag||!e.isPointerDragging){var i=this.intersectingObjects(e.pointerPos.x,e.pointerPos.y);e.hoverOrderComparator&&i.sort(function(n,r){return e.hoverOrderComparator(n.object,r.object)});var o=i.find(function(n){return e.hoverFilter(n.object)})||null;r=o?o.object:null,e.intersection=o||null}r!==e.hoverObj&&(e.onHover(r,e.hoverObj,e.intersection),e.tooltip.content(r&&e0(e.tooltipContent)(r,e.intersection)||null),e.hoverObj=r)}e.tweenGroup.update()}return this},getPointerPos:function(e){var n=e.pointerPos;return{x:n.x,y:n.y}},cameraPosition:function(e,n,r,i){var o=e.camera;if(n&&e.initialised){var a=r||{x:0,y:0,z:0};if(i){var s=Object.assign({},o.position),l=h();e.tweenGroup.add(new iZ(s).to(n,i).easing(iG.Quadratic.Out).onUpdate(c).start()),e.tweenGroup.add(new iZ(l).to(a,i/3).easing(iG.Quadratic.Out).onUpdate(u).start())}else c(n),u(a);return this}return Object.assign({},o.position,{lookAt:h()});function c(e){var n=e.x,r=e.y,i=e.z;void 0!==n&&(o.position.x=n),void 0!==r&&(o.position.y=r),void 0!==i&&(o.position.z=i)}function u(n){var r=new ah.Vector3(n.x,n.y,n.z);e.controls.target?e.controls.target=r:o.lookAt(r)}function h(){return Object.assign(new ah.Vector3(0,0,-1e3).applyQuaternion(o.quaternion).add(o.position))}},zoomToFit:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return this.fitToBbox(this.getBbox.apply(this,o),n,r)},fitToBbox:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=e.camera;if(n){var a=new ah.Vector3(0,0,0),s=2*Math.max.apply(Math,ac(Object.entries(n).map(function(e){var n=function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,2)||au(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=n[0],i=n[1];return Math.max.apply(Math,ac(i.map(function(e){return Math.abs(a[r]-e)})))})))/Math.atan((1-2*i/e.height)*o.fov*Math.PI/180),l=s/o.aspect,c=Math.max(s,l);if(c>0){var u=a.clone().sub(o.position).normalize().multiplyScalar(-c);this.cameraPosition(u,a,r)}}return this},getBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=new ah.Box3(new ah.Vector3(0,0,0),new ah.Vector3(0,0,0)),i=e.objects.filter(n);return i.length?(i.forEach(function(e){return r.expandByObject(e)}),Object.assign.apply(Object,ac(["x","y","z"].map(function(e){var n,i,o,a;return n={},i=e,o=[r.min[e],r.max[e]],(i="symbol"==typeof(a=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(i,"string"))?a:a+"")in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n})))):null},getScreenCoords:function(e,n,r,i){var o=new ah.Vector3(n,r,i);return o.project(this.camera()),{x:(o.x+1)*e.width/2,y:-(o.y-1)*e.height/2}},getSceneCoords:function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new ah.Vector2(n/e.width*2-1,-(2*(r/e.height))+1),a=new ah.Raycaster;return a.setFromCamera(o,e.camera),Object.assign({},a.ray.at(i,new ah.Vector3))},intersectingObjects:function(e,n,r){var i=new ah.Vector2(n/e.width*2-1,-(2*(r/e.height))+1),o=new ah.Raycaster;return o.params.Line.threshold=e.lineHoverPrecision,o.params.Points.threshold=e.pointsHoverPrecision,o.setFromCamera(i,e.camera),o.intersectObjects(e.objects,!0)},renderer:function(e){return e.renderer},scene:function(e){return e.scene},camera:function(e){return e.camera},postProcessingComposer:function(e){return e.postProcessingComposer},controls:function(e){return e.controls},tbControls:function(e){return e.controls}},stateInit:function(){return{scene:new ah.Scene,camera:new ah.PerspectiveCamera,clock:new ah.Clock,tweenGroup:new i$,lastRaycasterCheck:0}},init:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.controlType,o=void 0===i?"trackball":i,a=r.useWebGPU,s=r.rendererConfig,l=r.extraRenderers,c=r.waitForLoadComplete;e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.className="scene-container",n.container.style.position="relative",n.container.appendChild(n.navInfo=document.createElement("div")),n.navInfo.className="scene-nav-info",n.navInfo.textContent=({orbit:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",trackball:"Left-click: rotate, Mouse-wheel/middle-click: zoom, Right-click: pan",fly:"WASD: move, R|F: up | down, Q|E: roll, up|down: pitch, left|right: yaw"})[o]||"",n.navInfo.style.display=n.showNavInfo?null:"none",n.tooltip=new as(n.container),n.pointerPos=new ah.Vector2,n.pointerPos.x=-2,n.pointerPos.y=-2,["pointermove","pointerdown"].forEach(function(e){return n.container.addEventListener(e,function(r){if("pointerdown"===e&&(n.isPointerPressed=!0),!n.isPointerDragging&&"pointermove"===r.type&&(r.pressure>0||n.isPointerPressed)&&("touch"!==r.pointerType||void 0===r.movementX||[r.movementX,r.movementY].some(function(e){return Math.abs(e)>1}))&&(n.isPointerDragging=!0),n.enablePointerInteraction){var i,o,a,s=(i=n.container.getBoundingClientRect(),o=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop,{top:i.top+a,left:i.left+o});n.pointerPos.x=r.pageX-s.left,n.pointerPos.y=r.pageY-s.top}},{passive:!0})}),n.container.addEventListener("pointerup",function(e){n.isPointerPressed=!1,(!n.isPointerDragging||(n.isPointerDragging=!1,n.clickAfterDrag))&&requestAnimationFrame(function(){0===e.button&&n.onClick(n.hoverObj||null,e,n.intersection),2===e.button&&n.onRightClick&&n.onRightClick(n.hoverObj||null,e,n.intersection)})},{passive:!0,capture:!0}),n.container.addEventListener("contextmenu",function(e){n.onRightClick&&e.preventDefault()}),n.renderer=new(void 0!==a&&a?rj.uV1:ah.WebGLRenderer)(Object.assign({antialias:!0,alpha:!0},void 0===s?{}:s)),n.renderer.setPixelRatio(Math.min(2,window.devicePixelRatio)),n.container.appendChild(n.renderer.domElement),n.extraRenderers=void 0===l?[]:l,n.extraRenderers.forEach(function(e){e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.pointerEvents="none",n.container.appendChild(e.domElement)}),n.postProcessingComposer=new iH(n.renderer),n.postProcessingComposer.addPass(new iq(n.scene,n.camera)),n.controls=new({trackball:rW,orbit:iu,fly:iO})[o](n.camera,n.renderer.domElement),"fly"===o&&(n.controls.movementSpeed=300,n.controls.rollSpeed=Math.PI/6,n.controls.dragToLook=!0),("trackball"===o||"orbit"===o)&&(n.controls.minDistance=.1,n.controls.maxDistance=n.skyRadius,n.controls.addEventListener("start",function(){n.controlsEngaged=!0}),n.controls.addEventListener("change",function(){n.controlsEngaged&&(n.controlsDragging=!0)}),n.controls.addEventListener("end",function(){n.controlsEngaged=!1,n.controlsDragging=!1})),[n.renderer,n.postProcessingComposer].concat(ac(n.extraRenderers)).forEach(function(e){return e.setSize(n.width,n.height)}),n.camera.aspect=n.width/n.height,n.camera.updateProjectionMatrix(),n.camera.position.z=1e3,n.scene.add(n.skysphere=new ah.Mesh),n.skysphere.visible=!1,n.loadComplete=n.scene.visible=!(void 0===c||c),window.scene=n.scene},update:function(e,n){if(e.width&&e.height&&(n.hasOwnProperty("width")||n.hasOwnProperty("height"))){var r,i=e.width,o=e.height;e.container.style.width="".concat(i,"px"),e.container.style.height="".concat(o,"px"),[e.renderer,e.postProcessingComposer].concat(ac(e.extraRenderers)).forEach(function(e){return e.setSize(i,o)}),e.camera.aspect=i/o;var a=e.viewOffset.slice(0,2);a.some(function(e){return e})&&(r=e.camera).setViewOffset.apply(r,[i,o].concat(ac(a),[i,o])),e.camera.updateProjectionMatrix()}if(n.hasOwnProperty("viewOffset")){var s,l=e.width,c=e.height,u=e.viewOffset.slice(0,2);u.some(function(e){return e})?(s=e.camera).setViewOffset.apply(s,[l,c].concat(ac(u),[l,c])):e.camera.clearViewOffset()}if(n.hasOwnProperty("skyRadius")&&e.skyRadius&&(e.controls.hasOwnProperty("maxDistance")&&n.skyRadius&&(e.controls.maxDistance=Math.min(e.controls.maxDistance,e.skyRadius)),e.camera.far=2.5*e.skyRadius,e.camera.updateProjectionMatrix(),e.skysphere.geometry=new ah.SphereGeometry(e.skyRadius)),n.hasOwnProperty("backgroundColor")){var h=n$(e.backgroundColor).alpha;void 0===h&&(h=1),e.renderer.setClearColor(new ah.Color(n6(1,e.backgroundColor)),h)}function d(){e.loadComplete=e.scene.visible=!0}n.hasOwnProperty("backgroundImageUrl")&&(e.backgroundImageUrl?new ah.TextureLoader().load(e.backgroundImageUrl,function(n){n.colorSpace=ah.SRGBColorSpace,e.skysphere.material=new ah.MeshBasicMaterial({map:n,side:ah.BackSide}),e.skysphere.visible=!0,e.onBackgroundImageLoaded&&setTimeout(e.onBackgroundImageLoaded),e.loadComplete||d()}):(e.skysphere.visible=!1,e.skysphere.material.map=null,e.loadComplete||d())),n.hasOwnProperty("showNavInfo")&&(e.navInfo.style.display=e.showNavInfo?null:"none"),n.hasOwnProperty("lights")&&((n.lights||[]).forEach(function(n){return e.scene.remove(n)}),e.lights.forEach(function(n){return e.scene.add(n)})),n.hasOwnProperty("objects")&&((n.objects||[]).forEach(function(n){return e.scene.remove(n)}),e.objects.forEach(function(n){return e.scene.add(n)}))}});function af(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function ap(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:i+"")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function am(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function ag(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?am(Object(r),!0).forEach(function(n){ap(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):am(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ay(e){return function(e){if(Array.isArray(e))return af(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return af(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?af(e,n):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function av(e,n){var r=new n;return r._destructor&&r._destructor(),{linkProp:function(n){return{default:r[n](),onChange:function(r,i){i[e][n](r)},triggerUpdate:!1}},linkMethod:function(n){return function(r){for(var i=r[e],o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var l=i[n].apply(i,a);return l===i?this:l}}}}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".graph-info-msg {\n  top: 50%;\n  width: 100%;\n  text-align: center;\n  color: lavender;\n  opacity: 0.7;\n  font-size: 22px;\n  position: absolute;\n  font-family: Sans-serif;\n}\n\n.scene-container .clickable {\n  cursor: pointer;\n}\n\n.scene-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.scene-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}");var ab=window.THREE?window.THREE:{AmbientLight:m.$p8,DirectionalLight:m.ZyN,REVISION:m.sPf},a_=av("forceGraph",ng),aw=Object.assign.apply(Object,ay(["jsonUrl","graphData","numDimensions","dagMode","dagLevelDistance","dagNodeFilter","onDagError","nodeRelSize","nodeId","nodeVal","nodeResolution","nodeColor","nodeAutoColorBy","nodeOpacity","nodeVisibility","nodeThreeObject","nodeThreeObjectExtend","nodePositionUpdate","linkSource","linkTarget","linkVisibility","linkColor","linkAutoColorBy","linkOpacity","linkWidth","linkResolution","linkCurvature","linkCurveRotation","linkMaterial","linkThreeObject","linkThreeObjectExtend","linkPositionUpdate","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalArrowResolution","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleResolution","forceEngine","d3AlphaDecay","d3VelocityDecay","d3AlphaMin","ngraphPhysics","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return ap({},e,a_.linkProp(e))}))),ax=Object.assign.apply(Object,ay(["refresh","getGraphBbox","d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return ap({},e,a_.linkMethod(e))}))),ak=av("renderObjs",ad),aE=Object.assign.apply(Object,ay(["width","height","backgroundColor","showNavInfo","enablePointerInteraction"].map(function(e){return ap({},e,ak.linkProp(e))}))),aA=Object.assign.apply(Object,ay(["lights","cameraPosition","postProcessingComposer"].map(function(e){return ap({},e,ak.linkMethod(e))})).concat([{graph2ScreenCoords:ak.linkMethod("getScreenCoords"),screen2GraphCoords:ak.linkMethod("getSceneCoords")}])),aO=eQ({props:ag(ag({nodeLabel:{default:"name",triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:1,onChange:function(e,n){return n.renderObjs.lineHoverPrecision(e)},triggerUpdate:!1},enableNavigationControls:{default:!0,onChange:function(e,n){var r=n.renderObjs.controls();r&&(r.enabled=e,e&&r.domElement&&r.domElement.dispatchEvent(new PointerEvent("pointerup")))},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1}},aw),aE),methods:ag(ag({zoomToFit:function(e,n,r){for(var i,o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];return e.renderObjs.fitToBbox((i=e.forceGraph).getGraphBbox.apply(i,a),n,r),this},pauseAnimation:function(e){return null!==e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return null===e.animationFrameRequestId&&this._animationCycle(),this},_animationCycle:function(e){e.enablePointerInteraction&&(this.renderer().domElement.style.cursor=null),e.forceGraph.tickFrame(),e.renderObjs.tick(),e.animationFrameRequestId=requestAnimationFrame(this._animationCycle)},scene:function(e){return e.renderObjs.scene()},camera:function(e){return e.renderObjs.camera()},renderer:function(e){return e.renderObjs.renderer()},controls:function(e){return e.renderObjs.controls()},tbControls:function(e){return e.renderObjs.tbControls()},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},ax),aA),stateInit:function(e){var n=e.controlType,r=e.rendererConfig,i=e.extraRenderers,o=new ng;return{forceGraph:o,renderObjs:ad({controlType:n,rendererConfig:r,extraRenderers:i}).objects([o]).lights([new ab.AmbientLight(0xcccccc,Math.PI),new ab.DirectionalLight(0xffffff,.6*Math.PI)])}},init:function(e,n){e.innerHTML="",e.appendChild(n.container=document.createElement("div")),n.container.style.position="relative";var r,i=document.createElement("div");n.container.appendChild(i),n.renderObjs(i);var o=n.renderObjs.camera(),a=n.renderObjs.renderer(),s=n.renderObjs.controls();s.enabled=!!n.enableNavigationControls,n.lastSetCameraZ=o.position.z,n.container.appendChild(r=document.createElement("div")),r.className="graph-info-msg",r.textContent="",n.forceGraph.onLoading(function(){r.textContent="Loading..."}).onFinishLoading(function(){r.textContent=""}).onUpdate(function(){n.graphData=n.forceGraph.graphData(),0===o.position.x&&0===o.position.y&&o.position.z===n.lastSetCameraZ&&n.graphData.nodes.length&&(o.lookAt(n.forceGraph.position),n.lastSetCameraZ=o.position.z=170*Math.cbrt(n.graphData.nodes.length))}).onFinishUpdate(function(){if(n._dragControls){var e=n.graphData.nodes.find(function(e){return e.__initialFixedPos&&!e.__disposeControlsAfterDrag});e?e.__disposeControlsAfterDrag=!0:n._dragControls.dispose(),n._dragControls=void 0}if(n.enableNodeDrag&&n.enablePointerInteraction&&"d3"===n.forceEngine){var r=n._dragControls=new rC(n.graphData.nodes.map(function(e){return e.__threeObj}).filter(function(e){return e}),o,a.domElement);r.addEventListener("dragstart",function(e){var n=aT(e.object);if(n){s.enabled=!1,e.object.__initialPos=e.object.position.clone(),e.object.__prevPos=e.object.position.clone();var r=n.__data;r.__initialFixedPos||(r.__initialFixedPos={fx:r.fx,fy:r.fy,fz:r.fz}),r.__initialPos||(r.__initialPos={x:r.x,y:r.y,z:r.z}),["x","y","z"].forEach(function(e){return r["f".concat(e)]=r[e]}),a.domElement.classList.add("grabbable")}}),r.addEventListener("drag",function(e){var r=aT(e.object);if(r){if(!e.object.hasOwnProperty("__graphObjType")){var i=e.object.__initialPos,o=e.object.__prevPos,a=e.object.position;r.position.add(a.clone().sub(o)),o.copy(a),a.copy(i)}var s=r.__data,l=r.position,c={x:l.x-s.x,y:l.y-s.y,z:l.z-s.z};["x","y","z"].forEach(function(e){return s["f".concat(e)]=s[e]=l[e]}),n.forceGraph.d3AlphaTarget(.3).resetCountdown(),s.__dragged=!0,n.onNodeDrag(s,c)}}),r.addEventListener("dragend",function(e){var i=aT(e.object);if(i){delete e.object.__initialPos,delete e.object.__prevPos;var o=i.__data;o.__disposeControlsAfterDrag&&(r.dispose(),delete o.__disposeControlsAfterDrag);var l=o.__initialFixedPos,c=o.__initialPos,u={x:c.x-o.x,y:c.y-o.y,z:c.z-o.z};l&&(["x","y","z"].forEach(function(e){var n="f".concat(e);void 0===l[n]&&delete o[n]}),delete o.__initialFixedPos,delete o.__initialPos,o.__dragged&&(delete o.__dragged,n.onNodeDragEnd(o,u))),n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.enableNavigationControls&&(s.enabled=!0,s.domElement&&s.domElement.ownerDocument&&s.domElement.ownerDocument.dispatchEvent(new PointerEvent("pointerup",{pointerType:"touch"}))),a.domElement.classList.remove("grabbable")}})}}),ab.REVISION<155&&(n.renderObjs.renderer().useLegacyLights=!1),n.renderObjs.hoverOrderComparator(function(e,n){var r=aT(e);if(!r)return 1;var i=aT(n);if(!i)return -1;var o=function(e){return"node"===e.__graphObjType};return o(i)-o(r)}).tooltipContent(function(e){var r=aT(e);return r&&e0(n["".concat(r.__graphObjType,"Label")])(r.__data)||""}).hoverDuringDrag(!1).onHover(function(e){var r=aT(e);if(r!==n.hoverObj){var i=n.hoverObj?n.hoverObj.__graphObjType:null,o=n.hoverObj?n.hoverObj.__data:null,s=r?r.__graphObjType:null,l=r?r.__data:null;if(i&&i!==s){var c=n["on".concat("node"===i?"Node":"Link","Hover")];c&&c(null,o)}if(s){var u=n["on".concat("node"===s?"Node":"Link","Hover")];u&&u(l,i===s?o:null)}a.domElement.classList[r&&n["on".concat("node"===s?"Node":"Link","Click")]||!r&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=r}}).clickAfterDrag(!1).onClick(function(e,r){var i=aT(e);if(i){var o=n["on".concat("node"===i.__graphObjType?"Node":"Link","Click")];o&&o(i.__data,r)}else n.onBackgroundClick&&n.onBackgroundClick(r)}).onRightClick(function(e,r){var i=aT(e);if(i){var o=n["on".concat("node"===i.__graphObjType?"Node":"Link","RightClick")];o&&o(i.__data,r)}else n.onBackgroundRightClick&&n.onBackgroundRightClick(r)}),this._animationCycle()}});function aT(e){for(var n=e;n&&!n.hasOwnProperty("__graphObjType");)n=n.parent;return n}let aC={passive:!1},aP={capture:!0,passive:!1};function aM(e){e.stopImmediatePropagation()}function aS(e){e.preventDefault(),e.stopImmediatePropagation()}function aD(e){var n=e.document.documentElement,r=oP(e).on("dragstart.drag",aS,aP);"onselectstart"in n?r.on("selectstart.drag",aS,aP):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function aN(e,n){var r=e.document.documentElement,i=oP(e).on("dragstart.drag",null);n&&(i.on("click.drag",aS,aP),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}function aj(e){return((e=Math.exp(e))+1/e)/2}let aR=function e(n,r,i){function o(e,o){var a,s,l=e[0],c=e[1],u=e[2],h=o[0],d=o[1],f=o[2],p=h-l,m=d-c,g=p*p+m*m;if(g<1e-12)s=Math.log(f/u)/n,a=function(e){return[l+e*p,c+e*m,u*Math.exp(n*e*s)]};else{var y=Math.sqrt(g),v=(f*f-u*u+i*g)/(2*u*r*y),b=(f*f-u*u-i*g)/(2*f*r*y),_=Math.log(Math.sqrt(v*v+1)-v);s=(Math.log(Math.sqrt(b*b+1)-b)-_)/n,a=function(e){var i,o,a=e*s,h=aj(_),d=u/(r*y)*(h*(((i=Math.exp(2*(i=n*a+_)))-1)/(i+1))-((o=Math.exp(o=_))-1/o)/2);return[l+d*p,c+d*m,u*h/aj(n*a+_)]}}return a.duration=1e3*s*n/Math.SQRT2,a}return o.rho=function(n){var r=Math.max(.001,+n),i=r*r;return e(r,i,i*i)},o}(Math.SQRT2,2,4);function aL(e,n,r){var i=new D;return n=null==n?0:+n,i.restart(r=>{i.stop(),e(r+n)},n,r),i}var aI=y("start","end","cancel","interrupt"),az=[];function aF(e,n,r,i,o,a){var s=e.__transition;if(s){if(r in s)return}else e.__transition={};!function(e,n,r){var i,o=e.__transition;function a(c){var u,h,d,f;if(1!==r.state)return l();for(u in o)if((f=o[u]).name===r.name){if(3===f.state)return aL(a);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete o[u]):+u<n&&(f.state=6,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete o[u])}if(aL(function(){3===r.state&&(r.state=4,r.timer.restart(s,r.delay,r.time),s(c))}),r.state=2,r.on.call("start",e,e.__data__,r.index,r.group),2===r.state){for(u=0,r.state=3,i=Array(d=r.tween.length),h=-1;u<d;++u)(f=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(i[++h]=f);i.length=h+1}}function s(n){for(var o=n<r.duration?r.ease.call(null,n/r.duration):(r.timer.restart(l),r.state=5,1),a=-1,s=i.length;++a<s;)i[a].call(e,o);5===r.state&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){for(var i in r.state=6,r.timer.stop(),delete o[n],o)return;delete e.__transition}o[n]=r,r.timer=N(function(e){r.state=1,r.timer.restart(a,r.delay,r.time),r.delay<=e&&a(e-r.delay)},0,r.time)}(e,r,{name:n,index:i,group:o,on:aI,tween:az,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function aB(e,n){var r=aV(e,n);if(r.state>0)throw Error("too late; already scheduled");return r}function aU(e,n){var r=aV(e,n);if(r.state>3)throw Error("too late; already running");return r}function aV(e,n){var r=e.__transition;if(!r||!(r=r[n]))throw Error("transition not found");return r}function aH(e,n){var r,i,o,a=e.__transition,s=!0;if(a){for(o in n=null==n?null:n+"",a){if((r=a[o]).name!==n){s=!1;continue}i=r.state>2&&r.state<5,r.state=6,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete a[o]}s&&delete e.__transition}}function aq(e,n){return e*=1,n*=1,function(r){return e*(1-r)+n*r}}var aG=180/Math.PI,aK={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function a$(e,n,r,i,o,a){var s,l,c;return(s=Math.sqrt(e*e+n*n))&&(e/=s,n/=s),(c=e*r+n*i)&&(r-=e*c,i-=n*c),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,c/=l),e*i<n*r&&(e=-e,n=-n,c=-c,s=-s),{translateX:o,translateY:a,rotate:Math.atan2(n,e)*aG,skewX:Math.atan(c)*aG,scaleX:s,scaleY:l}}function aY(e,n,r,i){function o(e){return e.length?e.pop()+" ":""}return function(a,s){var l,c,u,h,d=[],f=[];return a=e(a),s=e(s),!function(e,i,o,a,s,l){if(e!==o||i!==a){var c=s.push("translate(",null,n,null,r);l.push({i:c-4,x:aq(e,o)},{i:c-2,x:aq(i,a)})}else(o||a)&&s.push("translate("+o+n+a+r)}(a.translateX,a.translateY,s.translateX,s.translateY,d,f),l=a.rotate,c=s.rotate,l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),f.push({i:d.push(o(d)+"rotate(",null,i)-2,x:aq(l,c)})):c&&d.push(o(d)+"rotate("+c+i),u=a.skewX,h=s.skewX,u!==h?f.push({i:d.push(o(d)+"skewX(",null,i)-2,x:aq(u,h)}):h&&d.push(o(d)+"skewX("+h+i),!function(e,n,r,i,a,s){if(e!==r||n!==i){var l=a.push(o(a)+"scale(",null,",",null,")");s.push({i:l-4,x:aq(e,r)},{i:l-2,x:aq(n,i)})}else(1!==r||1!==i)&&a.push(o(a)+"scale("+r+","+i+")")}(a.scaleX,a.scaleY,s.scaleX,s.scaleY,d,f),a=s=null,function(e){for(var n,r=-1,i=f.length;++r<i;)d[(n=f[r]).i]=n.x(e);return d.join("")}}}var aW=aY(function(e){let n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?aK:a$(n.a,n.b,n.c,n.d,n.e,n.f)},"px, ","px)","deg)"),aX=aY(function(e){return null==e?aK:(i||(i=document.createElementNS("http://www.w3.org/2000/svg","g")),i.setAttribute("transform",e),e=i.transform.baseVal.consolidate())?a$((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):aK},", ",")",")");function aZ(e,n,r){var i=e._id;return e.each(function(){var e=aU(this,i);(e.value||(e.value={}))[n]=r.apply(this,arguments)}),function(e){return aV(e,i).value[n]}}var aJ=r(84237);function aQ(e,n,r,i,o){var a=e*e,s=a*e;return((1-3*e+3*a-s)*n+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*i+s*o)/6}let a0=e=>()=>e;function a1(e,n){var r,i,o=n-e;return o?(r=e,i=o,function(e){return r+e*i}):a0(isNaN(e)?n:e)}let a2=function e(n){var r,i=1==(r=+n)?a1:function(e,n){var i,o,a;return n-e?(i=e,o=n,i=Math.pow(i,a=r),o=Math.pow(o,a)-i,a=1/a,function(e){return Math.pow(i+e*o,a)}):a0(isNaN(e)?n:e)};function o(e,n){var r=i((e=(0,aJ.Qh)(e)).r,(n=(0,aJ.Qh)(n)).r),o=i(e.g,n.g),a=i(e.b,n.b),s=a1(e.opacity,n.opacity);return function(n){return e.r=r(n),e.g=o(n),e.b=a(n),e.opacity=s(n),e+""}}return o.gamma=e,o}(1);function a3(e){return function(n){var r,i,o=n.length,a=Array(o),s=Array(o),l=Array(o);for(r=0;r<o;++r)i=(0,aJ.Qh)(n[r]),a[r]=i.r||0,s[r]=i.g||0,l[r]=i.b||0;return a=e(a),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=l(e),i+""}}}a3(function(e){var n=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,n-1):Math.floor(r*n),o=e[i],a=e[i+1],s=i>0?e[i-1]:2*o-a,l=i<n-1?e[i+2]:2*a-o;return aQ((r-i/n)*n,s,o,a,l)}}),a3(function(e){var n=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*n),o=e[(i+n-1)%n],a=e[i%n],s=e[(i+1)%n],l=e[(i+2)%n];return aQ((r-i/n)*n,o,a,s,l)}});var a5=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a4=RegExp(a5.source,"g");function a6(e,n){var r;return("number"==typeof n?aq:n instanceof aJ.Ay?a2:(r=(0,aJ.Ay)(n))?(n=r,a2):function(e,n){var r,i,o,a,s,l=a5.lastIndex=a4.lastIndex=0,c=-1,u=[],h=[];for(e+="",n+="";(o=a5.exec(e))&&(a=a4.exec(n));)(s=a.index)>l&&(s=n.slice(l,s),u[c]?u[c]+=s:u[++c]=s),(o=o[0])===(a=a[0])?u[c]?u[c]+=a:u[++c]=a:(u[++c]=null,h.push({i:c,x:aq(o,a)})),l=a4.lastIndex;return l<n.length&&(s=n.slice(l),u[c]?u[c]+=s:u[++c]=s),u.length<2?h[0]?(r=h[0].x,function(e){return r(e)+""}):(i=n,function(){return i}):(n=h.length,function(e){for(var r,i=0;i<n;++i)u[(r=h[i]).i]=r.x(e);return u.join("")})})(e,n)}var a8=oC.prototype.constructor;function a9(e){return function(){this.style.removeProperty(e)}}var a7=0;function se(e,n,r,i){this._groups=e,this._parents=n,this._name=r,this._id=i}var st=oC.prototype;se.prototype=(function(e){return oC().transition(e)}).prototype={constructor:se,select:function(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=iQ(e));for(var i=this._groups,o=i.length,a=Array(o),s=0;s<o;++s)for(var l,c,u=i[s],h=u.length,d=a[s]=Array(h),f=0;f<h;++f)(l=u[f])&&(c=e.call(l,l.__data__,f,u))&&("__data__"in l&&(c.__data__=l.__data__),d[f]=c,aF(d[f],n,r,f,d,aV(l,r)));return new se(a,this._parents,n,r)},selectAll:function(e){var n=this._name,r=this._id;"function"!=typeof e&&(e=i1(e));for(var i=this._groups,o=i.length,a=[],s=[],l=0;l<o;++l)for(var c,u=i[l],h=u.length,d=0;d<h;++d)if(c=u[d]){for(var f,p=e.call(c,c.__data__,d,u),m=aV(c,r),g=0,y=p.length;g<y;++g)(f=p[g])&&aF(f,n,r,g,p,m);a.push(p),s.push(c)}return new se(a,s,n,r)},selectChild:st.selectChild,selectChildren:st.selectChildren,filter:function(e){"function"!=typeof e&&(e=i2(e));for(var n=this._groups,r=n.length,i=Array(r),o=0;o<r;++o)for(var a,s=n[o],l=s.length,c=i[o]=[],u=0;u<l;++u)(a=s[u])&&e.call(a,a.__data__,u,s)&&c.push(a);return new se(i,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw Error();for(var n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=Array(i),l=0;l<a;++l)for(var c,u=n[l],h=r[l],d=u.length,f=s[l]=Array(d),p=0;p<d;++p)(c=u[p]||h[p])&&(f[p]=c);for(;l<i;++l)s[l]=n[l];return new se(s,this._parents,this._name,this._id)},selection:function(){return new a8(this._groups,this._parents)},transition:function(){for(var e=this._name,n=this._id,r=++a7,i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],c=l.length,u=0;u<c;++u)if(s=l[u]){var h=aV(s,n);aF(s,e,r,u,l,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new se(i,this._parents,e,r)},call:st.call,nodes:st.nodes,node:st.node,size:st.size,empty:st.empty,each:st.each,on:function(e,n){var r,i,o,a,s,l,c=this._id;return arguments.length<2?aV(this.node(),c).on.on(e):this.each((r=c,i=e,o=n,l=(i+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||"start"===e})?aB:aU,function(){var e=l(this,r),n=e.on;n!==a&&(s=(a=n).copy()).on(i,o),e.on=s}))},attr:function(e,n){var r=oa(e),i="transform"===r?aX:a6;return this.attrTween(e,"function"==typeof n?(r.local?function(e,n,r){var i,o,a;return function(){var s,l,c=r(this);return null==c?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local))===(l=c+"")?null:s===i&&l===o?a:(o=l,a=n(i=s,c))}}:function(e,n,r){var i,o,a;return function(){var s,l,c=r(this);return null==c?void this.removeAttribute(e):(s=this.getAttribute(e))===(l=c+"")?null:s===i&&l===o?a:(o=l,a=n(i=s,c))}})(r,i,aZ(this,"attr."+e,n)):null==n?(r.local?function(e){return function(){this.removeAttributeNS(e.space,e.local)}}:function(e){return function(){this.removeAttribute(e)}})(r):(r.local?function(e,n,r){var i,o,a=r+"";return function(){var s=this.getAttributeNS(e.space,e.local);return s===a?null:s===i?o:o=n(i=s,r)}}:function(e,n,r){var i,o,a=r+"";return function(){var s=this.getAttribute(e);return s===a?null:s===i?o:o=n(i=s,r)}})(r,i,n))},attrTween:function(e,n){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw Error();var i=oa(e);return this.tween(r,(i.local?function(e,n){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(n){this.setAttributeNS(e.space,e.local,o.call(this,n))}),r}return o._value=n,o}:function(e,n){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(n){this.setAttribute(e,o.call(this,n))}),r}return o._value=n,o})(i,n))},style:function(e,n,r){var i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,b,_,w,x,k,E,A="transform"==(e+="")?aW:a6;return null==n?this.styleTween(e,(i=e,function(){var e=ol(this,i),n=(this.style.removeProperty(i),ol(this,i));return e===n?null:e===o&&n===a?s:s=A(o=e,a=n)})).on("end.style."+e,a9(e)):"function"==typeof n?this.styleTween(e,(l=e,c=aZ(this,"style."+e,n),function(){var e=ol(this,l),n=c(this),r=n+"";return null==n&&(this.style.removeProperty(l),r=n=ol(this,l)),e===r?null:e===u&&r===h?d:(h=r,d=A(u=e,n))})).each((f=this._id,_="end."+(b="style."+(p=e)),function(){var e=aU(this,f),n=e.on,r=null==e.value[b]?v||(v=a9(p)):void 0;(n!==m||y!==r)&&(g=(m=n).copy()).on(_,y=r),e.on=g})):this.styleTween(e,(w=e,E=n+"",function(){var e=ol(this,w);return e===E?null:e===x?k:k=A(x=e,n)}),r).on("end.style."+e,null)},styleTween:function(e,n,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==n)return this.tween(i,null);if("function"!=typeof n)throw Error();return this.tween(i,function(e,n,r){var i,o;function a(){var a=n.apply(this,arguments);return a!==o&&(i=(o=a)&&function(n){this.style.setProperty(e,a.call(this,n),r)}),i}return a._value=n,a}(e,n,null==r?"":r))},text:function(e){var n,r;return this.tween("text","function"==typeof e?(n=aZ(this,"text",e),function(){var e=n(this);this.textContent=null==e?"":e}):(r=null==e?"":e+"",function(){this.textContent=r}))},textTween:function(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw Error();return this.tween(n,function(e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(e){this.textContent=i.call(this,e)}),n}return i._value=e,i}(e))},remove:function(){var e;return this.on("end.remove",(e=this._id,function(){var n=this.parentNode;for(var r in this.__transition)if(+r!==e)return;n&&n.removeChild(this)}))},tween:function(e,n){var r=this._id;if(e+="",arguments.length<2){for(var i,o=aV(this.node(),r).tween,a=0,s=o.length;a<s;++a)if((i=o[a]).name===e)return i.value;return null}return this.each((null==n?function(e,n){var r,i;return function(){var o=aU(this,e),a=o.tween;if(a!==r){i=r=a;for(var s=0,l=i.length;s<l;++s)if(i[s].name===n){(i=i.slice()).splice(s,1);break}}o.tween=i}}:function(e,n,r){var i,o;if("function"!=typeof r)throw Error();return function(){var a=aU(this,e),s=a.tween;if(s!==i){o=(i=s).slice();for(var l={name:n,value:r},c=0,u=o.length;c<u;++c)if(o[c].name===n){o[c]=l;break}c===u&&o.push(l)}a.tween=o}})(r,e,n))},delay:function(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?function(e,n){return function(){aB(this,e).delay=+n.apply(this,arguments)}}:function(e,n){return n*=1,function(){aB(this,e).delay=n}})(n,e)):aV(this.node(),n).delay},duration:function(e){var n=this._id;return arguments.length?this.each(("function"==typeof e?function(e,n){return function(){aU(this,e).duration=+n.apply(this,arguments)}}:function(e,n){return n*=1,function(){aU(this,e).duration=n}})(n,e)):aV(this.node(),n).duration},ease:function(e){var n=this._id;return arguments.length?this.each(function(e,n){if("function"!=typeof n)throw Error();return function(){aU(this,e).ease=n}}(n,e)):aV(this.node(),n).ease},easeVarying:function(e){var n;if("function"!=typeof e)throw Error();return this.each((n=this._id,function(){var r=e.apply(this,arguments);if("function"!=typeof r)throw Error();aU(this,n).ease=r}))},end:function(){var e,n,r=this,i=r._id,o=r.size();return new Promise(function(a,s){var l={value:s},c={value:function(){0==--o&&a()}};r.each(function(){var r=aU(this,i),o=r.on;o!==e&&((n=(e=o).copy())._.cancel.push(l),n._.interrupt.push(l),n._.end.push(c)),r.on=n}),0===o&&a()})},[Symbol.iterator]:st[Symbol.iterator]};var sn={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};oC.prototype.interrupt=function(e){return this.each(function(){aH(this,e)})},oC.prototype.transition=function(e){var n,r;e instanceof se?(n=e._id,e=e._name):(n=++a7,(r=sn).time=M(),e=null==e?null:e+"");for(var i=this._groups,o=i.length,a=0;a<o;++a)for(var s,l=i[a],c=l.length,u=0;u<c;++u)(s=l[u])&&aF(s,e,n,u,l,r||function(e,n){for(var r;!(r=e.__transition)||!(r=r[n]);)if(!(e=e.parentNode))throw Error(`transition ${n} not found`);return r}(s,n));return new se(i,this._parents,e,n)};let sr=e=>()=>e;function si(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function so(e,n,r){this.k=e,this.x=n,this.y=r}so.prototype={constructor:so,scale:function(e){return 1===e?this:new so(this.k*e,this.x,this.y)},translate:function(e,n){return 0===e&0===n?this:new so(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var sa=new so(1,0,0);function ss(e){for(;!e.__zoom;)if(!(e=e.parentNode))return sa;return e.__zoom}function sl(e){e.stopImmediatePropagation()}function sc(e){e.preventDefault(),e.stopImmediatePropagation()}function su(e){return(!e.ctrlKey||"wheel"===e.type)&&!e.button}function sh(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function sd(){return this.__zoom||sa}function sf(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sp(){return navigator.maxTouchPoints||"ontouchstart"in this}function sm(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],s=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}ss.prototype=so.prototype;let sg=e=>()=>e;function sy(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:l,dx:c,dy:u,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:h}})}function sv(e){return!e.ctrlKey&&!e.button}function sb(){return this.parentNode}function s_(e,n){return null==n?{x:e.x,y:e.y}:n}function sw(){return navigator.maxTouchPoints||"ontouchstart"in this}sy.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};let sx=function(e,n,r){var i=!0,o=!0;if("function"!=typeof e)throw TypeError("Expected a function");return eE(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),eX(e,n,{leading:i,maxWait:n,trailing:o})};function sk(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function sE(e,n,r){if("function"==typeof e?e===n:e.has(n))return arguments.length<3?n:r;throw TypeError("Private element is not present on this object")}function sA(e,n){return e.get(sE(e,n))}function sO(e,n,r){(function(e,n){if(n.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,n),n.set(e,r)}function sT(e,n,r){return e.set(sE(e,n),r),r}var sC=function(e,n,r){return(e<<16)+(n<<8)+r},sP=function(e){var n=tg(e).toRgb();return sC(n.r,n.g,n.b)},sM=function(e,n){return 123*e%Math.pow(2,n)},sS=new WeakMap,sD=new WeakMap,sN=function(){var e,n;return e=function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;if(!(this instanceof e))throw TypeError("Cannot call a class as a function");sO(this,sS,void 0),sO(this,sD,void 0),sT(sD,this,n),this.reset()},n=[{key:"reset",value:function(){sT(sS,this,["__reserved for background__"])}},{key:"register",value:function(e){if(sA(sS,this).length>=Math.pow(2,24-sA(sD,this)))return null;var n,r=sA(sS,this).length,i=sM(r,sA(sD,this)),o=(n=r+(i<<24-sA(sD,this)),"#".concat(Math.min(n,0x1000000).toString(16).padStart(6,"0")));return sA(sS,this).push(e),o}},{key:"lookup",value:function(e){if(!e)return null;var n="string"==typeof e?sP(e):sC.apply(void 0,function(e){if(Array.isArray(e))return sk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return sk(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sk(e,n):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());if(!n)return null;var r=n&Math.pow(2,24-sA(sD,this))-1,i=n>>24-sA(sD,this)&Math.pow(2,sA(sD,this))-1;return sM(r,sA(sD,this))!==i||r>=sA(sS,this).length?null:sA(sS,this)[r]}}],function(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}(i.key),i)}}(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();let{abs:sj,cos:sR,sin:sL,acos:sI,atan2:sz,sqrt:sF,pow:sB}=Math;function sU(e){return e<0?-sB(-e,1/3):sB(e,1/3)}let sV=Math.PI,sH=2*sV,sq=sV/2,sG=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,sK=Number.MIN_SAFE_INTEGER||-0x1fffffffffffff,s$={x:0,y:0,z:0},sY={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){let r=n(e),i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),sF(i)},compute:function(e,n,r){if(0===e)return n[0].t=0,n[0];let i=n.length-1;if(1===e)return n[i].t=1,n[i];let o=1-e,a=n;if(0===i)return n[0].t=e,n[0];if(1===i){let n={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return r&&(n.z=o*a[0].z+e*a[1].z),n}if(i<4){let n=o*o,s=e*e,l,c,u,h=0;2===i?(a=[a[0],a[1],a[2],s$],l=n,c=o*e*2,u=s):3===i&&(l=n*o,c=n*e*3,u=o*s*3,h=e*s);let d={x:l*a[0].x+c*a[1].x+u*a[2].x+h*a[3].x,y:l*a[0].y+c*a[1].y+u*a[2].y+h*a[3].y,t:e};return r&&(d.z=l*a[0].z+c*a[1].z+u*a[2].z+h*a[3].z),d}let s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let n=0;n<s.length-1;n++)s[n]={x:s[n].x+(s[n+1].x-s[n].x)*e,y:s[n].y+(s[n+1].y-s[n].y)*e},void 0!==s[n].z&&(s[n].z=s[n].z+(s[n+1].z-s[n].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,n,r,i){let o=1-e,a=r[0],s=r[1],l=r[2],c=r[3],u;return(a*=o,s*=e,2===n.length)?(u=a+s,{x:(a*n[0].x+s*n[1].x)/u,y:(a*n[0].y+s*n[1].y)/u,z:!!i&&(a*n[0].z+s*n[1].z)/u,t:e}):(a*=o,s*=2*o,l*=e*e,3===n.length)?(u=a+s+l,{x:(a*n[0].x+s*n[1].x+l*n[2].x)/u,y:(a*n[0].y+s*n[1].y+l*n[2].y)/u,z:!!i&&(a*n[0].z+s*n[1].z+l*n[2].z)/u,t:e}):(a*=o,s*=1.5*o,l*=3*o,c*=e*e*e,4===n.length)?(u=a+s+l+c,{x:(a*n[0].x+s*n[1].x+l*n[2].x+c*n[3].x)/u,y:(a*n[0].y+s*n[1].y+l*n[2].y+c*n[3].y)/u,z:!!i&&(a*n[0].z+s*n[1].z+l*n[2].z+c*n[3].z)/u,t:e}):void 0},derive:function(e,n){let r=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){let e=[];for(let r=0,o;r<a;r++)o={x:a*(i[r+1].x-i[r].x),y:a*(i[r+1].y-i[r].y)},n&&(o.z=a*(i[r+1].z-i[r].z)),e.push(o);r.push(e),i=e}return r},between:function(e,n,r){return n<=e&&e<=r||sY.approximately(e,n)||sY.approximately(e,r)},approximately:function(e,n,r){return sj(e-n)<=(r||1e-6)},length:function(e){let n=sY.Tvalues.length,r=0;for(let i=0,o;i<n;i++)o=.5*sY.Tvalues[i]+.5,r+=sY.Cvalues[i]*sY.arcfn(o,e);return .5*r},map:function(e,n,r,i,o){return i+(e-n)/(r-n)*(o-i)},lerp:function(e,n,r){let i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return void 0!==n.z&&void 0!==r.z&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return void 0!==e.z&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(sY.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y;return sz(i*s-o*a,i*a+o*s)},round:function(e,n){let r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){let r=e.x-n.x,i=e.y-n.y;return sF(r*r+i*i)},closest:function(e,n){let r=sB(2,63),i,o;return e.forEach(function(e,a){(o=sY.dist(n,e))<r&&(r=o,i=a)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=sB(e,n)+sB(1-e,n);return sj((r-1)/r)},projectionratio:function(e,n){if(2!==n&&3!==n)return!1;if(void 0===e)e=.5;else if(0===e||1===e)return e;let r=sB(1-e,n),i=sB(e,n)+r;return r/i},lli8:function(e,n,r,i,o,a,s,l){let c=(e-r)*(a-l)-(n-i)*(o-s);return 0!=c&&{x:((e*i-n*r)*(o-s)-(e-r)*(o*l-a*s))/c,y:((e*i-n*r)*(a-l)-(n-i)*(o*l-a*s))/c}},lli4:function(e,n,r,i){let o=e.x,a=e.y,s=n.x,l=n.y,c=r.x,u=r.y,h=i.x,d=i.y;return sY.lli8(o,a,s,l,c,u,h,d)},lli:function(e,n){return sY.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new s5(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=sG,r=sG,i=sK,o=sK;return e.forEach(function(e){let a=e.bbox();n>a.x.min&&(n=a.x.min),r>a.y.min&&(r=a.y.min),i<a.x.max&&(i=a.x.max),o<a.y.max&&(o=a.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!sY.bboxoverlap(n,i))return[];let a=[],s=[e.startcap,e.forward,e.back,e.endcap],l=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(n){n.virtual||l.forEach(function(i){if(i.virtual)return;let s=n.intersects(i,o);s.length>0&&(s.c1=n,s.c2=i,s.s1=e,s.s2=r,a.push(s))})}),a},makeshape:function(e,n,r){let i=n.points.length,o=e.points.length,a=sY.makeline(n.points[i-1],e.points[0]),s=sY.makeline(e.points[o-1],n.points[0]),l={startcap:a,forward:e,back:n,endcap:s,bbox:sY.findbbox([a,e,n,s])};return l.intersections=function(e){return sY.shapeintersections(l,l.bbox,e,e.bbox,r)},l},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=sG,o=sK,a,s;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(let l=0,c=r.length;l<c;l++)a=r[l],(s=e.get(a))[n]<i&&(i=s[n]),s[n]>o&&(o=s[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){let r=n.p1.x,i=n.p1.y,o=-sz(n.p2.y-i,n.p2.x-r);return e.map(function(e){return{x:(e.x-r)*sR(o)-(e.y-i)*sL(o),y:(e.x-r)*sL(o)+(e.y-i)*sR(o)}})},roots:function(e,n){let r,i,o;n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};let a=e.length-1,s=sY.align(e,n),l=function(e){return 0<=e&&e<=1};if(2===a){let e=s[0].y,n=s[1].y,r=s[2].y,i=e-2*n+r;if(0!==i){let o=-sF(n*n-e*r),a=-e+n;return[-(o+a)/i,-(-o+a)/i].filter(l)}return n!==r&&0===i?[(2*n-r)/(2*n-2*r)].filter(l):[]}let c=s[0].y,u=s[1].y,h=s[2].y,d=-c+3*u-3*h+s[3].y,f=3*c-6*u+3*h,p=-3*c+3*u,m=c;if(sY.approximately(d,0)){if(sY.approximately(f,0))return sY.approximately(p,0)?[]:[-m/p].filter(l);let e=sF(p*p-4*f*m),n=2*f;return[(e-p)/n,(-p-e)/n].filter(l)}f/=d;let g=(3*(p/=d)-f*f)/3,y=g/3,v=(2*f*f*f-9*f*p+27*(m/=d))/27,b=v/2,_=b*b+y*y*y;if(_<0){let e=-g/3,n=sF(e*e*e),r=-v/(2*n),a=sI(r<-1?-1:r>1?1:r),s=2*sU(n);return i=s*sR(a/3)-f/3,[i,o=s*sR((a+sH)/3)-f/3,s*sR((a+2*sH)/3)-f/3].filter(l)}if(0===_)return[i=2*(r=b<0?sU(-b):-sU(b))-f/3,o=-r-f/3].filter(l);{let e=sF(_);return[(r=sU(-b+e))-sU(b+e)-f/3].filter(l)}},droots:function(e){if(3===e.length){let n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(0!==o){let e=-sF(r*r-n*i),a=-n+r;return[-(e+a)/o,-(-e+a)/o]}return r!==i&&0===o?[(2*r-i)/(2*(r-i))]:[]}if(2===e.length){let n=e[0],r=e[1];if(n!==r)return[n/(n-r)]}return[]},curvature:function(e,n,r,i,o){let a,s,l,c,u=0,h=0,d=sY.compute(e,n),f=sY.compute(e,r),p=d.x*d.x+d.y*d.y;if(i?(a=sF(sB(d.y*f.z-f.y*d.z,2)+sB(d.z*f.x-f.z*d.x,2)+sB(d.x*f.y-f.x*d.y,2)),s=sB(p+d.z*d.z,1.5)):(a=d.x*f.y-d.y*f.x,s=sB(p,1.5)),0===a||0===s)return{k:0,r:0};if(u=a/s,h=s/a,!o){let o=sY.curvature(e-.001,n,r,i,!0).k,a=sY.curvature(e+.001,n,r,i,!0).k;c=(a-u+(u-o))/2,l=(sj(a-u)+sj(u-o))/2}return{k:u,r:h,dk:c,adk:l}},inflections:function(e){if(e.length<4)return[];let n=sY.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,a=18*(-3*r+2*i+3*o-n[3].x*n[2].y),s=18*(3*r-i-3*o),l=18*(o-r);if(sY.approximately(a,0)){if(!sY.approximately(s,0)){let e=-l/s;if(0<=e&&e<=1)return[e]}return[]}let c=2*a;if(sY.approximately(c,0))return[];let u=s*s-4*a*l;if(u<0)return[];let h=Math.sqrt(u);return[(h-s)/c,-(s+h)/c].filter(function(e){return 0<=e&&e<=1})},bboxoverlap:function(e,n){let r=["x","y"],i=r.length;for(let o=0,a,s,l,c;o<i;o++)if(s=e[a=r[o]].mid,l=n[a].mid,c=(e[a].size+n[a].size)/2,sj(s-l)>=c)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){let i=e.bbox(),o=n.bbox(),a=r||.5;if(i.x.size+i.y.size<a&&o.x.size+o.y.size<a)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(n._t1+n._t2)/2|0)/1e5];let s=e.split(.5),l=n.split(.5),c=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];c=c.filter(function(e){return sY.bboxoverlap(e.left.bbox(),e.right.bbox())});let u=[];return 0===c.length?u:(c.forEach(function(e){u=u.concat(sY.pairiteration(e.left,e.right,a))}),u=u.filter(function(e,n){return u.indexOf(e)===n}))},getccenter:function(e,n,r){let i=n.x-e.x,o=n.y-e.y,a=r.x-n.x,s=r.y-n.y,l=i*sR(sq)-o*sL(sq),c=i*sL(sq)+o*sR(sq),u=a*sR(sq)-s*sL(sq),h=a*sL(sq)+s*sR(sq),d=(e.x+n.x)/2,f=(e.y+n.y)/2,p=(n.x+r.x)/2,m=(n.y+r.y)/2,g=sY.lli8(d,f,d+l,f+c,p,m,p+u,m+h),y=sY.dist(g,e),v=sz(e.y-g.y,e.x-g.x),b=sz(n.y-g.y,n.x-g.x),_=sz(r.y-g.y,r.x-g.x),w;return v<_?((v>b||b>_)&&(v+=sH),v>_&&(w=_,_=v,v=w)):_<b&&b<v?(w=_,_=v,v=w):_+=sH,g.s=v,g.e=_,g.r=y,g},numberSort:function(e,n){return e-n}};class sW{constructor(e){this.curves=[],this._3d=!1,e&&(this.curves=e,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(e){return sY.pointsToString(e.points)}).join(", ")+"]"}addCurve(e){this.curves.push(e),this._3d=this._3d||e._3d}length(){return this.curves.map(function(e){return e.length()}).reduce(function(e,n){return e+n})}curve(e){return this.curves[e]}bbox(){let e=this.curves;for(var n=e[0].bbox(),r=1;r<e.length;r++)sY.expandbox(n,e[r].bbox());return n}offset(e){let n=[];return this.curves.forEach(function(r){n.push(...r.offset(e))}),new sW(n)}}let{abs:sX,min:sZ,max:sJ,cos:sQ,sin:s0,acos:s1,sqrt:s2}=Math,s3=Math.PI;class s5{constructor(e){let n=e&&e.forEach?e:Array.from(arguments).slice(),r=!1;if("object"==typeof n[0]){r=n.length;let e=[];n.forEach(function(n){["x","y","z"].forEach(function(r){void 0!==n[r]&&e.push(n[r])})}),n=e}let i=!1,o=n.length;if(r){if(r>4){if(1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!=arguments.length)throw Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");let a=this._3d=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,s=this.points=[];for(let e=0,r=a?3:2;e<o;e+=r){var l={x:n[e],y:n[e+1]};a&&(l.z=n[e+2]),s.push(l)}let c=this.order=s.length-1,u=this.dims=["x","y"];a&&u.push("z"),this.dimlen=u.length;let h=sY.align(s,{p1:s[0],p2:s[c]}),d=sY.dist(s[0],s[c]);this._linear=h.reduce((e,n)=>e+sX(n.y),0)<d/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(e,n,r,i){if(void 0===i&&(i=.5),0===i)return new s5(n,n,r);if(1===i)return new s5(e,n,n);let o=s5.getABC(2,e,n,r,i);return new s5(e,o.A,r)}static cubicFromPoints(e,n,r,i,o){void 0===i&&(i=.5);let a=s5.getABC(3,e,n,r,i);void 0===o&&(o=sY.dist(n,a.C));let s=o*(1-i)/i,l=sY.dist(e,r),c=(r.x-e.x)/l,u=(r.y-e.y)/l,h=o*c,d=o*u,f={x:n.x-h,y:n.y-d},p={x:n.x+s*c,y:n.y+s*u},m=a.A,g={x:m.x+(f.x-m.x)/(1-i),y:m.y+(f.y-m.y)/(1-i)},y={x:m.x+(p.x-m.x)/i,y:m.y+(p.y-m.y)/i},v={x:e.x+(g.x-e.x)/i,y:e.y+(g.y-e.y)/i};return new s5(e,v,{x:r.x+(y.x-r.x)/(1-i),y:r.y+(y.y-r.y)/(1-i)},r)}static getUtils(){return sY}getUtils(){return s5.getUtils()}static get PolyBezier(){return sW}valueOf(){return this.toString()}toString(){return sY.pointsToString(this.points)}toSVG(){if(this._3d)return!1;let e=this.points,n=["M",e[0].x,e[0].y,2===this.order?"Q":"C"];for(let r=1,i=e.length;r<i;r++)n.push(e[r].x),n.push(e[r].y);return n.join(" ")}setRatios(e){if(e.length!==this.points.length)throw Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}verify(){let e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}coordDigest(){return this.points.map(function(e,n){return""+n+e.x+e.y+(e.z?e.z:0)}).join("")}update(){this._lut=[],this.dpoints=sY.derive(this.points,this._3d),this.computedirection()}computedirection(){let e=this.points,n=sY.angle(e[0],e[this.order],e[1]);this.clockwise=n>0}length(){return sY.length(this.derivative.bind(this))}static getABC(e=2,n,r,i,o=.5){let a=sY.projectionratio(o,e),s=1-a,l={x:a*n.x+s*i.x,y:a*n.y+s*i.y},c=sY.abcratio(o,e);return{A:{x:r.x+(r.x-l.x)/c,y:r.y+(r.y-l.y)/c},B:r,C:l,S:n,E:i}}getABC(e,n){n=n||this.get(e);let r=this.points[0],i=this.points[this.order];return s5.getABC(this.order,r,n,i,e)}getLUT(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(let n=0,r,i;n<e;n++)i=n/(e-1),(r=this.compute(i)).t=i,this._lut.push(r);return this._lut}on(e,n){n=n||5;let r=this.getLUT(),i=[];for(let o=0,a;o<r.length;o++)a=r[o],sY.dist(a,e)<n&&(i.push(a),r.length);return!!i.length&&(t/=i.length)}project(e){let n=this.getLUT(),r=n.length-1,i=sY.closest(n,e),o=i.mpos,a=(o-1)/r,s=(o+1)/r,l=.1/r,c=i.mdist,u=a,h=u,d;c+=1;for(let n;u<s+l;u+=l)d=this.compute(u),(n=sY.dist(e,d))<c&&(c=n,h=u);return h=h<0?0:h>1?1:h,(d=this.compute(h)).t=h,d.d=c,d}get(e){return this.compute(e)}point(e){return this.points[e]}compute(e){return this.ratios?sY.computeWithRatios(e,this.points,this.ratios,this._3d):sY.compute(e,this.points,this._3d,this.ratios)}raise(){let e=this.points,n=[e[0]],r=e.length;for(let i=1,o,a;i<r;i++)o=e[i],a=e[i-1],n[i]={x:(r-i)/r*o.x+i/r*a.x,y:(r-i)/r*o.y+i/r*a.y};return n[r]=e[r-1],new s5(n)}derivative(e){return sY.compute(e,this.dpoints[0],this._3d)}dderivative(e){return sY.compute(e,this.dpoints[1],this._3d)}align(){let e=this.points;return new s5(sY.align(e,{p1:e[0],p2:e[e.length-1]}))}curvature(e){return sY.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return sY.inflections(this.points)}normal(e){return this._3d?this.__normal3(e):this.__normal2(e)}__normal2(e){let n=this.derivative(e),r=s2(n.x*n.x+n.y*n.y);return{t:e,x:-n.y/r,y:n.x/r}}__normal3(e){let n=this.derivative(e),r=this.derivative(e+.01),i=s2(n.x*n.x+n.y*n.y+n.z*n.z),o=s2(r.x*r.x+r.y*r.y+r.z*r.z);n.x/=i,n.y/=i,n.z/=i,r.x/=o,r.y/=o,r.z/=o;let a={x:r.y*n.z-r.z*n.y,y:r.z*n.x-r.x*n.z,z:r.x*n.y-r.y*n.x},s=s2(a.x*a.x+a.y*a.y+a.z*a.z);a.x/=s,a.y/=s,a.z/=s;let l=[a.x*a.x,a.x*a.y-a.z,a.x*a.z+a.y,a.x*a.y+a.z,a.y*a.y,a.y*a.z-a.x,a.x*a.z-a.y,a.y*a.z+a.x,a.z*a.z];return{t:e,x:l[0]*n.x+l[1]*n.y+l[2]*n.z,y:l[3]*n.x+l[4]*n.y+l[5]*n.z,z:l[6]*n.x+l[7]*n.y+l[8]*n.z}}hull(e){let n=this.points,r=[],i=[],o=0;for(i[o++]=n[0],i[o++]=n[1],i[o++]=n[2],3===this.order&&(i[o++]=n[3]);n.length>1;){r=[];for(let a=0,s,l=n.length-1;a<l;a++)s=sY.lerp(e,n[a],n[a+1]),i[o++]=s,r.push(s);n=r}return i}split(e,n){if(0===e&&n)return this.split(n).left;if(1===n)return this.split(e).right;let r=this.hull(e),i={left:new s5(2===this.order?[r[0],r[3],r[5]]:[r[0],r[4],r[7],r[9]]),right:new s5(2===this.order?[r[5],r[4],r[2]]:[r[9],r[8],r[6],r[3]]),span:r};return(i.left._t1=sY.map(0,0,1,this._t1,this._t2),i.left._t2=sY.map(e,0,1,this._t1,this._t2),i.right._t1=sY.map(e,0,1,this._t1,this._t2),i.right._t2=sY.map(1,0,1,this._t1,this._t2),n)?(n=sY.map(n,e,1,0,1),i.right.split(n).left):i}extrema(){let e={},n=[];return this.dims.forEach((function(r){let i=function(e){return e[r]},o=this.dpoints[0].map(i);e[r]=sY.droots(o),3===this.order&&(o=this.dpoints[1].map(i),e[r]=e[r].concat(sY.droots(o))),e[r]=e[r].filter(function(e){return e>=0&&e<=1}),n=n.concat(e[r].sort(sY.numberSort))}).bind(this)),e.values=n.sort(sY.numberSort).filter(function(e,r){return n.indexOf(e)===r}),e}bbox(){let e=this.extrema(),n={};return this.dims.forEach((function(r){n[r]=sY.getminmax(this,r,e[r])}).bind(this)),n}overlaps(e){let n=this.bbox(),r=e.bbox();return sY.bboxoverlap(n,r)}offset(e,n){if(void 0!==n){let r=this.get(e),i=this.normal(e),o={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(o.z=r.z+i.z*n),o}if(this._linear){let n=this.normal(0);return[new s5(this.points.map(function(r){let i={x:r.x+e*n.x,y:r.y+e*n.y};return r.z&&n.z&&(i.z=r.z+e*n.z),i}))]}return this.reduce().map(function(n){return n._linear?n.offset(e)[0]:n.scale(e)})}simple(){if(3===this.order){let e=sY.angle(this.points[0],this.points[3],this.points[1]),n=sY.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&n<0||e<0&&n>0)return!1}let e=this.normal(0),n=this.normal(1),r=e.x*n.x+e.y*n.y;return this._3d&&(r+=e.z*n.z),sX(s1(r))<s3/3}reduce(){let e,n=0,r=0,i,o=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)r=s[e],(i=this.split(n,r))._t1=n,i._t2=r,o.push(i),n=r;return o.forEach(function(e){for(n=0,r=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(i=e.split(n,r)).simple()){if(r-=.01,.01>sX(n-r))return[];(i=e.split(n,r))._t1=sY.map(n,0,1,e._t1,e._t2),i._t2=sY.map(r,0,1,e._t1,e._t2),a.push(i),n=r;break}n<1&&((i=e.split(n,1))._t1=sY.map(n,0,1,e._t1,e._t2),i._t2=e._t2,a.push(i))}),a}translate(e,n,r){r="number"==typeof r?r:n;let i=this.order,o=this.points.map((e,o)=>(1-o/i)*n+o/i*r);return new s5(this.points.map((n,r)=>({x:n.x+e.x*o[r],y:n.y+e.y*o[r]})))}scale(e){let n=this.order,r=!1;if("function"==typeof e&&(r=e),r&&2===n)return this.raise().scale(r);let i=this.clockwise,o=this.points;if(this._linear)return this.translate(this.normal(0),r?r(0):e,r?r(1):e);let a=r?r(0):e,s=r?r(1):e,l=[this.offset(0,10),this.offset(1,10)],c=[],u=sY.lli4(l[0],l[0].c,l[1],l[1].c);if(!u)throw Error("cannot scale this curve. Try reducing it first.");return([0,1].forEach(function(e){let r=c[e*n]=sY.copy(o[e*n]);r.x+=(e?s:a)*l[e].n.x,r.y+=(e?s:a)*l[e].n.y}),r)?[0,1].forEach(function(a){if(2!==n||!a){var s=o[a+1],l={x:s.x-u.x,y:s.y-u.y},h=r?r((a+1)/n):e;r&&!i&&(h=-h);var d=s2(l.x*l.x+l.y*l.y);l.x/=d,l.y/=d,c[a+1]={x:s.x+h*l.x,y:s.y+h*l.y}}}):[0,1].forEach(e=>{if(2===n&&e)return;let r=c[e*n],i=this.derivative(e),a={x:r.x+i.x,y:r.y+i.y};c[e+1]=sY.lli4(r,a,u,o[e+1])}),new s5(c)}outline(e,n,r,i){if(n=void 0===n?e:n,this._linear){let o,a,s,l=this.normal(0),c=this.points[0],u=this.points[this.points.length-1];void 0===r&&(r=e,i=n),o={x:c.x+l.x*e,y:c.y+l.y*e},s={x:u.x+l.x*r,y:u.y+l.y*r},a={x:(o.x+s.x)/2,y:(o.y+s.y)/2};let h=[o,a,s];o={x:c.x-l.x*n,y:c.y-l.y*n},s={x:u.x-l.x*i,y:u.y-l.y*i},a={x:(o.x+s.x)/2,y:(o.y+s.y)/2};let d=[s,a,o],f=sY.makeline(d[2],h[0]),p=sY.makeline(h[2],d[0]);return new sW([f,new s5(h),p,new s5(d)])}let o=this.reduce(),a=o.length,s=[],l=[],c,u=0,h=this.length(),d=void 0!==r&&void 0!==i;function f(e,n,r,i,o){return function(a){let s=n-e;return sY.map(a,0,1,e+i/r*s,e+(i+o)/r*s)}}o.forEach(function(o){let a=o.length();d?(s.push(o.scale(f(e,r,h,u,a))),l.push(o.scale(f(-n,-i,h,u,a)))):(s.push(o.scale(e)),l.push(o.scale(-n))),u+=a}),l=l.map(function(e){return(c=e.points)[3]?e.points=[c[3],c[2],c[1],c[0]]:e.points=[c[2],c[1],c[0]],e}).reverse();let p=s[0].points[0],m=s[a-1].points[s[a-1].points.length-1],g=l[a-1].points[l[a-1].points.length-1],y=l[0].points[0],v=sY.makeline(g,p),b=sY.makeline(m,y);return new sW([v].concat(s).concat([b]).concat(l))}outlineshapes(e,n,r){n=n||e;let i=this.outline(e,n).curves,o=[];for(let e=1,n=i.length;e<n/2;e++){let a=sY.makeshape(i[e],i[n-e],r);a.startcap.virtual=e>1,a.endcap.virtual=e<n/2-1,o.push(a)}return o}intersects(e,n){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof s5&&(e=e.reduce()),this.curveintersects(this.reduce(),e,n)):this.selfintersects(n)}lineIntersects(e){let n=sZ(e.p1.x,e.p2.x),r=sZ(e.p1.y,e.p2.y),i=sJ(e.p1.x,e.p2.x),o=sJ(e.p1.y,e.p2.y);return sY.roots(this.points,e).filter(e=>{var a=this.get(e);return sY.between(a.x,n,i)&&sY.between(a.y,r,o)})}selfintersects(e){let n=this.reduce(),r=n.length-2,i=[];for(let o=0,a,s;o<r;o++)a=n.slice(o,o+1),s=n.slice(o+2),i.push(...this.curveintersects(a,s,e));return i}curveintersects(e,n,r){let i=[];e.forEach(function(e){n.forEach(function(n){e.overlaps(n)&&i.push({left:e,right:n})})});let o=[];return i.forEach(function(e){let n=sY.pairiteration(e.left,e.right,r);n.length>0&&(o=o.concat(n))}),o}arcs(e){return e=e||.5,this._iterate(e,[])}_error(e,n,r,i){let o=(i-r)/4,a=this.get(r+o),s=this.get(i-o),l=sY.dist(e,n),c=sY.dist(e,a),u=sY.dist(e,s);return sX(c-l)+sX(u-l)}_iterate(e,n){let r=0,i=1,o;do{o=0,i=1;let a=this.get(r),s,l,c,u,h=!1,d=!1,f,p=i,m=1;do if(d=h,u=c,p=(r+i)/2,s=this.get(p),l=this.get(i),(c=sY.getccenter(a,s,l)).interval={start:r,end:i},h=this._error(c,a,r,i)<=e,(f=d&&!h)||(m=i),h){if(i>=1){if(c.interval.end=m=1,u=c,i>1){let e={x:c.x+c.r*sQ(c.e),y:c.y+c.r*s0(c.e)};c.e+=sY.angle({x:c.x,y:c.y},e,this.get(1))}break}i+=(i-r)/2}else i=p;while(!f&&o++<100);if(o>=100)break;u=u||c,n.push(u),r=m}while(i<1);return n}}function s4(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function s6(e){var n=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof n?n:n+""}function s8(e,n){if(e){if("string"==typeof e)return s4(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s4(e,n):void 0}}var s9=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(e){return{keyAccessor:e,isProp:!(e instanceof Function)}}),a=e.reduce(function(e,n){var i=e,a=n;return o.forEach(function(e,n){var s,l=e.keyAccessor;if(e.isProp){var c=a,u=c[l],h=function(e,n){if(null==e)return{};var r,i,o=function(e,n){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.includes(r)||({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(c,[l].map(s6));s=u,a=h}else s=l(a,n);n+1<o.length?(i.hasOwnProperty(s)||(i[s]={}),i=i[s]):r?(i.hasOwnProperty(s)||(i[s]=[]),i[s].push(a)):i[s]=a}),e},{});r instanceof Function&&function e(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i===o.length?Object.keys(n).forEach(function(e){return n[e]=r(n[e])}):Object.values(n).forEach(function(n){return e(n,i+1)})}(a);var s=a;return i&&(s=[],!function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r.length===o.length?s.push({keys:r,vals:n}):Object.entries(n).forEach(function(n){var i=function(e){if(Array.isArray(e))return e}(n)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{a=(r=r.call(e)).next,!1;for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(n,2)||s8(n,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),o=i[0];return e(i[1],[].concat(function(e){if(Array.isArray(e))return s4(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||s8(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[o]))})}(a),n instanceof Array&&0===n.length&&1===s.length&&(s[0].keys=[])),s};function s7(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function le(e,n,r){if(ln())return Reflect.construct.apply(null,arguments);var i=[null];return i.push.apply(i,n),new(e.bind.apply(e,i))}function lt(e,n,r){var i;return(n="symbol"==typeof(i=function(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n);if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(n,"string"))?i:i+"")in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function ln(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ln=function(){return!!e})()}function lr(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,i)}return r}function li(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?lr(Object(r),!0).forEach(function(n){lt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lr(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lo(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,o,a,s,l=[],c=!0,u=!1;try{if(a=(r=r.call(e)).next,0===n);else for(;!(c=(i=a.call(r)).done)&&(l.push(i.value),l.length!==n);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw o}}return l}}(e,n)||ll(e,n)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function la(e){return function(e){if(Array.isArray(e))return s7(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ll(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ls(e){return(ls="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ll(e,n){if(e){if("string"==typeof e)return s7(e,n);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s7(e,n):void 0}}!function(e,n){void 0===n&&(n={});var r=n.insertAt;if("undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===r&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(".force-graph-container canvas {\n  display: block;\n  user-select: none;\n  outline: none;\n  -webkit-tap-highlight-color: transparent;\n}\n\n.force-graph-container .clickable {\n  cursor: pointer;\n}\n\n.force-graph-container .grabbable {\n  cursor: move;\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n\n.force-graph-container .grabbable:active {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n");var lc=th(td);function lu(e,n,r){n&&"string"==typeof r&&e.filter(function(e){return!e[r]}).forEach(function(e){e[r]=lc(n(e))})}var lh=function(e,n){return n.onNeedsRedraw&&n.onNeedsRedraw()},ld=function(e,n){if(!n.isShadow){var r=e0(n.linkDirectionalParticles);n.graphData.links.forEach(function(e){var n=Math.round(Math.abs(r(e)));n?e.__photons=la(Array(n)).map(function(){return{}}):delete e.__photons})}},lf=eQ({props:{graphData:{default:{nodes:[],links:[]},onChange:function(e,n){n.engineRunning=!1,ld(e,n)}},dagMode:{onChange:function(e,n){e||(n.graphData.nodes||[]).forEach(function(e){return e.fx=e.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(e){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:lh},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:lh},nodeColor:{default:"color",triggerUpdate:!1,onChange:lh},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:lh},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:lh},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:lh},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:lh},linkColor:{default:"color",triggerUpdate:!1,onChange:lh},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:lh},linkWidth:{default:1,triggerUpdate:!1,onChange:lh},linkCurvature:{default:0,triggerUpdate:!1,onChange:lh},linkCanvasObject:{triggerUpdate:!1,onChange:lh},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:lh},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:lh},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:lh},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:lh},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:ld},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaDecay(e)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.alphaTarget(e)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(e,n){n.forceLayout.velocityDecay(e)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(e,n,r){return void 0===r?e.forceLayout.force(n):(e.forceLayout.force(n,r),this)},d3ReheatSimulation:function(e){return e.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(e){return e.cntTicks=0,e.startTickTime=new Date,e.engineRunning=!0,this},isEngineRunning:function(e){return!!e.engineRunning},tickFrame:function(e){var n,r,i,o,a,s,l,c,u,h,d,f,p,m,g,y,v,b,_;return e.isShadow||e.engineRunning&&(++e.cntTicks>e.cooldownTicks||new Date-e.startTickTime>e.cooldownTime||e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin?(e.engineRunning=!1,e.onEngineStop()):(e.forceLayout.tick(),e.onEngineTick())),function(){var n=e0(e.linkVisibility),r=e0(e.linkColor),i=e0(e.linkWidth),o=e0(e.linkLineDash),a=e0(e.linkCurvature),s=e0(e.linkCanvasObjectMode),l=e.ctx,c=2*e.isShadow,u=e.graphData.links.filter(n);u.forEach(function(e){var n=a(e);if(!n){e.__controlPoints=null;return}var r=e.source,i=e.target;if(r&&i&&r.hasOwnProperty("x")&&i.hasOwnProperty("x")){var o=Math.sqrt(Math.pow(i.x-r.x,2)+Math.pow(i.y-r.y,2));if(o>0){var s=Math.atan2(i.y-r.y,i.x-r.x),l=o*n,c={x:(r.x+i.x)/2+l*Math.cos(s-Math.PI/2),y:(r.y+i.y)/2+l*Math.sin(s-Math.PI/2)};e.__controlPoints=[c.x,c.y]}else{var u=70*n;e.__controlPoints=[i.x,i.y-u,i.x+u,i.y]}}});var h=[],d=[],f=u;if(e.linkCanvasObject){var p=[],m=[];u.forEach(function(e){return(({before:h,after:d,replace:p})[s(e)]||m).push(e)}),f=[].concat(la(h),d,m),h=h.concat(p)}l.save(),h.forEach(function(n){return e.linkCanvasObject(n,l,e.globalScale)}),l.restore();var g=s9(f,[r,i,o]);l.save(),Object.entries(g).forEach(function(n){var r=lo(n,2),i=r[0],a=r[1],s=i&&"undefined"!==i?i:"rgba(0,0,0,0.15)";Object.entries(a).forEach(function(n){var r=lo(n,2),i=r[0],a=r[1],u=(i||1)/e.globalScale+c;Object.entries(a).forEach(function(e){var n=lo(e,2);n[0];var r=n[1],i=o(r[0]);l.beginPath(),r.forEach(function(e){var n=e.source,r=e.target;if(n&&r&&n.hasOwnProperty("x")&&r.hasOwnProperty("x")){l.moveTo(n.x,n.y);var i=e.__controlPoints;i?l[2===i.length?"quadraticCurveTo":"bezierCurveTo"].apply(l,la(i).concat([r.x,r.y])):l.lineTo(r.x,r.y)}}),l.strokeStyle=s,l.lineWidth=u,l.setLineDash(i||[]),l.stroke()})})}),l.restore(),l.save(),d.forEach(function(n){return e.linkCanvasObject(n,l,e.globalScale)}),l.restore()}(),e.isShadow||(n=e0(e.linkDirectionalArrowLength),r=e0(e.linkDirectionalArrowRelPos),i=e0(e.linkVisibility),o=e0(e.linkDirectionalArrowColor||e.linkColor),a=e0(e.nodeVal),(s=e.ctx).save(),e.graphData.links.filter(i).forEach(function(i){var l=n(i);if(l&&!(l<0)){var c=i.source,u=i.target;if(c&&u&&c.hasOwnProperty("x")&&u.hasOwnProperty("x")){var h=Math.sqrt(Math.max(0,a(c)||1))*e.nodeRelSize,d=Math.sqrt(Math.max(0,a(u)||1))*e.nodeRelSize,f=Math.min(1,Math.max(0,r(i))),p=o(i)||"rgba(0,0,0,0.28)",m=l/1.6/2,g=i.__controlPoints&&le(s5,[c.x,c.y].concat(la(i.__controlPoints),[u.x,u.y])),y=g?function(e){return g.get(e)}:function(e){return{x:c.x+(u.x-c.x)*e||0,y:c.y+(u.y-c.y)*e||0}},v=g?g.length():Math.sqrt(Math.pow(u.x-c.x,2)+Math.pow(u.y-c.y,2)),b=h+l+(v-h-d-l)*f,_=y(b/v),w=y((b-l)/v),x=y((b-.8*l)/v),k=Math.atan2(_.y-w.y,_.x-w.x)-Math.PI/2;s.beginPath(),s.moveTo(_.x,_.y),s.lineTo(w.x+m*Math.cos(k),w.y+m*Math.sin(k)),s.lineTo(x.x,x.y),s.lineTo(w.x-m*Math.cos(k),w.y-m*Math.sin(k)),s.fillStyle=p,s.fill()}}}),s.restore()),e.isShadow||(l=e0(e.linkDirectionalParticles),c=e0(e.linkDirectionalParticleSpeed),u=e0(e.linkDirectionalParticleWidth),h=e0(e.linkVisibility),d=e0(e.linkDirectionalParticleColor||e.linkColor),(f=e.ctx).save(),e.graphData.links.filter(h).forEach(function(n){var r=l(n);if(n.hasOwnProperty("__photons")&&n.__photons.length){var i=n.source,o=n.target;if(i&&o&&i.hasOwnProperty("x")&&o.hasOwnProperty("x")){var a=c(n),s=n.__photons||[],h=Math.max(0,u(n)/2)/Math.sqrt(e.globalScale);f.fillStyle=d(n)||"rgba(0,0,0,0.28)";var p=n.__controlPoints?le(s5,[i.x,i.y].concat(la(n.__controlPoints),[o.x,o.y])):null,m=0,g=!1;s.forEach(function(e){var n=!!e.__singleHop;if(e.hasOwnProperty("__progressRatio")||(e.__progressRatio=n?0:m/r),!n&&m++,e.__progressRatio+=a,e.__progressRatio>=1)if(n){g=!0;return}else e.__progressRatio=e.__progressRatio%1;var s=e.__progressRatio,l=p?p.get(s):{x:i.x+(o.x-i.x)*s||0,y:i.y+(o.y-i.y)*s||0};f.beginPath(),f.arc(l.x,l.y,h,0,2*Math.PI,!1),f.fill()}),g&&(n.__photons=n.__photons.filter(function(e){return!e.__singleHop||e.__progressRatio<=1}))}}}),f.restore()),p=e0(e.nodeVisibility),m=e0(e.nodeVal),g=e0(e.nodeColor),y=e0(e.nodeCanvasObjectMode),v=e.ctx,b=e.isShadow/e.globalScale,_=e.graphData.nodes.filter(p),v.save(),_.forEach(function(n){var r=y(n);if(e.nodeCanvasObject&&("before"===r||"replace"===r)&&(e.nodeCanvasObject(n,v,e.globalScale),"replace"===r))return void v.restore();var i=Math.sqrt(Math.max(0,m(n)||1))*e.nodeRelSize+b;v.beginPath(),v.arc(n.x,n.y,i,0,2*Math.PI,!1),v.fillStyle=g(n)||"rgba(31, 120, 180, 0.92)",v.fill(),e.nodeCanvasObject&&"after"===r&&e.nodeCanvasObject(n,e.ctx,e.globalScale)}),v.restore(),this},emitParticle:function(e,n){return n&&(n.__photons||(n.__photons=[]),n.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:V().force("link",$()).force("charge",eb()).force("center",e_()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(e,n){n.ctx=e},update:function(e,n){e.engineRunning=!1,e.onUpdate(),null!==e.nodeAutoColorBy&&lu(e.graphData.nodes,e0(e.nodeAutoColorBy),e.nodeColor),null!==e.linkAutoColorBy&&lu(e.graphData.links,e0(e.linkAutoColorBy),e.linkColor),e.graphData.links.forEach(function(n){n.source=n[e.linkSource],n.target=n[e.linkTarget]}),e.forceLayout.stop().alpha(1).nodes(e.graphData.nodes);var r=e.forceLayout.force("link");r&&r.id(function(n){return n[e.nodeId]}).links(e.graphData.links);var i=e.dagMode&&function(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=o.nodeFilter,s=void 0===a?function(){return!0}:a,l=o.onLoopError,c=void 0===l?function(e){throw"Invalid DAG structure! Found cycle in node path: ".concat(e.join(" -> "),".")}:l,u={};r.forEach(function(e){return u[n(e)]={data:e,out:[],depth:-1,skip:!s(e)}}),i.forEach(function(e){var r=e.source,i=e.target,o=c(r),a=c(i);if(!u.hasOwnProperty(o))throw"Missing source node with id: ".concat(o);if(!u.hasOwnProperty(a))throw"Missing target node with id: ".concat(a);var s=u[o],l=u[a];function c(e){return"object"===ls(e)?n(e):e}s.out.push(l)});var h=[];return function e(r){for(var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=0,s=r.length;a<s;a++)if(function(){var s=r[a];if(-1!==i.indexOf(s)){var l=[].concat(la(i.slice(i.indexOf(s))),[s]).map(function(e){return n(e.data)});return h.some(function(e){return e.length===l.length&&e.every(function(e,n){return e===l[n]})})||(h.push(l),c(l)),1}o>s.depth&&(s.depth=o,e(s.out,[].concat(la(i),[s]),o+ +!s.skip))}())continue}(Object.values(u)),Object.assign.apply(Object,[{}].concat(la(Object.entries(u).filter(function(e){return!lo(e,2)[1].skip}).map(function(e){var n=lo(e,2);return lt({},n[0],n[1].depth)}))))}(e.graphData,function(n){return n[e.nodeId]},{nodeFilter:e.dagNodeFilter,onLoopError:e.onDagError||void 0}),o=Math.max.apply(Math,la(Object.values(i||[]))),a=e.dagLevelDistance||e.graphData.nodes.length/(o||1)*2*(-1!==["radialin","radialout"].indexOf(e.dagMode)?.7:1);if(["lr","rl","td","bu"].includes(n.dagMode)){var s=["lr","rl"].includes(n.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(e){return delete e[s]})}if(["lr","rl","td","bu"].includes(e.dagMode)){var l=["rl","bu"].includes(e.dagMode),c=["lr","rl"].includes(e.dagMode)?"fx":"fy";e.graphData.nodes.filter(e.dagNodeFilter).forEach(function(n){return n[c]=(i[n[e.nodeId]]-o/2)*a*(l?-1:1)})}e.forceLayout.force("dagRadial",-1!==["radialin","radialout"].indexOf(e.dagMode)?ew(function(n){var r=i[n[e.nodeId]]||-1;return("radialin"===e.dagMode?o-r:r)*a}).strength(function(n){return+!!e.dagNodeFilter(n)}):null);for(var u=0;u<e.warmupTicks&&!(e.d3AlphaMin>0&&e.forceLayout.alpha()<e.d3AlphaMin);u++)e.forceLayout.tick();this.resetCountdown(),e.onFinishUpdate()}});function lp(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(e){return{default:i[e](),onChange:function(n,i){r.forEach(function(r){return i[r][e](n)})},triggerUpdate:!1}},linkMethod:function(e){return function(n){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];var s=[];return r.forEach(function(r){var i=n[r],a=i[e].apply(i,o);a!==i&&s.push(a)}),s.length?s[0]:this}}}}var lm=lp("forceGraph",lf),lg=lp(["forceGraph","shadowGraph"],lf),ly=Object.assign.apply(Object,la(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleWidth","linkDirectionalParticleColor","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return lt({},e,lm.linkProp(e))})).concat(la(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return lt({},e,lg.linkProp(e))})))),lv=Object.assign.apply(Object,la(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return lt({},e,lm.linkMethod(e))})));function lb(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;300===n&&150===r&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(o){o.style.width="".concat(e.width,"px"),o.style.height="".concat(e.height,"px"),o.width=e.width*i,o.height=e.height*i,n||r||o.getContext("2d").scale(i,i)});var o=ss(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function l_(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function lw(e,n,r){e.save(),l_(e),e.clearRect(0,0,n,r),e.restore()}var lx=eQ({props:li({width:{default:window.innerWidth,onChange:function(e,n){return lb(n)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(e,n){return lb(n)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(e,n){[e.nodes,e.links].every(function(e){return(e||[]).every(function(e){return!e.hasOwnProperty("__indexColor")})})&&n.colorTracker.reset(),[{type:"Node",objs:e.nodes},{type:"Link",objs:e.links}].forEach(function(e){var r=e.type;e.objs.filter(function(e){if(!e.hasOwnProperty("__indexColor"))return!0;var r=n.colorTracker.lookup(e.__indexColor);return!r||!r.hasOwnProperty("d")||r.d!==e}).forEach(function(e){e.__indexColor=n.colorTracker.register({type:r,d:e})})}),n.forceGraph.graphData(e),n.shadowGraph.graphData(e)},triggerUpdate:!1},backgroundColor:{onChange:function(e,n){n.canvas&&e&&(n.canvas.style.background=e)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(e,n){n.shadowGraph.nodeCanvasObject(e?function(n,r,i){return e(n,n.__indexColor,r,i)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(e,n){n.shadowGraph.linkCanvasObject(e?function(n,r,i){return e(n,n.__indexColor,r,i)}:null),n.flushShadowCanvas&&n.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(e,n){n.zoom.scaleExtent([e,n.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(e,n){n.zoom.scaleExtent([n.zoom.scaleExtent()[0],e])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(e,n){n.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},ly),aliases:{stopAnimation:"pauseAnimation"},methods:li({graph2ScreenCoords:function(e,n,r){var i=ss(e.canvas);return{x:n*i.k+i.x,y:r*i.k+i.y}},screen2GraphCoords:function(e,n,r){var i=ss(e.canvas);return{x:(n-i.x)/i.k,y:(r-i.y)/i.k}},centerAt:function(e,n,r,i){if(!e.canvas)return null;if(void 0!==n||void 0!==r){var o=Object.assign({},void 0!==n?{x:n}:{},void 0!==r?{y:r}:{});return i?e.tweenGroup.add(new iZ(a()).to(o,i).easing(iG.Quadratic.Out).onUpdate(s).start()):s(o),this}return a();function a(){var n=ss(e.canvas);return{x:(e.width/2-n.x)/n.k,y:(e.height/2-n.y)/n.k}}function s(n){var r=n.x,i=n.y;e.zoom.translateTo(e.zoom.__baseElem,void 0===r?a().x:r,void 0===i?a().y:i),e.needsRedraw=!0}},zoom:function(e,n,r){if(!e.canvas)return null;if(void 0!==n)return r?e.tweenGroup.add(new iZ({k:i()}).to({k:n},r).easing(iG.Quadratic.Out).onUpdate(function(e){return o(e.k)}).start()):o(n),this;return i();function i(){return ss(e.canvas).k}function o(n){e.zoom.scaleTo(e.zoom.__baseElem,n),e.needsRedraw=!0}},zoomToFit:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var s=this.getGraphBbox.apply(this,o);if(s){var l={x:(s.x[0]+s.x[1])/2,y:(s.y[0]+s.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(e.width-2*r)/(s.x[1]-s.x[0]),(e.height-2*r)/(s.y[1]-s.y[0])));this.centerAt(l.x,l.y,n),this.zoom(c,n)}return this},getGraphBbox:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!0},r=e0(e.nodeVal),i=e.graphData.nodes.filter(n).map(function(n){return{x:n.x,y:n.y,r:Math.sqrt(Math.max(0,r(n)||1))*e.nodeRelSize}});return i.length?{x:[e1(i,function(e){return e.x-e.r}),e2(i,function(e){return e.x+e.r})],y:[e1(i,function(e){return e.y-e.r}),e2(i,function(e){return e.y+e.r})]}:null},pauseAnimation:function(e){return e.animationFrameRequestId&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),this},resumeAnimation:function(e){return e.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},lv),stateInit:function(){return{lastSetZoom:1,zoom:function(){var e,n,r,i=su,o=sh,a=sm,s=sf,l=sp,c=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],h=250,d=aR,f=y("start","zoom","end"),p=0,m=10;function g(e){e.property("__zoom",sd).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",O).filter(l).on("touchstart.zoom",T).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(e,n){return(n=Math.max(c[0],Math.min(c[1],n)))===e.k?e:new so(n,e.x,e.y)}function b(e,n,r){var i=n[0]-r[0]*e.k,o=n[1]-r[1]*e.k;return i===e.x&&o===e.y?e:new so(e.k,i,o)}function _(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function w(e,n,r,i){e.on("start.zoom",function(){x(this,arguments).event(i).start()}).on("interrupt.zoom end.zoom",function(){x(this,arguments).event(i).end()}).tween("zoom",function(){var e=arguments,a=x(this,e).event(i),s=o.apply(this,e),l=null==r?_(s):"function"==typeof r?r.apply(this,e):r,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=this.__zoom,h="function"==typeof n?n.apply(this,e):n,f=d(u.invert(l).concat(c/u.k),h.invert(l).concat(c/h.k));return function(e){if(1===e)e=h;else{var n=f(e),r=c/n[2];e=new so(r,l[0]-n[0]*r,l[1]-n[1]*r)}a.zoom(null,e)}})}function x(e,n,r){return!r&&e.__zooming||new k(e,n)}function k(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,n),this.taps=0}function E(e,...n){if(i.apply(this,arguments)){var r=x(this,n).event(e),o=this.__zoom,l=Math.max(c[0],Math.min(c[1],o.k*Math.pow(2,s.apply(this,arguments)))),h=oM(e);if(r.wheel)(r.mouse[0][0]!==h[0]||r.mouse[0][1]!==h[1])&&(r.mouse[1]=o.invert(r.mouse[0]=h)),clearTimeout(r.wheel);else{if(o.k===l)return;r.mouse=[h,o.invert(h)],aH(this),r.start()}sc(e),r.wheel=setTimeout(function(){r.wheel=null,r.end()},150),r.zoom("mouse",a(b(v(o,l),r.mouse[0],r.mouse[1]),r.extent,u))}}function A(e,...n){if(!r&&i.apply(this,arguments)){var o=e.currentTarget,s=x(this,n,!0).event(e),l=oP(e.view).on("mousemove.zoom",function(e){if(sc(e),!s.moved){var n=e.clientX-h,r=e.clientY-d;s.moved=n*n+r*r>p}s.event(e).zoom("mouse",a(b(s.that.__zoom,s.mouse[0]=oM(e,o),s.mouse[1]),s.extent,u))},!0).on("mouseup.zoom",function(e){l.on("mousemove.zoom mouseup.zoom",null),aN(e.view,s.moved),sc(e),s.event(e).end()},!0),c=oM(e,o),h=e.clientX,d=e.clientY;aD(e.view),sl(e),s.mouse=[c,this.__zoom.invert(c)],aH(this),s.start()}}function O(e,...n){if(i.apply(this,arguments)){var r=this.__zoom,s=oM(e.changedTouches?e.changedTouches[0]:e,this),l=r.invert(s),c=r.k*(e.shiftKey?.5:2),d=a(b(v(r,c),s,l),o.apply(this,n),u);sc(e),h>0?oP(this).transition().duration(h).call(w,d,s,e):oP(this).call(g.transform,d,s,e)}}function T(r,...o){if(i.apply(this,arguments)){var a,s,l,c,u=r.touches,h=u.length,d=x(this,o,r.changedTouches.length===h).event(r);for(sl(r),s=0;s<h;++s)c=[c=oM(l=u[s],this),this.__zoom.invert(c),l.identifier],d.touch0?d.touch1||d.touch0[2]===c[2]||(d.touch1=c,d.taps=0):(d.touch0=c,a=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(d.taps<2&&(n=c[0],e=setTimeout(function(){e=null},500)),aH(this),d.start())}}function C(e,...n){if(this.__zooming){var r,i,o,s,l=x(this,n).event(e),c=e.changedTouches,h=c.length;for(sc(e),r=0;r<h;++r)o=oM(i=c[r],this),l.touch0&&l.touch0[2]===i.identifier?l.touch0[0]=o:l.touch1&&l.touch1[2]===i.identifier&&(l.touch1[0]=o);if(i=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],p=l.touch1[0],m=l.touch1[1],g=(g=p[0]-d[0])*g+(g=p[1]-d[1])*g,y=(y=m[0]-f[0])*y+(y=m[1]-f[1])*y;i=v(i,Math.sqrt(g/y)),o=[(d[0]+p[0])/2,(d[1]+p[1])/2],s=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else{if(!l.touch0)return;o=l.touch0[0],s=l.touch0[1]}l.zoom("touch",a(b(i,o,s),l.extent,u))}}function P(e,...i){if(this.__zooming){var o,a,s=x(this,i).event(e),l=e.changedTouches,c=l.length;for(sl(e),r&&clearTimeout(r),r=setTimeout(function(){r=null},500),o=0;o<c;++o)a=l[o],s.touch0&&s.touch0[2]===a.identifier?delete s.touch0:s.touch1&&s.touch1[2]===a.identifier&&delete s.touch1;if(s.touch1&&!s.touch0&&(s.touch0=s.touch1,delete s.touch1),s.touch0)s.touch0[1]=this.__zoom.invert(s.touch0[0]);else if(s.end(),2===s.taps&&(a=oM(a,this),Math.hypot(n[0]-a[0],n[1]-a[1])<m)){var u=oP(this).on("dblclick.zoom");u&&u.apply(this,arguments)}}}return g.transform=function(e,n,r,i){var o=e.selection?e.selection():e;o.property("__zoom",sd),e!==o?w(e,n,r,i):o.interrupt().each(function(){x(this,arguments).event(i).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},g.scaleBy=function(e,n,r,i){g.scaleTo(e,function(){var e=this.__zoom.k,r="function"==typeof n?n.apply(this,arguments):n;return e*r},r,i)},g.scaleTo=function(e,n,r,i){g.transform(e,function(){var e=o.apply(this,arguments),i=this.__zoom,s=null==r?_(e):"function"==typeof r?r.apply(this,arguments):r,l=i.invert(s),c="function"==typeof n?n.apply(this,arguments):n;return a(b(v(i,c),s,l),e,u)},r,i)},g.translateBy=function(e,n,r,i){g.transform(e,function(){return a(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof r?r.apply(this,arguments):r),o.apply(this,arguments),u)},null,i)},g.translateTo=function(e,n,r,i,s){g.transform(e,function(){var e=o.apply(this,arguments),s=this.__zoom,l=null==i?_(e):"function"==typeof i?i.apply(this,arguments):i;return a(sa.translate(l[0],l[1]).scale(s.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof r?-r.apply(this,arguments):-r),e,u)},i,s)},k.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,n){return this.mouse&&"mouse"!==e&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var n=oP(this.that).datum();f.call(e,this.that,new si(e,{sourceEvent:this.sourceEvent,target:g,type:e,transform:this.that.__zoom,dispatch:f}),n)}},g.wheelDelta=function(e){return arguments.length?(s="function"==typeof e?e:sr(+e),g):s},g.filter=function(e){return arguments.length?(i="function"==typeof e?e:sr(!!e),g):i},g.touchable=function(e){return arguments.length?(l="function"==typeof e?e:sr(!!e),g):l},g.extent=function(e){return arguments.length?(o="function"==typeof e?e:sr([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),g):o},g.scaleExtent=function(e){return arguments.length?(c[0]=+e[0],c[1]=+e[1],g):[c[0],c[1]]},g.translateExtent=function(e){return arguments.length?(u[0][0]=+e[0][0],u[1][0]=+e[1][0],u[0][1]=+e[0][1],u[1][1]=+e[1][1],g):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},g.constrain=function(e){return arguments.length?(a=e,g):a},g.duration=function(e){return arguments.length?(h=+e,g):h},g.interpolate=function(e){return arguments.length?(d=e,g):d},g.on=function(){var e=f.on.apply(f,arguments);return e===f?g:e},g.clickDistance=function(e){return arguments.length?(p=(e*=1)*e,g):Math.sqrt(p)},g.tapDistance=function(e){return arguments.length?(m=+e,g):m},g}(),forceGraph:new lf,shadowGraph:new lf().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new sN,tweenGroup:new i$}},init:function(e,n){var r=this;e.innerHTML="";var i=document.createElement("div");i.classList.add("force-graph-container"),i.style.position="relative",e.appendChild(i),n.canvas=document.createElement("canvas"),n.backgroundColor&&(n.canvas.style.background=n.backgroundColor),i.appendChild(n.canvas),n.shadowCanvas=document.createElement("canvas");var o=n.canvas.getContext("2d"),a=n.shadowCanvas.getContext("2d",{willReadFrequently:!0}),s={x:-1e12,y:-1e12},l=function(){var e=null,r=window.devicePixelRatio,i=s.x>0&&s.y>0?a.getImageData(s.x*r,s.y*r,1,1):null;return i&&(e=n.colorTracker.lookup(i.data)),e};oP(n.canvas).call((function(){var e,n,r,i,o=sv,a=sb,s=s_,l=sw,c={},u=y("start","drag","end"),h=0,d=0;function f(e){e.on("mousedown.drag",p).filter(l).on("touchstart.drag",v).on("touchmove.drag",b,aC).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(s,l){if(!i&&o.call(this,s,l)){var c=w(this,a.call(this,s,l),s,l,"mouse");c&&(oP(s.view).on("mousemove.drag",m,aP).on("mouseup.drag",g,aP),aD(s.view),aM(s),r=!1,e=s.clientX,n=s.clientY,c("start",s))}}function m(i){if(aS(i),!r){var o=i.clientX-e,a=i.clientY-n;r=o*o+a*a>d}c.mouse("drag",i)}function g(e){oP(e.view).on("mousemove.drag mouseup.drag",null),aN(e.view,r),aS(e),c.mouse("end",e)}function v(e,n){if(o.call(this,e,n)){var r,i,s=e.changedTouches,l=a.call(this,e,n),c=s.length;for(r=0;r<c;++r)(i=w(this,l,e,n,s[r].identifier,s[r]))&&(aM(e),i("start",e,s[r]))}}function b(e){var n,r,i=e.changedTouches,o=i.length;for(n=0;n<o;++n)(r=c[i[n].identifier])&&(aS(e),r("drag",e,i[n]))}function _(e){var n,r,o=e.changedTouches,a=o.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),n=0;n<a;++n)(r=c[o[n].identifier])&&(aM(e),r("end",e,o[n]))}function w(e,n,r,i,o,a){var l,d,p,m=u.copy(),g=oM(a||r,n);if(null!=(p=s.call(e,new sy("beforestart",{sourceEvent:r,target:f,identifier:o,active:h,x:g[0],y:g[1],dx:0,dy:0,dispatch:m}),i)))return l=p.x-g[0]||0,d=p.y-g[1]||0,function r(a,s,u){var y,v=g;switch(a){case"start":c[o]=r,y=h++;break;case"end":delete c[o],--h;case"drag":g=oM(u||s,n),y=h}m.call(a,e,new sy(a,{sourceEvent:s,subject:p,target:f,identifier:o,active:y,x:g[0]+l,y:g[1]+d,dx:g[0]-v[0],dy:g[1]-v[1],dispatch:m}),i)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:sg(!!e),f):o},f.container=function(e){return arguments.length?(a="function"==typeof e?e:sg(e),f):a},f.subject=function(e){return arguments.length?(s="function"==typeof e?e:sg(e),f):s},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:sg(!!e),f):l},f.on=function(){var e=u.on.apply(u,arguments);return e===u?f:e},f.clickDistance=function(e){return arguments.length?(d=(e*=1)*e,f):Math.sqrt(d)},f})().subject(function(){if(!n.enableNodeDrag)return null;var e=l();return e&&"Node"===e.type?e.d:null}).on("start",function(e){var r=e.subject;r.__initialDragPos={x:r.x,y:r.y,fx:r.fx,fy:r.fy},e.active||(r.fx=r.x,r.fy=r.y),n.canvas.classList.add("grabbable")}).on("drag",function(e){var r=e.subject,i=r.__initialDragPos,o=ss(n.canvas).k,a={x:i.x+(e.x-i.x)/o-r.x,y:i.y+(e.y-i.y)/o-r.y};["x","y"].forEach(function(n){return r["f".concat(n)]=r[n]=i[n]+(e[n]-i[n])/o}),!r.__dragged&&5>=Math.sqrt(function(e,n){let r=0;for(let n of e)(n*=1)&&(r+=n);return r}(["x","y"].map(function(n){return Math.pow(e[n]-i[n],2)})))||(n.forceGraph.d3AlphaTarget(.3).resetCountdown(),n.isPointerDragging=!0,r.__dragged=!0,n.onNodeDrag(r,a))}).on("end",function(e){var r=e.subject,i=r.__initialDragPos,o={x:r.x-i.x,y:r.y-i.y};void 0===i.fx&&(r.fx=void 0),void 0===i.fy&&(r.fy=void 0),delete r.__initialDragPos,n.forceGraph.d3AlphaTarget()&&n.forceGraph.d3AlphaTarget(0).resetCountdown(),n.canvas.classList.remove("grabbable"),n.isPointerDragging=!1,r.__dragged&&(delete r.__dragged,n.onNodeDragEnd(r,o))})),n.zoom(n.zoom.__baseElem=oP(n.canvas)),n.zoom.__baseElem.on("dblclick.zoom",null),n.zoom.filter(function(e){return!e.button&&n.enableZoomPanInteraction&&("wheel"!==e.type||e0(n.enableZoomInteraction)(e))&&("wheel"===e.type||e0(n.enablePanInteraction)(e))}).on("zoom",function(e){var i=e.transform;[o,a].forEach(function(e){l_(e),e.translate(i.x,i.y),e.scale(i.k,i.k)}),n.isPointerDragging=!0,n.onZoom&&n.onZoom(li(li({},i),r.centerAt())),n.needsRedraw=!0}).on("end",function(e){n.isPointerDragging=!1,n.onZoomEnd&&n.onZoomEnd(li(li({},e.transform),r.centerAt()))}),lb(n),n.forceGraph.onNeedsRedraw(function(){return n.needsRedraw=!0}).onFinishUpdate(function(){ss(n.canvas).k===n.lastSetZoom&&n.graphData.nodes.length&&(n.zoom.scaleTo(n.zoom.__baseElem,n.lastSetZoom=4/Math.cbrt(n.graphData.nodes.length)),n.needsRedraw=!0)}),n.tooltip=new as(i),["pointermove","pointerdown"].forEach(function(e){return i.addEventListener(e,function(r){"pointerdown"===e&&(n.isPointerPressed=!0,n.pointerDownEvent=r),!n.isPointerDragging&&"pointermove"===r.type&&n.onBackgroundClick&&(r.pressure>0||n.isPointerPressed)&&("touch"!==r.pointerType||void 0===r.movementX||[r.movementX,r.movementY].some(function(e){return Math.abs(e)>1}))&&(n.isPointerDragging=!0);var o,a,l,c=(o=i.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,l=window.pageYOffset||document.documentElement.scrollTop,{top:o.top+l,left:o.left+a});s.x=r.pageX-c.left,s.y=r.pageY-c.top},{passive:!0})}),i.addEventListener("pointerup",function(e){if(n.isPointerPressed=!1,n.isPointerDragging){n.isPointerDragging=!1;return}var r=[e,n.pointerDownEvent];requestAnimationFrame(function(){if(0===e.button)if(n.hoverObj){var i=n["on".concat(n.hoverObj.type,"Click")];i&&i.apply(void 0,[n.hoverObj.d].concat(r))}else n.onBackgroundClick&&n.onBackgroundClick.apply(n,r);if(2===e.button)if(n.hoverObj){var o=n["on".concat(n.hoverObj.type,"RightClick")];o&&o.apply(void 0,[n.hoverObj.d].concat(r))}else n.onBackgroundRightClick&&n.onBackgroundRightClick.apply(n,r)})},{passive:!0}),i.addEventListener("contextmenu",function(e){return!n.onBackgroundRightClick&&!n.onNodeRightClick&&!n.onLinkRightClick||(e.preventDefault(),!1)}),n.forceGraph(o),n.shadowGraph(a);var c=sx(function(){lw(a,n.width,n.height),n.shadowGraph.linkWidth(function(e){return e0(n.linkWidth)(e)+n.linkHoverPrecision});var e=ss(n.canvas);n.shadowGraph.globalScale(e.k).tickFrame()},800);n.flushShadowCanvas=c.flush,(this._animationCycle=function e(){var r=!n.autoPauseRedraw||!!n.needsRedraw||n.forceGraph.isEngineRunning()||n.graphData.links.some(function(e){return e.__photons&&e.__photons.length});if(n.needsRedraw=!1,n.enablePointerInteraction){var i=n.isPointerDragging?null:l();if(i!==n.hoverObj){var a=n.hoverObj,s=a?a.type:null,u=i?i.type:null;if(s&&s!==u){var h=n["on".concat(s,"Hover")];h&&h(null,a.d)}if(u){var d=n["on".concat(u,"Hover")];d&&d(i.d,s===u?a.d:null)}n.tooltip.content(i&&e0(n["".concat(i.type.toLowerCase(),"Label")])(i.d)||null),n.canvas.classList[i&&n["on".concat(u,"Click")]||!i&&n.onBackgroundClick?"add":"remove"]("clickable"),n.hoverObj=i}r&&c()}if(r){lw(o,n.width,n.height);var f=ss(n.canvas).k;n.onRenderFramePre&&n.onRenderFramePre(o,f),n.forceGraph.globalScale(f).tickFrame(),n.onRenderFramePost&&n.onRenderFramePost(o,f)}n.tweenGroup.update(),n.animationFrameRequestId=requestAnimationFrame(e)})()},update:function(e){}}),lk={width:ro.number,height:ro.number,graphData:ro.shape({nodes:ro.arrayOf(ro.object).isRequired,links:ro.arrayOf(ro.object).isRequired}),backgroundColor:ro.string,nodeRelSize:ro.number,nodeId:ro.string,nodeLabel:ro.oneOfType([ro.string,ro.func]),nodeVal:ro.oneOfType([ro.number,ro.string,ro.func]),nodeVisibility:ro.oneOfType([ro.bool,ro.string,ro.func]),nodeColor:ro.oneOfType([ro.string,ro.func]),nodeAutoColorBy:ro.oneOfType([ro.string,ro.func]),onNodeHover:ro.func,onNodeClick:ro.func,linkSource:ro.string,linkTarget:ro.string,linkLabel:ro.oneOfType([ro.string,ro.func]),linkVisibility:ro.oneOfType([ro.bool,ro.string,ro.func]),linkColor:ro.oneOfType([ro.string,ro.func]),linkAutoColorBy:ro.oneOfType([ro.string,ro.func]),linkWidth:ro.oneOfType([ro.number,ro.string,ro.func]),linkCurvature:ro.oneOfType([ro.number,ro.string,ro.func]),linkDirectionalArrowLength:ro.oneOfType([ro.number,ro.string,ro.func]),linkDirectionalArrowColor:ro.oneOfType([ro.string,ro.func]),linkDirectionalArrowRelPos:ro.oneOfType([ro.number,ro.string,ro.func]),linkDirectionalParticles:ro.oneOfType([ro.number,ro.string,ro.func]),linkDirectionalParticleSpeed:ro.oneOfType([ro.number,ro.string,ro.func]),linkDirectionalParticleWidth:ro.oneOfType([ro.number,ro.string,ro.func]),linkDirectionalParticleColor:ro.oneOfType([ro.string,ro.func]),onLinkHover:ro.func,onLinkClick:ro.func,dagMode:ro.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:ro.number,dagNodeFilter:ro.func,onDagError:ro.func,d3AlphaMin:ro.number,d3AlphaDecay:ro.number,d3VelocityDecay:ro.number,warmupTicks:ro.number,cooldownTicks:ro.number,cooldownTime:ro.number,onEngineTick:ro.func,onEngineStop:ro.func,getGraphBbox:ro.func},lE={zoomToFit:ro.func,onNodeRightClick:ro.func,onNodeDrag:ro.func,onNodeDragEnd:ro.func,onLinkRightClick:ro.func,linkHoverPrecision:ro.number,onBackgroundClick:ro.func,onBackgroundRightClick:ro.func,enablePointerInteraction:ro.bool,enableNodeDrag:ro.bool},lA={showNavInfo:ro.bool,nodeOpacity:ro.number,nodeResolution:ro.number,nodeThreeObject:ro.oneOfType([ro.object,ro.string,ro.func]),nodeThreeObjectExtend:ro.oneOfType([ro.bool,ro.string,ro.func]),linkOpacity:ro.number,linkResolution:ro.number,linkCurveRotation:ro.oneOfType([ro.number,ro.string,ro.func]),linkMaterial:ro.oneOfType([ro.object,ro.string,ro.func]),linkThreeObject:ro.oneOfType([ro.object,ro.string,ro.func]),linkThreeObjectExtend:ro.oneOfType([ro.bool,ro.string,ro.func]),linkPositionUpdate:ro.func,linkDirectionalArrowResolution:ro.number,linkDirectionalParticleResolution:ro.number,forceEngine:ro.oneOf(["d3","ngraph"]),ngraphPhysics:ro.object,numDimensions:ro.oneOf([1,2,3])},lO=Object.assign({},lk,lE,{linkLineDash:ro.oneOfType([ro.arrayOf(ro.number),ro.string,ro.func]),nodeCanvasObjectMode:ro.oneOfType([ro.string,ro.func]),nodeCanvasObject:ro.func,nodePointerAreaPaint:ro.func,linkCanvasObjectMode:ro.oneOfType([ro.string,ro.func]),linkCanvasObject:ro.func,linkPointerAreaPaint:ro.func,autoPauseRedraw:ro.bool,minZoom:ro.number,maxZoom:ro.number,enableZoomInteraction:ro.oneOfType([ro.bool,ro.func]),enablePanInteraction:ro.oneOfType([ro.bool,ro.func]),onZoom:ro.func,onZoomEnd:ro.func,onRenderFramePre:ro.func,onRenderFramePost:ro.func}),lT=Object.assign({},lk,lE,lA,{enableNavigationControls:ro.bool,controlType:ro.oneOf(["trackball","orbit","fly"]),rendererConfig:ro.object,extraRenderers:ro.arrayOf(ro.shape({render:ro.func.isRequired}))}),lC=Object.assign({},lk,lA,{nodeDesc:ro.oneOfType([ro.string,ro.func]),linkDesc:ro.oneOfType([ro.string,ro.func])}),lP=Object.assign({},lk,lA,{markerAttrs:ro.object,yOffset:ro.number,glScale:ro.number});let lM=f(ri,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"]});lM.displayName="ForceGraphVR",lM.propTypes=lC;let lS=f(rf,{methodNames:["getGraphBbox","emitParticle","d3Force","d3ReheatSimulation","refresh"],initPropNames:["markerAttrs"]});lS.displayName="ForceGraphAR",lS.propTypes=lP;let lD=f(aO,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","cameraPosition","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords","postProcessingComposer","lights","scene","camera","renderer","controls","refresh"],initPropNames:["controlType","rendererConfig","extraRenderers"]});lD.displayName="ForceGraph3D",lD.propTypes=lT;let lN=f(lx,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});lN.displayName="ForceGraph2D",lN.propTypes=lO},39101:e=>{e.exports=AFRAME.registerComponent("checkpoint",{schema:{offset:{default:{x:0,y:0,z:0},type:"vec3"}},init:function(){this.active=!1,this.targetEl=null,this.fire=this.fire.bind(this),this.offset=new THREE.Vector3},update:function(){this.offset.copy(this.data.offset)},play:function(){this.el.addEventListener("click",this.fire)},pause:function(){this.el.removeEventListener("click",this.fire)},remove:function(){this.pause()},fire:function(){let e=this.el.sceneEl.querySelector("[checkpoint-controls]");if(!e)throw Error("No `checkpoint-controls` component found.");e.components["checkpoint-controls"].setCheckpoint(this.el)},getOffset:function(){return this.offset.copy(this.data.offset)}})},42729:(e,n,r)=>{r(68241);let i=window.KeyboardEvent;e.exports=AFRAME.registerComponent("keyboard-controls",{schema:{enabled:{default:!0},debug:{default:!1}},init:function(){this.dVelocity=new THREE.Vector3,this.localKeys={},this.listeners={keydown:this.onKeyDown.bind(this),keyup:this.onKeyUp.bind(this),blur:this.onBlur.bind(this),onContextMenu:this.onContextMenu.bind(this)}},isVelocityActive:function(){return this.data.enabled&&!!Object.keys(this.getKeys()).length},getVelocityDelta:function(){let e=this.data,n=this.getKeys();return this.dVelocity.set(0,0,0),e.enabled&&((n.KeyW||n.ArrowUp)&&(this.dVelocity.z-=1),(n.KeyA||n.ArrowLeft)&&(this.dVelocity.x-=1),(n.KeyS||n.ArrowDown)&&(this.dVelocity.z+=1),(n.KeyD||n.ArrowRight)&&(this.dVelocity.x+=1),n.ShiftLeft&&(this.dVelocity=this.dVelocity.multiplyScalar(2))),this.dVelocity.clone()},play:function(){this.attachEventListeners()},pause:function(){this.removeEventListeners()},attachEventListeners:function(){window.addEventListener("contextmenu",this.listeners.onContextMenu,!1),window.addEventListener("keydown",this.listeners.keydown,!1),window.addEventListener("keyup",this.listeners.keyup,!1),window.addEventListener("blur",this.listeners.blur,!1)},onContextMenu:function(){for(let e in this.localKeys)this.localKeys.hasOwnProperty(e)&&delete this.localKeys[e]},removeEventListeners:function(){window.removeEventListener("keydown",this.listeners.keydown),window.removeEventListener("keyup",this.listeners.keyup),window.removeEventListener("blur",this.listeners.blur)},onKeyDown:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(this.localKeys[e.code]=!0,this.emit(e))},onKeyUp:function(e){AFRAME.utils.shouldCaptureKeyEvent(e)&&(delete this.localKeys[e.code],this.emit(e))},onBlur:function(){for(let e in this.localKeys)this.localKeys.hasOwnProperty(e)&&delete this.localKeys[e]},emit:function(e){"__keyboard-controls-proxy"in e&&this.el.emit(e.type,e),this.el.emit(e.type+":"+e.code,new i(e.type,e)),this.data.debug&&console.log(e.type+":"+e.code)},isPressed:function(e){return e in this.getKeys()},getKeys:function(){return this.isProxied()?this.el.sceneEl.components["proxy-controls"].getKeyboard():this.localKeys},isProxied:function(){let e=this.el.sceneEl.components["proxy-controls"];return e&&e.isConnected()}})},47895:(e,n,r)=>{e.exports=function(e){var n=r(12223),h=r(67411),d=r(6106);if(e){if(void 0!==e.springCoeff)throw Error("springCoeff was renamed to springCoefficient");if(void 0!==e.dragCoeff)throw Error("dragCoeff was renamed to dragCoefficient")}var f=u[(e=h(e,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1})).dimensions];if(!f){var p=e.dimensions;f={Body:i(p,e.debug),createQuadTree:o(p),createBounds:a(p),createDragForce:s(p),createSpringForce:l(p),integrate:c(p)},u[p]=f}var m=f.Body,g=f.createQuadTree,y=f.createBounds,v=f.createDragForce,b=f.createSpringForce,_=f.integrate,w=e=>new m(e),x=r(19992).random(42),k=[],E=[],A=g(e,x),O=y(k,e,x),T=b(e,x),C=v(e),P=[],M=new Map,S=0;j("nbody",function(){if(0!==k.length){A.insertBodies(k);for(var e=k.length;e--;){var n=k[e];n.isPinned||(n.reset(),A.updateBodyForce(n),C.update(n))}}}),j("spring",function(){for(var e=E.length;e--;)T.update(E[e])});var D={bodies:k,quadTree:A,springs:E,settings:e,addForce:j,removeForce:function(e){var n=P.indexOf(M.get(e));n<0||(P.splice(n,1),M.delete(e))},getForces:function(){return M},step:function(){for(var n=0;n<P.length;++n)P[n](S);var r=_(k,e.timeStep,e.adaptiveTimeStepWeight);return S+=1,r},addBody:function(e){if(!e)throw Error("Body is required");return k.push(e),e},addBodyAt:function(e){if(!e)throw Error("Body position is required");var n=w(e);return k.push(n),n},removeBody:function(e){if(e){var n=k.indexOf(e);if(!(n<0))return k.splice(n,1),0===k.length&&O.reset(),!0}},addSpring:function(e,r,i,o){if(!e||!r)throw Error("Cannot add null spring to force simulator");"number"!=typeof i&&(i=-1);var a=new n(e,r,i,o>=0?o:-1);return E.push(a),a},getTotalMovement:function(){return 0},removeSpring:function(e){if(e){var n=E.indexOf(e);if(n>-1)return E.splice(n,1),!0}},getBestNewBodyPosition:function(e){return O.getBestNewPosition(e)},getBBox:N,getBoundingBox:N,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(n){return void 0!==n?(e.gravity=n,A.options({gravity:n}),this):e.gravity},theta:function(n){return void 0!==n?(e.theta=n,A.options({theta:n}),this):e.theta},random:x};return function(e,n){for(var r in e)!function(e,n,r){e.hasOwnProperty(r)&&"function"!=typeof n[r]&&(Number.isFinite(e[r])?n[r]=function(i){if(void 0!==i){if(!Number.isFinite(i))throw Error("Value of "+r+" should be a valid number.");return e[r]=i,n}return e[r]}:n[r]=function(i){return void 0!==i?(e[r]=i,n):e[r]})}(e,n,r)}(e,D),d(D),D;function N(){return O.update(),O.box}function j(e,n){if(M.has(e))throw Error("Force "+e+" is already added");M.set(e,n),P.push(n)}};var i=r(49229),o=r(27550),a=r(95704),s=r(19514),l=r(63027),c=r(76568),u={}},49062:(e,n,r)=>{e.exports=function(e,n){if(!e)throw Error("Graph structure cannot be undefined");var a=(n&&n.createSimulator||r(47895))(n);if(Array.isArray(n))throw Error("Physics settings is expected to be an object");var s=e.version>19?function(n){var r=e.getLinks(n);return r?1+r.size/3:1}:function(n){var r=e.getLinks(n);return r?1+r.length/3:1};n&&"function"==typeof n.nodeMass&&(s=n.nodeMass);var l=new Map,c={},u=0,h=a.settings.springTransform||o;u=0,e.forEachNode(function(e){y(e.id),u+=1}),e.forEachLink(v),e.on("changed",g);var d=!1,f={step:function(){if(0===u)return p(!0),!0;var e=a.step();f.lastMove=e,f.fire("step");var n=e/u<=.01;return p(n),n},getNodePosition:function(e){return _(e).pos},setNodePosition:function(e){var n=_(e);n.setPosition.apply(n,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(e){var n=c[e];if(n)return{from:n.from.pos,to:n.to.pos}},getGraphRect:function(){return a.getBBox()},forEachBody:m,pinNode:function(e,n){_(e.id).isPinned=!!n},isNodePinned:function(e){return _(e.id).isPinned},dispose:function(){e.off("changed",g),f.fire("disposed")},getBody:function(e){return l.get(e)},getSpring:function(n,r){var i;if(void 0===r)i="object"!=typeof n?n:n.id;else{var o=e.hasLink(n,r);if(!o)return;i=o.id}return c[i]},getForceVectorLength:function(){var e=0,n=0;return m(function(r){e+=Math.abs(r.force.x),n+=Math.abs(r.force.y)}),Math.sqrt(e*e+n*n)},simulator:a,graph:e,lastMove:0};return i(f),f;function p(e){var n;d!==e&&(d=e,n=e,f.fire("stable",n))}function m(e){l.forEach(e)}function g(n){for(var r=0;r<n.length;++r){var i=n[r];"add"===i.changeType?(i.node&&y(i.node.id),i.link&&v(i.link)):"remove"===i.changeType&&(i.node&&function(e){var n=e.id,r=l.get(n);r&&(l.delete(n),a.removeBody(r))}(i.node),i.link&&function(n){var r=c[n.id];if(r){var i=e.getNode(n.fromId),o=e.getNode(n.toId);i&&b(i.id),o&&b(o.id),delete c[n.id],a.removeSpring(r)}}(i.link))}u=e.getNodesCount()}function y(n){var r=l.get(n);if(!r){var i,o=e.getNode(n);if(!o)throw Error("initBody() was called with unknown node id");var s=o.position;if(!s){var c=function(e){var n=[];if(!e.links)return n;for(var r=Math.min(e.links.length,2),i=0;i<r;++i){var o=e.links[i],a=o.fromId!==e.id?l.get(o.fromId):l.get(o.toId);a&&a.pos&&n.push(a)}return n}(o);s=a.getBestNewBodyPosition(c)}(r=a.addBodyAt(s)).id=n,l.set(n,r),b(n),(i=o)&&(i.isPinned||i.data&&i.data.isPinned)&&(r.isPinned=!0)}}function v(e){b(e.fromId),b(e.toId);var n=l.get(e.fromId),r=l.get(e.toId),i=a.addSpring(n,r,e.length);h(e,i),c[e.id]=i}function b(e){var n=l.get(e);if(n.mass=s(e),Number.isNaN(n.mass))throw Error("Node mass should be a number")}function _(e){var n=l.get(e);return n||(y(e),n=l.get(e)),n}},e.exports.simulator=r(47895);var i=r(6106);function o(){}},49229:(e,n,r)=>{let i=r(60455);function o(e,n){return`
${s(e,n)}
${a(e,n)}
return {Body: Body, Vector: Vector};
`}function a(e){let n=i(e),r=n("{var}",{join:", "});return`
function Body(${r}) {
  this.isPinned = false;
  this.pos = new Vector(${r});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${r}) {
  ${n("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function s(e,n){let r=i(e),o="";n&&(o=`${r("\n   var v{var};\nObject.defineProperty(this, '{var}', {\n  set: function(v) { \n    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');\n    v{var} = v; \n  },\n  get: function() { return v{var}; }\n});")}`);let a=r("{var}",{join:", "});return`function Vector(${a}) {
  ${o}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${r('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${r("this.{var} = v.{var};",{indent:4})}
    } else {
      ${r('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${r("this.{var} = ",{join:""})}0;
  };`}e.exports=function(e,n){let{Body:r}=Function(o(e,n))();return r},e.exports.generateCreateBodyFunctionBody=o,e.exports.getVectorCode=s,e.exports.getBodyCode=a},49737:(e,n,r)=>{r(39101),r(1759),r(8877),r(95454),r(22769)},52209:e=>{e.exports=AFRAME.registerComponent("touch-controls",{schema:{enabled:{default:!0},reverseEnabled:{default:!0}},init:function(){this.dVelocity=new THREE.Vector3,this.bindMethods(),this.direction=0},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners(),this.dVelocity.set(0,0,0)},remove:function(){this.pause()},addEventListeners:function(){let e=this.el.sceneEl,n=e.canvas;if(!n)return void e.addEventListener("render-target-loaded",this.addEventListeners.bind(this));n.addEventListener("touchstart",this.onTouchStart,{passive:!0}),n.addEventListener("touchend",this.onTouchEnd,{passive:!0});let r=e.getAttribute("vr-mode-ui");r&&r.cardboardModeEnabled&&e.addEventListener("enter-vr",this.onEnterVR)},removeEventListeners:function(){let e=this.el.sceneEl&&this.el.sceneEl.canvas;e&&(e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchend",this.onTouchEnd),this.el.sceneEl.removeEventListener("enter-vr",this.onEnterVR))},isVelocityActive:function(){return this.data.enabled&&!!this.direction},getVelocityDelta:function(){return this.dVelocity.z=this.direction,this.dVelocity.clone()},bindMethods:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onEnterVR=this.onEnterVR.bind(this)},onTouchStart:function(e){this.direction=-1,this.data.reverseEnabled&&e.touches&&2===e.touches.length&&(this.direction=1),e.preventDefault()},onTouchEnd:function(e){this.direction=0,e.preventDefault()},onEnterVR:function(){let e=this.el.sceneEl.xrSession;e&&(e.addEventListener("selectstart",this.onTouchStart),e.addEventListener("selectend",this.onTouchEnd))}})},54952:e=>{e.exports=AFRAME.registerComponent("object-model",{schema:{src:{type:"asset"},crossorigin:{default:""}},init:function(){this.model=null},update:function(){let e,n=this.data;n.src&&(this.remove(),e=new THREE.ObjectLoader,n.crossorigin&&e.setCrossOrigin(n.crossorigin),e.load(n.src,e=>{e.traverse(e=>{e instanceof THREE.SkinnedMesh&&e.material&&(e.material.skinning=!!(e.geometry&&e.geometry.bones||[]).length)}),this.load(e)}))},load:function(e){this.model=e,this.el.setObject3D("mesh",e),this.el.emit("model-loaded",{format:"json",model:e})},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},58103:(e,n,r)=>{r(90635),r(29737),r(49737),r(61005),r(69599)},59132:e=>{e.exports=function(e,n,r){this.type=e,this.index=n,this.pressed=r.pressed,this.value=r.value}},60455:(e,n,r)=>{let i=r(94525);e.exports=function(e){return function(n,r){let o=r&&r.indent||0,a=r&&void 0!==r.join?r.join:"\n",s=Array(o+1).join(" "),l=[];for(let r=0;r<e;++r){let e=i(r),o=0===r?"":s;l.push(o+n.replace(/{var}/g,e))}return l.join(a)}}},61005:(e,n,r)=>{r(84118),r(21504),r(31742)},63027:(e,n,r)=>{let i=r(60455);function o(e){let n=i(e);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${n("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${n("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${n("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${n("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${n("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}e.exports=function(e){return Function("options","random",o(e))},e.exports.generateCreateSpringForceFunctionBody=o},67411:e=>{e.exports=function e(n,r){var i;if(n||(n={}),r){for(i in r)if(r.hasOwnProperty(i)){var o=n.hasOwnProperty(i),a=typeof r[i];o&&typeof n[i]===a?"object"===a&&(n[i]=e(n[i],r[i])):n[i]=r[i]}}return n}},68241:()=>{!function(e){var n,r,i="KeyboardEvent"in e;i||(e.KeyboardEvent=function(){throw TypeError("Illegal constructor")}),"DOM_KEY_LOCATION_STANDARD"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_STANDARD=0),"DOM_KEY_LOCATION_LEFT"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_LEFT=1),"DOM_KEY_LOCATION_RIGHT"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_RIGHT=2),"DOM_KEY_LOCATION_NUMPAD"in e.KeyboardEvent||(e.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD=3);var o=window.KeyboardEvent.DOM_KEY_LOCATION_STANDARD,a=window.KeyboardEvent.DOM_KEY_LOCATION_LEFT,s=window.KeyboardEvent.DOM_KEY_LOCATION_RIGHT,l=window.KeyboardEvent.DOM_KEY_LOCATION_NUMPAD;function c(e,n){return -1!==String(e).indexOf(n)}var u=c(navigator.platform,"Win")?"win":c(navigator.platform,"Mac")?"mac":c(navigator.platform,"CrOS")?"cros":c(navigator.platform,"Linux")?"linux":c(navigator.userAgent,"iPad")||c(navigator.platform,"iPod")||c(navigator.platform,"iPhone")?"ios":"",h=c(navigator.userAgent,"Chrome/")?"chrome":c(navigator.vendor,"Apple")?"safari":c(navigator.userAgent,"MSIE")?"ie":c(navigator.userAgent,"Gecko/")?"moz":c(navigator.userAgent,"Opera/")?"opera":"",d=h+"-"+u;function f(e,n,r){(d===n||h===n||u===n)&&Object.keys(r).forEach(function(n){e[n]=r[n]})}var p={3:{code:"Cancel"},6:{code:"Help"},8:{code:"Backspace"},9:{code:"Tab"},12:{code:"Clear"},13:{code:"Enter"},16:{code:"Shift"},17:{code:"Control"},18:{code:"Alt"},19:{code:"Pause"},20:{code:"CapsLock"},21:{code:"KanaMode"},22:{code:"HangulMode"},23:{code:"JunjaMode"},24:{code:"FinalMode"},25:{code:"KanjiMode"},27:{code:"Escape"},28:{code:"Convert"},29:{code:"NonConvert"},30:{code:"Accept"},31:{code:"ModeChange"},32:{code:"Space"},33:{code:"PageUp"},34:{code:"PageDown"},35:{code:"End"},36:{code:"Home"},37:{code:"ArrowLeft"},38:{code:"ArrowUp"},39:{code:"ArrowRight"},40:{code:"ArrowDown"},41:{code:"Select"},42:{code:"Print"},43:{code:"Execute"},44:{code:"PrintScreen"},45:{code:"Insert"},46:{code:"Delete"},47:{code:"Help"},48:{code:"Digit0",keyCap:"0"},49:{code:"Digit1",keyCap:"1"},50:{code:"Digit2",keyCap:"2"},51:{code:"Digit3",keyCap:"3"},52:{code:"Digit4",keyCap:"4"},53:{code:"Digit5",keyCap:"5"},54:{code:"Digit6",keyCap:"6"},55:{code:"Digit7",keyCap:"7"},56:{code:"Digit8",keyCap:"8"},57:{code:"Digit9",keyCap:"9"},65:{code:"KeyA",keyCap:"a"},66:{code:"KeyB",keyCap:"b"},67:{code:"KeyC",keyCap:"c"},68:{code:"KeyD",keyCap:"d"},69:{code:"KeyE",keyCap:"e"},70:{code:"KeyF",keyCap:"f"},71:{code:"KeyG",keyCap:"g"},72:{code:"KeyH",keyCap:"h"},73:{code:"KeyI",keyCap:"i"},74:{code:"KeyJ",keyCap:"j"},75:{code:"KeyK",keyCap:"k"},76:{code:"KeyL",keyCap:"l"},77:{code:"KeyM",keyCap:"m"},78:{code:"KeyN",keyCap:"n"},79:{code:"KeyO",keyCap:"o"},80:{code:"KeyP",keyCap:"p"},81:{code:"KeyQ",keyCap:"q"},82:{code:"KeyR",keyCap:"r"},83:{code:"KeyS",keyCap:"s"},84:{code:"KeyT",keyCap:"t"},85:{code:"KeyU",keyCap:"u"},86:{code:"KeyV",keyCap:"v"},87:{code:"KeyW",keyCap:"w"},88:{code:"KeyX",keyCap:"x"},89:{code:"KeyY",keyCap:"y"},90:{code:"KeyZ",keyCap:"z"},91:{code:"OSLeft",location:a},92:{code:"OSRight",location:s},93:{code:"ContextMenu"},95:{code:"Standby"},96:{code:"Numpad0",keyCap:"0",location:l},97:{code:"Numpad1",keyCap:"1",location:l},98:{code:"Numpad2",keyCap:"2",location:l},99:{code:"Numpad3",keyCap:"3",location:l},100:{code:"Numpad4",keyCap:"4",location:l},101:{code:"Numpad5",keyCap:"5",location:l},102:{code:"Numpad6",keyCap:"6",location:l},103:{code:"Numpad7",keyCap:"7",location:l},104:{code:"Numpad8",keyCap:"8",location:l},105:{code:"Numpad9",keyCap:"9",location:l},106:{code:"NumpadMultiply",keyCap:"*",location:l},107:{code:"NumpadAdd",keyCap:"+",location:l},108:{code:"NumpadComma",keyCap:",",location:l},109:{code:"NumpadSubtract",keyCap:"-",location:l},110:{code:"NumpadDecimal",keyCap:".",location:l},111:{code:"NumpadDivide",keyCap:"/",location:l},112:{code:"F1"},113:{code:"F2"},114:{code:"F3"},115:{code:"F4"},116:{code:"F5"},117:{code:"F6"},118:{code:"F7"},119:{code:"F8"},120:{code:"F9"},121:{code:"F10"},122:{code:"F11"},123:{code:"F12"},124:{code:"F13"},125:{code:"F14"},126:{code:"F15"},127:{code:"F16"},128:{code:"F17"},129:{code:"F18"},130:{code:"F19"},131:{code:"F20"},132:{code:"F21"},133:{code:"F22"},134:{code:"F23"},135:{code:"F24"},144:{code:"NumLock",location:l},145:{code:"ScrollLock"},160:{code:"ShiftLeft",location:a},161:{code:"ShiftRight",location:s},162:{code:"ControlLeft",location:a},163:{code:"ControlRight",location:s},164:{code:"AltLeft",location:a},165:{code:"AltRight",location:s},166:{code:"BrowserBack"},167:{code:"BrowserForward"},168:{code:"BrowserRefresh"},169:{code:"BrowserStop"},170:{code:"BrowserSearch"},171:{code:"BrowserFavorites"},172:{code:"BrowserHome"},173:{code:"VolumeMute"},174:{code:"VolumeDown"},175:{code:"VolumeUp"},176:{code:"MediaTrackNext"},177:{code:"MediaTrackPrevious"},178:{code:"MediaStop"},179:{code:"MediaPlayPause"},180:{code:"LaunchMail"},181:{code:"MediaSelect"},182:{code:"LaunchApp1"},183:{code:"LaunchApp2"},186:{code:"Semicolon",keyCap:";"},187:{code:"Equal",keyCap:"="},188:{code:"Comma",keyCap:","},189:{code:"Minus",keyCap:"-"},190:{code:"Period",keyCap:"."},191:{code:"Slash",keyCap:"/"},192:{code:"Backquote",keyCap:"`"},219:{code:"BracketLeft",keyCap:"["},220:{code:"Backslash",keyCap:"\\"},221:{code:"BracketRight",keyCap:"]"},222:{code:"Quote",keyCap:"'"},226:{code:"IntlBackslash",keyCap:"\\"},229:{code:"Process"},246:{code:"Attn"},247:{code:"CrSel"},248:{code:"ExSel"},249:{code:"EraseEof"},250:{code:"Play"},251:{code:"ZoomToggle"},254:{code:"Clear"}};f(p,"moz",{59:{code:"Semicolon",keyCap:";"},61:{code:"Equal",keyCap:"="},107:{code:"Equal",keyCap:"="},109:{code:"Minus",keyCap:"-"},187:{code:"NumpadAdd",keyCap:"+",location:l},189:{code:"NumpadSubtract",keyCap:"-",location:l}}),f(p,"moz-mac",{12:{code:"NumLock",location:l},173:{code:"Minus",keyCap:"-"}}),f(p,"moz-win",{173:{code:"Minus",keyCap:"-"}}),f(p,"chrome-mac",{93:{code:"OSRight",location:s}}),f(p,"safari",{3:{code:"Enter"},25:{code:"Tab"}}),f(p,"ios",{10:{code:"Enter",location:o}}),f(p,"safari-mac",{91:{code:"OSLeft",location:a},93:{code:"OSRight",location:s},229:{code:"KeyQ",keyCap:"Q"}});var m={};"cros"===u&&(m["U+00A0"]={code:"ShiftLeft",location:a},m["U+00A1"]={code:"ShiftRight",location:s},m["U+00A2"]={code:"ControlLeft",location:a},m["U+00A3"]={code:"ControlRight",location:s},m["U+00A4"]={code:"AltLeft",location:a},m["U+00A5"]={code:"AltRight",location:s}),"chrome-mac"===d&&(m["U+0010"]={code:"ContextMenu"}),"safari-mac"===d&&(m["U+0010"]={code:"ContextMenu"}),"ios"===u&&(m["U+0010"]={code:"Function"},m["U+001C"]={code:"ArrowLeft"},m["U+001D"]={code:"ArrowRight"},m["U+001E"]={code:"ArrowUp"},m["U+001F"]={code:"ArrowDown"},m["U+0001"]={code:"Home"},m["U+0004"]={code:"End"},m["U+000B"]={code:"PageUp"},m["U+000C"]={code:"PageDown"});var g=[];g[a]={16:{code:"ShiftLeft",location:a},17:{code:"ControlLeft",location:a},18:{code:"AltLeft",location:a}},g[s]={16:{code:"ShiftRight",location:s},17:{code:"ControlRight",location:s},18:{code:"AltRight",location:s}},g[l]={13:{code:"NumpadEnter",location:l}},f(g[l],"moz",{109:{code:"NumpadSubtract",location:l},107:{code:"NumpadAdd",location:l}}),f(g[a],"moz-mac",{224:{code:"OSLeft",location:a}}),f(g[s],"moz-mac",{224:{code:"OSRight",location:s}}),f(g[s],"moz-win",{91:{code:"OSRight",location:s}}),f(g[s],"mac",{93:{code:"OSRight",location:s}}),f(g[l],"chrome-mac",{12:{code:"NumLock",location:l}}),f(g[l],"safari-mac",{12:{code:"NumLock",location:l},187:{code:"NumpadAdd",location:l},189:{code:"NumpadSubtract",location:l},190:{code:"NumpadDecimal",location:l},191:{code:"NumpadDivide",location:l}});var y={ShiftLeft:{key:"Shift"},ShiftRight:{key:"Shift"},ControlLeft:{key:"Control"},ControlRight:{key:"Control"},AltLeft:{key:"Alt"},AltRight:{key:"Alt"},OSLeft:{key:"OS"},OSRight:{key:"OS"},NumpadEnter:{key:"Enter"},Space:{key:" "},Digit0:{key:"0",shiftKey:")"},Digit1:{key:"1",shiftKey:"!"},Digit2:{key:"2",shiftKey:"@"},Digit3:{key:"3",shiftKey:"#"},Digit4:{key:"4",shiftKey:"$"},Digit5:{key:"5",shiftKey:"%"},Digit6:{key:"6",shiftKey:"^"},Digit7:{key:"7",shiftKey:"&"},Digit8:{key:"8",shiftKey:"*"},Digit9:{key:"9",shiftKey:"("},KeyA:{key:"a",shiftKey:"A"},KeyB:{key:"b",shiftKey:"B"},KeyC:{key:"c",shiftKey:"C"},KeyD:{key:"d",shiftKey:"D"},KeyE:{key:"e",shiftKey:"E"},KeyF:{key:"f",shiftKey:"F"},KeyG:{key:"g",shiftKey:"G"},KeyH:{key:"h",shiftKey:"H"},KeyI:{key:"i",shiftKey:"I"},KeyJ:{key:"j",shiftKey:"J"},KeyK:{key:"k",shiftKey:"K"},KeyL:{key:"l",shiftKey:"L"},KeyM:{key:"m",shiftKey:"M"},KeyN:{key:"n",shiftKey:"N"},KeyO:{key:"o",shiftKey:"O"},KeyP:{key:"p",shiftKey:"P"},KeyQ:{key:"q",shiftKey:"Q"},KeyR:{key:"r",shiftKey:"R"},KeyS:{key:"s",shiftKey:"S"},KeyT:{key:"t",shiftKey:"T"},KeyU:{key:"u",shiftKey:"U"},KeyV:{key:"v",shiftKey:"V"},KeyW:{key:"w",shiftKey:"W"},KeyX:{key:"x",shiftKey:"X"},KeyY:{key:"y",shiftKey:"Y"},KeyZ:{key:"z",shiftKey:"Z"},Numpad0:{key:"0"},Numpad1:{key:"1"},Numpad2:{key:"2"},Numpad3:{key:"3"},Numpad4:{key:"4"},Numpad5:{key:"5"},Numpad6:{key:"6"},Numpad7:{key:"7"},Numpad8:{key:"8"},Numpad9:{key:"9"},NumpadMultiply:{key:"*"},NumpadAdd:{key:"+"},NumpadComma:{key:","},NumpadSubtract:{key:"-"},NumpadDecimal:{key:"."},NumpadDivide:{key:"/"},Semicolon:{key:";",shiftKey:":"},Equal:{key:"=",shiftKey:"+"},Comma:{key:",",shiftKey:"<"},Minus:{key:"-",shiftKey:"_"},Period:{key:".",shiftKey:">"},Slash:{key:"/",shiftKey:"?"},Backquote:{key:"`",shiftKey:"~"},BracketLeft:{key:"[",shiftKey:"{"},Backslash:{key:"\\",shiftKey:"|"},BracketRight:{key:"]",shiftKey:"}"},Quote:{key:"'",shiftKey:'"'},IntlBackslash:{key:"\\",shiftKey:"|"}};f(y,"mac",{OSLeft:{key:"Meta"},OSRight:{key:"Meta"}});var v={Esc:"Escape",Nonconvert:"NonConvert",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Menu:"ContextMenu",MediaNextTrack:"MediaTrackNext",MediaPreviousTrack:"MediaTrackPrevious",SelectMedia:"MediaSelect",HalfWidth:"Hankaku",FullWidth:"Zenkaku",RomanCharacters:"Romaji",Crsel:"CrSel",Exsel:"ExSel",Zoom:"ZoomToggle"},b=(n="code",r={},Object.keys(p).forEach(function(e){var i=p[e];n in i&&(r[i[n]]=i)}),r);try{var _=i&&"location"in new KeyboardEvent("")}catch(e){}function w(e){var n,r="keyCode"in e?e.keyCode:"which"in e?e.which:0,i=function(){if(_||"keyLocation"in e){var n=_?e.location:e.keyLocation;if(n&&r in g[n])return g[n][r]}return"keyIdentifier"in e&&e.keyIdentifier in m?m[e.keyIdentifier]:r in p?p[r]:null}();if(!i)return null;var o=(n=y[i.code])?e.shiftKey&&"shiftKey"in n?n.shiftKey:n.key:i.code;return{code:i.code,key:o,location:i.location,keyCap:i.keyCap}}"KeyboardEvent"in e&&"defineProperty"in Object&&function(){function e(e,n,r){n in e||Object.defineProperty(e,n,r)}if(e(KeyboardEvent.prototype,"code",{get:function(){var e=w(this);return e?e.code:""}}),"key"in KeyboardEvent.prototype){var n=Object.getOwnPropertyDescriptor(KeyboardEvent.prototype,"key");Object.defineProperty(KeyboardEvent.prototype,"key",{get:function(){var e=n.get.call(this);return v.hasOwnProperty(e)?v[e]:e}})}e(KeyboardEvent.prototype,"key",{get:function(){var e=w(this);return e&&"key"in e?e.key:"Unidentified"}}),e(KeyboardEvent.prototype,"location",{get:function(){var e=w(this);return e&&"location"in e?e.location:o}}),e(KeyboardEvent.prototype,"locale",{get:function(){return""}})}(),"queryKeyCap"in e.KeyboardEvent||(e.KeyboardEvent.queryKeyCap=function(e,n){if(e=String(e),!b.hasOwnProperty(e))return"Undefined";if(n&&"en-us"!==String(n).toLowerCase())throw Error("Unsupported locale");var r=b[e];return r.keyCap||r.code||"Undefined"}),e.identifyKey=function(e){if(!("code"in e)){var n=w(e);e.code=n?n.code:"",e.key=n&&"key"in n?n.key:"Unidentified",e.location="location"in e?e.location:"keyLocation"in e?e.keyLocation:n&&"location"in n?n.location:o,e.locale=""}}}(window)},68474:(e,n,r)=>{let i=r(17797)(),o=function(){let e;return function(){return e=e||i("https://cdn.jsdelivr.net/gh/mrdoob/three.js@r86/examples/js/loaders/GLTFLoader.js")}}();e.exports=AFRAME.registerComponent("gltf-model-legacy",{schema:{type:"model"},init:function(){this.model=null,this.loader=null,this.loaderPromise=o().then(()=>{this.loader=new THREE.GLTFLoader,this.loader.setCrossOrigin("Anonymous")})},update:function(){let e=this,n=this.el,r=this.data;r&&(this.remove(),this.loaderPromise.then(()=>{this.loader.load(r,function(r){e.model=r.scene,e.model.animations=r.animations,n.setObject3D("mesh",e.model),n.emit("model-loaded",{format:"gltf",model:e.model})})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},69122:e=>{var n;window,e.exports=function(e){var n={};function r(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=n,r.d=function(e,n,i){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n||4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(i,o,(function(n){return e[n]}).bind(null,o));return i},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(e,n,r){"use strict";r.r(n);var i,o=function(e,n){var r=n.x-e.x,i=n.y-e.y;return Math.sqrt(r*r+i*i)},a=function(e){return Math.PI/180*e},s=new Map,l=function(e){s.has(e)&&clearTimeout(s.get(e)),s.set(e,setTimeout(e,100))},c=function(e,n,r){for(var i,o=n.split(/[ ,]+/g),a=0;a<o.length;a+=1)i=o[a],e.addEventListener?e.addEventListener(i,r,!1):e.attachEvent&&e.attachEvent(i,r)},u=function(e,n,r){for(var i,o=n.split(/[ ,]+/g),a=0;a<o.length;a+=1)i=o[a],e.removeEventListener?e.removeEventListener(i,r):e.detachEvent&&e.detachEvent(i,r)},h=function(e){return e.preventDefault(),e.type.match(/^touch/)?e.changedTouches:e},d=function(){return{x:void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,y:void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop}},f=function(e,n){n.top||n.right||n.bottom||n.left?(e.style.top=n.top,e.style.right=n.right,e.style.bottom=n.bottom,e.style.left=n.left):(e.style.left=n.x+"px",e.style.top=n.y+"px")},p=function(e,n,r){var i=m(e);for(var o in i)if(i.hasOwnProperty(o))if("string"==typeof n)i[o]=n+" "+r;else{for(var a="",s=0,l=n.length;s<l;s+=1)a+=n[s]+" "+r+", ";i[o]=a.slice(0,-2)}return i},m=function(e){var n={};return n[e]="",["webkit","Moz","o"].forEach(function(r){n[r+e.charAt(0).toUpperCase()+e.slice(1)]=""}),n},g=function(e,n){for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r]);return e},y=function(e,n){if(e.length)for(var r=0,i=e.length;r<i;r+=1)n(e[r]);else n(e)},v="ontouchstart"in window,b=!!window.PointerEvent,_=!!window.MSPointerEvent,w={start:"mousedown",move:"mousemove",end:"mouseup"},x={};function k(){}function E(e,n){return this.identifier=n.identifier,this.position=n.position,this.frontPosition=n.frontPosition,this.collection=e,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,mode:"dynamic",zone:document.body,lockX:!1,lockY:!1,shape:"circle"},this.config(n),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=E.id,E.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),setPosition:this.setPosition.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function A(e,n){this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=e,this.id=A.id,A.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restJoystick:!0,restOpacity:.5,lockX:!1,lockY:!1,shape:"circle",dynamicPage:!1,follow:!1},this.config(n),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1);var r=getComputedStyle(this.options.zone.parentElement);return r&&"flex"===r.display&&(this.parentIsFlex=!0),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function O(e){var n=this;n.ids={},n.index=0,n.collections=[],n.scroll=d(),n.config(e),n.prepareCollections();var r=function(){var e;n.collections.forEach(function(r){r.forEach(function(r){e=r.el.getBoundingClientRect(),r.position={x:n.scroll.x+e.left,y:n.scroll.y+e.top}})})};c(window,"resize",function(){l(r)});var i=function(){n.scroll=d()};return c(window,"scroll",function(){l(i)}),n.collections}b?i={start:"pointerdown",move:"pointermove",end:"pointerup, pointercancel"}:_?i={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:v?(i={start:"touchstart",move:"touchmove",end:"touchend, touchcancel"},x=w):i=w,k.prototype.on=function(e,n){var r,i=e.split(/[ ,]+/g);this._handlers_=this._handlers_||{};for(var o=0;o<i.length;o+=1)r=i[o],this._handlers_[r]=this._handlers_[r]||[],this._handlers_[r].push(n);return this},k.prototype.off=function(e,n){return this._handlers_=this._handlers_||{},void 0===e?this._handlers_={}:void 0===n?this._handlers_[e]=null:this._handlers_[e]&&this._handlers_[e].indexOf(n)>=0&&this._handlers_[e].splice(this._handlers_[e].indexOf(n),1),this},k.prototype.trigger=function(e,n){var r,i=this,o=e.split(/[ ,]+/g);i._handlers_=i._handlers_||{};for(var a=0;a<o.length;a+=1)r=o[a],i._handlers_[r]&&i._handlers_[r].length&&i._handlers_[r].forEach(function(e){e.call(i,{type:r,target:i},n)})},k.prototype.config=function(e){this.options=this.defaults||{},e&&(this.options=function(e,n){var r={};for(var i in e)e.hasOwnProperty(i)&&n.hasOwnProperty(i)?r[i]=n[i]:e.hasOwnProperty(i)&&(r[i]=e[i]);return r}(this.options,e))},k.prototype.bindEvt=function(e,n){var r=this;return r._domHandlers_=r._domHandlers_||{},r._domHandlers_[n]=function(){"function"==typeof r["on"+n]?r["on"+n].apply(r,arguments):console.warn('[WARNING] : Missing "on'+n+'" handler.')},c(e,i[n],r._domHandlers_[n]),x[n]&&c(e,x[n],r._domHandlers_[n]),r},k.prototype.unbindEvt=function(e,n){return this._domHandlers_=this._domHandlers_||{},u(e,i[n],this._domHandlers_[n]),x[n]&&u(e,x[n],this._domHandlers_[n]),delete this._domHandlers_[n],this},E.prototype=new k,E.constructor=E,E.id=0,E.prototype.buildEl=function(e){return this.ui={},this.options.dataOnly||(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front)),this},E.prototype.stylize=function(){if(this.options.dataOnly)return this;var e=this.options.fadeTime+"ms",n=function(e,n){var r=m(e);for(var i in r)r.hasOwnProperty(i)&&(r[i]="50%");return r}("borderRadius",0),r=p("transition","opacity",e),i={};return i.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},i.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",left:0,marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},i.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",left:0,marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5",transform:"translate(0px, 0px)"},g(i.el,r),"circle"===this.options.shape&&g(i.back,n),g(i.front,n),this.applyStyles(i),this},E.prototype.applyStyles=function(e){for(var n in this.ui)if(this.ui.hasOwnProperty(n))for(var r in e[n])this.ui[n].style[r]=e[n][r];return this},E.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)||this.options.zone.appendChild(this.ui.el),this},E.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)||this.options.zone.removeChild(this.ui.el),this},E.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},E.prototype.show=function(e){var n=this;return n.options.dataOnly||(clearTimeout(n.removeTimeout),clearTimeout(n.showTimeout),clearTimeout(n.restTimeout),n.addToDom(),n.restCallback(),setTimeout(function(){n.ui.el.style.opacity=1},0),n.showTimeout=setTimeout(function(){n.trigger("shown",n.instance),"function"==typeof e&&e.call(this)},n.options.fadeTime)),n},E.prototype.hide=function(e){var n=this;if(n.options.dataOnly)return n;if(n.ui.el.style.opacity=n.options.restOpacity,clearTimeout(n.removeTimeout),clearTimeout(n.showTimeout),clearTimeout(n.restTimeout),n.removeTimeout=setTimeout(function(){var r="dynamic"===n.options.mode?"none":"block";n.ui.el.style.display=r,"function"==typeof e&&e.call(n),n.trigger("hidden",n.instance)},n.options.fadeTime),n.options.restJoystick){var r=n.options.restJoystick,i={};i.x=!0===r||!1!==r.x?0:n.instance.frontPosition.x,i.y=!0===r||!1!==r.y?0:n.instance.frontPosition.y,n.setPosition(e,i)}return n},E.prototype.setPosition=function(e,n){var r=this;r.frontPosition={x:n.x,y:n.y};var i=r.options.fadeTime+"ms",o={};o.front=p("transition",["transform"],i);var a={front:{}};a.front={transform:"translate("+r.frontPosition.x+"px,"+r.frontPosition.y+"px)"},r.applyStyles(o),r.applyStyles(a),r.restTimeout=setTimeout(function(){"function"==typeof e&&e.call(r),r.restCallback()},r.options.fadeTime)},E.prototype.restCallback=function(){var e={};e.front=p("transition","none",""),this.applyStyles(e),this.trigger("rested",this.instance)},E.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},E.prototype.computeDirection=function(e){var n,r,i,o=e.angle.radian,a=Math.PI/4,s=Math.PI/2;if(o>a&&o<3*a&&!e.lockX?n="up":o>-a&&o<=a&&!e.lockY?n="left":o>-(3*a)&&o<=-a&&!e.lockX?n="down":e.lockY||(n="right"),e.lockY||(r=o>-s&&o<s?"left":"right"),e.lockX||(i=o>0?"up":"down"),e.force>this.options.threshold){var l,c={};for(l in this.direction)this.direction.hasOwnProperty(l)&&(c[l]=this.direction[l]);var u={};for(l in this.direction={x:r,y:i,angle:n},e.direction=this.direction,c)c[l]===this.direction[l]&&(u[l]=!0);if(u.x&&u.y&&u.angle)return e;u.x&&u.y||this.trigger("plain",e),u.x||this.trigger("plain:"+r,e),u.y||this.trigger("plain:"+i,e),u.angle||this.trigger("dir dir:"+n,e)}else this.resetDirection();return e},A.prototype=new k,A.constructor=A,A.id=0,A.prototype.prepareNipples=function(){var e=this.nipples;e.on=this.on.bind(this),e.off=this.off.bind(this),e.options=this.options,e.destroy=this.destroy.bind(this),e.ids=this.ids,e.id=this.id,e.processOnMove=this.processOnMove.bind(this),e.processOnEnd=this.processOnEnd.bind(this),e.get=function(n){if(void 0===n)return e[0];for(var r=0,i=e.length;r<i;r+=1)if(e[r].identifier===n)return e[r];return!1}},A.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},A.prototype.begin=function(){var e=this.options;if("static"===e.mode){var n=this.createNipple(e.position,this.manager.getIdentifier());n.add(),this.idles.push(n)}},A.prototype.createNipple=function(e,n){var r=this.manager.scroll,i={},o=this.options,a=this.parentIsFlex?r.x:r.x+this.box.left,s=this.parentIsFlex?r.y:r.y+this.box.top;if(e.x&&e.y)i={x:e.x-a,y:e.y-s};else if(e.top||e.right||e.bottom||e.left){var l=document.createElement("DIV");l.style.display="hidden",l.style.top=e.top,l.style.right=e.right,l.style.bottom=e.bottom,l.style.left=e.left,l.style.position="absolute",o.zone.appendChild(l);var c=l.getBoundingClientRect();o.zone.removeChild(l),i=e,e={x:c.left+r.x,y:c.top+r.y}}var u=new E(this,{color:o.color,size:o.size,threshold:o.threshold,fadeTime:o.fadeTime,dataOnly:o.dataOnly,restJoystick:o.restJoystick,restOpacity:o.restOpacity,mode:o.mode,identifier:n,position:e,zone:o.zone,frontPosition:{x:0,y:0},shape:o.shape});return o.dataOnly||(f(u.ui.el,i),f(u.ui.front,u.frontPosition)),this.nipples.push(u),this.trigger("added "+u.identifier+":added",u),this.manager.trigger("added "+u.identifier+":added",u),this.bindNipple(u),u},A.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},A.prototype.bindNipple=function(e){var n,r=this,i=function(e,i){n=e.type+" "+i.id+":"+e.type,r.trigger(n,i)};e.on("destroyed",r.onDestroyed.bind(r)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},A.prototype.pressureFn=function(e,n,r){var i=this,o=0;clearInterval(i.pressureIntervals[r]),i.pressureIntervals[r]=setInterval((function(){var r=e.force||e.pressure||e.webkitForce||0;r!==o&&(n.trigger("pressure",r),i.trigger("pressure "+n.identifier+":pressure",r),o=r)}).bind(i),100)},A.prototype.onstart=function(e){var n=this,r=n.options,i=e;return e=h(e),n.updateBox(),y(e,function(o){n.actives.length<r.maxNumberOfNipples?n.processOnStart(o):i.type.match(/^touch/)&&(Object.keys(n.manager.ids).forEach(function(r){if(0>Object.values(i.touches).findIndex(function(e){return e.identifier===r})){var o=[e[0]];o.identifier=r,n.processOnEnd(o)}}),n.actives.length<r.maxNumberOfNipples&&n.processOnStart(o))}),n.manager.bindDocument(),!1},A.prototype.processOnStart=function(e){var n,r=this,i=r.options,a=r.manager.getIdentifier(e),s=e.force||e.pressure||e.webkitForce||0,l={x:e.pageX,y:e.pageY},c=r.getOrCreate(a,l);c.identifier!==a&&r.manager.removeIdentifier(c.identifier),c.identifier=a;var u=function(n){n.trigger("start",n),r.trigger("start "+n.id+":start",n),n.show(),s>0&&r.pressureFn(e,n,n.identifier),r.processOnMove(e)};if((n=r.idles.indexOf(c))>=0&&r.idles.splice(n,1),r.actives.push(c),r.ids.push(c.identifier),"semi"!==i.mode)u(c);else{if(!(o(l,c.position)<=i.catchDistance))return c.destroy(),void r.processOnStart(e);u(c)}return c},A.prototype.getOrCreate=function(e,n){var r,i=this.options;return/(semi|static)/.test(i.mode)?(r=this.idles[0])?(this.idles.splice(0,1),r):"semi"===i.mode?this.createNipple(n,e):(console.warn("Coudln't find the needed nipple."),!1):r=this.createNipple(n,e)},A.prototype.processOnMove=function(e){var n=this.options,r=this.manager.getIdentifier(e),i=this.nipples.get(r),s=this.manager.scroll;if(isNaN(e.buttons)?0!==e.pressure:0!==e.buttons){if(!i)return console.error("Found zombie joystick with ID "+r),void this.manager.removeIdentifier(r);if(n.dynamicPage){var l,c,u=i.el.getBoundingClientRect();i.position={x:s.x+u.left,y:s.y+u.top}}i.identifier=r;var h=i.options.size/2,d={x:e.pageX,y:e.pageY};n.lockX&&(d.y=i.position.y),n.lockY&&(d.x=i.position.x);var f,p,m,g,y,v,b,_,w,x=o(d,i.position),k=(f=d,m=(p=i.position).x-f.x,180/Math.PI*Math.atan2(p.y-f.y,m)),E=a(k),A=x/h,O={distance:x,position:d};if("circle"===i.options.shape?(g=Math.min(x,h),v=i.position,b=g,w={x:0,y:0},_=a(_=k),w.x=v.x-b*Math.cos(_),w.y=v.y-b*Math.sin(_),y=w):(l=d,c=i.position,g=o(y={x:Math.min(Math.max(l.x,c.x-h),c.x+h),y:Math.min(Math.max(l.y,c.y-h),c.y+h)},i.position)),n.follow){if(x>h){var T=d.x-y.x,C=d.y-y.y;i.position.x+=T,i.position.y+=C,i.el.style.top=i.position.y-(this.box.top+s.y)+"px",i.el.style.left=i.position.x-(this.box.left+s.x)+"px",x=o(d,i.position)}}else d=y,x=g;var P=d.x-i.position.x,M=d.y-i.position.y;i.frontPosition={x:P,y:M},n.dataOnly||(i.ui.front.style.transform="translate("+P+"px,"+M+"px)");var S={identifier:i.identifier,position:d,force:A,pressure:e.force||e.pressure||e.webkitForce||0,distance:x,angle:{radian:E,degree:k},vector:{x:P/h,y:-M/h},raw:O,instance:i,lockX:n.lockX,lockY:n.lockY};(S=i.computeDirection(S)).angle={radian:a(180-k),degree:180-k},i.trigger("move",S),this.trigger("move "+i.id+":move",S)}else this.processOnEnd(e)},A.prototype.processOnEnd=function(e){var n=this,r=n.options,i=n.manager.getIdentifier(e),o=n.nipples.get(i),a=n.manager.removeIdentifier(o.identifier);o&&(r.dataOnly||o.hide(function(){"dynamic"===r.mode&&(o.trigger("removed",o),n.trigger("removed "+o.id+":removed",o),n.manager.trigger("removed "+o.id+":removed",o),o.destroy())}),clearInterval(n.pressureIntervals[o.identifier]),o.resetDirection(),o.trigger("end",o),n.trigger("end "+o.id+":end",o),n.ids.indexOf(o.identifier)>=0&&n.ids.splice(n.ids.indexOf(o.identifier),1),n.actives.indexOf(o)>=0&&n.actives.splice(n.actives.indexOf(o),1),/(semi|static)/.test(r.mode)?n.idles.push(o):n.nipples.indexOf(o)>=0&&n.nipples.splice(n.nipples.indexOf(o),1),n.manager.unbindDocument(),/(semi|static)/.test(r.mode)&&(n.manager.ids[a.id]=a.identifier))},A.prototype.onDestroyed=function(e,n){this.nipples.indexOf(n)>=0&&this.nipples.splice(this.nipples.indexOf(n),1),this.actives.indexOf(n)>=0&&this.actives.splice(this.actives.indexOf(n),1),this.idles.indexOf(n)>=0&&this.idles.splice(this.idles.indexOf(n),1),this.ids.indexOf(n.identifier)>=0&&this.ids.splice(this.ids.indexOf(n.identifier),1),this.manager.removeIdentifier(n.identifier),this.manager.unbindDocument()},A.prototype.destroy=function(){for(var e in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(e){e.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(e)&&clearInterval(this.pressureIntervals[e]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},O.prototype=new k,O.constructor=O,O.prototype.prepareCollections=function(){var e=this;e.collections.create=e.create.bind(e),e.collections.on=e.on.bind(e),e.collections.off=e.off.bind(e),e.collections.destroy=e.destroy.bind(e),e.collections.get=function(n){var r;return e.collections.every(function(e){return!(r=e.get(n))}),r}},O.prototype.create=function(e){return this.createCollection(e)},O.prototype.createCollection=function(e){var n=new A(this,e);return this.bindCollection(n),this.collections.push(n),n},O.prototype.bindCollection=function(e){var n,r=this,i=function(e,i){n=e.type+" "+i.id+":"+e.type,r.trigger(n,i)};e.on("destroyed",r.onDestroyed.bind(r)),e.on("shown hidden rested dir plain",i),e.on("dir:up dir:right dir:down dir:left",i),e.on("plain:up plain:right plain:down plain:left",i)},O.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},O.prototype.unbindDocument=function(e){Object.keys(this.ids).length&&!0!==e||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},O.prototype.getIdentifier=function(e){var n;return e?void 0===(n=void 0===e.identifier?e.pointerId:e.identifier)&&(n=this.latest||0):n=this.index,void 0===this.ids[n]&&(this.ids[n]=this.index,this.index+=1),this.latest=n,this.ids[n]},O.prototype.removeIdentifier=function(e){var n={};for(var r in this.ids)if(this.ids[r]===e){n.id=r,n.identifier=this.ids[r],delete this.ids[r];break}return n},O.prototype.onmove=function(e){return this.onAny("move",e),!1},O.prototype.onend=function(e){return this.onAny("end",e),!1},O.prototype.oncancel=function(e){return this.onAny("end",e),!1},O.prototype.onAny=function(e,n){var r,i=this,o="processOn"+e.charAt(0).toUpperCase()+e.slice(1);return y(n=h(n),function(e){r=i.getIdentifier(e),y(i.collections,(function(e,n,r){r.ids.indexOf(n)>=0&&(r[o](e),e._found_=!0)}).bind(null,e,r)),e._found_||i.removeIdentifier(r)}),!1},O.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(e){e.destroy()}),this.off()},O.prototype.onDestroyed=function(e,n){if(0>this.collections.indexOf(n))return!1;this.collections.splice(this.collections.indexOf(n),1)};var T=new O;n.default={create:function(e){return T.create(e)},factory:T}}]).default},69599:(e,n,r)=>{r(28035),r(77523),r(95497)},72771:(e,n,r)=>{"use strict";var i=r(71912);class o extends i.BRH{constructor(e){super(e)}parse(e){if(e.length<19)throw Error("THREE.TGALoader: Not enough data to contain header.");let n=0,r=new Uint8Array(e),o={id_length:r[n++],colormap_type:r[n++],image_type:r[n++],colormap_index:r[n++]|r[n++]<<8,colormap_length:r[n++]|r[n++]<<8,colormap_size:r[n++],origin:[r[n++]|r[n++]<<8,r[n++]|r[n++]<<8],width:r[n++]|r[n++]<<8,height:r[n++]|r[n++]<<8,pixel_size:r[n++],flags:r[n++]};switch(o.image_type){case 1:case 9:if(o.colormap_length>256||24!==o.colormap_size||1!==o.colormap_type)throw Error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case 2:case 3:case 10:case 11:if(o.colormap_type)throw Error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case 0:throw Error("THREE.TGALoader: No data.");default:throw Error("THREE.TGALoader: Invalid type "+o.image_type)}if(o.width<=0||o.height<=0)throw Error("THREE.TGALoader: Invalid image size.");if(8!==o.pixel_size&&16!==o.pixel_size&&24!==o.pixel_size&&32!==o.pixel_size)throw Error("THREE.TGALoader: Invalid pixel size "+o.pixel_size);if(o.id_length+n>e.length)throw Error("THREE.TGALoader: No data.");n+=o.id_length;let a=!1,s=!1,l=!1;switch(o.image_type){case 9:a=!0,s=!0;break;case 1:s=!0;break;case 10:a=!0;break;case 2:break;case 11:a=!0,l=!0;break;case 3:l=!0}let c=new Uint8Array(o.width*o.height*4),u=function(e,n,r,i,o){let a,s,l=r.pixel_size>>3,c=r.width*r.height*l;if(n&&(s=o.subarray(i,i+=r.colormap_length*(r.colormap_size>>3))),e){let e,n,r;a=new Uint8Array(c);let s=0,u=new Uint8Array(l);for(;s<c;)if(n=(127&(e=o[i++]))+1,128&e){for(r=0;r<l;++r)u[r]=o[i++];for(r=0;r<n;++r)a.set(u,s+r*l);s+=l*n}else{for(n*=l,r=0;r<n;++r)a[s+r]=o[i++];s+=n}}else a=o.subarray(i,i+=n?r.width*r.height:c);return{pixel_data:a,palettes:s}}(a,s,o,n,r);return!function(e,n,r,i,a){let s,c,u,h,d,f;switch((48&o.flags)>>4){default:case 2:s=0,u=1,d=n,c=0,h=1,f=r;break;case 0:s=0,u=1,d=n,c=r-1,h=-1,f=-1;break;case 3:s=n-1,u=-1,d=-1,c=0,h=1,f=r;break;case 1:s=n-1,u=-1,d=-1,c=r-1,h=-1,f=-1}if(l)switch(o.pixel_size){case 8:!function(e,n,r,i,a,s,l,c){let u,h=0,d,f,p=o.width;for(f=n;f!==i;f+=r)for(d=a;d!==l;d+=s,h++)u=c[h],e[(d+p*f)*4+0]=u,e[(d+p*f)*4+1]=u,e[(d+p*f)*4+2]=u,e[(d+p*f)*4+3]=255}(e,c,h,f,s,u,d,i);break;case 16:var p=e,m=c,g=h,y=f,v=s,b=u,_=d,w=i;let x=0,k,E,A=o.width;for(E=m;E!==y;E+=g)for(k=v;k!==_;k+=b,x+=2)p[(k+A*E)*4+0]=w[x+0],p[(k+A*E)*4+1]=w[x+0],p[(k+A*E)*4+2]=w[x+0],p[(k+A*E)*4+3]=w[x+1];break;default:throw Error("THREE.TGALoader: Format not supported.")}else switch(o.pixel_size){case 8:!function(e,n,r,i,a,s,l,c,u){let h,d=0,f,p,m=o.width;for(p=n;p!==i;p+=r)for(f=a;f!==l;f+=s,d++)h=c[d],e[(f+m*p)*4+3]=255,e[(f+m*p)*4+2]=u[3*h+0],e[(f+m*p)*4+1]=u[3*h+1],e[(f+m*p)*4+0]=u[3*h+2]}(e,c,h,f,s,u,d,i,a);break;case 16:!function(e,n,r,i,a,s,l,c){let u,h=0,d,f,p=o.width;for(f=n;f!==i;f+=r)for(d=a;d!==l;d+=s,h+=2)u=c[h+0]+(c[h+1]<<8),e[(d+p*f)*4+0]=(31744&u)>>7,e[(d+p*f)*4+1]=(992&u)>>2,e[(d+p*f)*4+2]=(31&u)<<3,e[(d+p*f)*4+3]=32768&u?0:255}(e,c,h,f,s,u,d,i);break;case 24:var O=e,T=c,C=h,P=f,M=s,S=u,D=d,N=i;let j=0,R,L,I=o.width;for(L=T;L!==P;L+=C)for(R=M;R!==D;R+=S,j+=3)O[(R+I*L)*4+3]=255,O[(R+I*L)*4+2]=N[j+0],O[(R+I*L)*4+1]=N[j+1],O[(R+I*L)*4+0]=N[j+2];break;case 32:var z=e,F=c,B=h,U=f,V=s,H=u,q=d,G=i;let K=0,$,Y,W=o.width;for(Y=F;Y!==U;Y+=B)for($=V;$!==q;$+=H,K+=4)z[($+W*Y)*4+2]=G[K+0],z[($+W*Y)*4+1]=G[K+1],z[($+W*Y)*4+0]=G[K+2],z[($+W*Y)*4+3]=G[K+3];break;default:throw Error("THREE.TGALoader: Format not supported.")}}(c,o.width,o.height,u.pixel_data,u.palettes),{data:c,width:o.width,height:o.height,flipY:!0,generateMipmaps:!0,minFilter:i.$_I}}}class a extends i.aHM{load(e,n,r,o){let a=this,s=""===a.path?i.r6x.extractUrlBase(e):a.path,l=new i.Y9S(a.manager);l.setPath(a.path),l.setRequestHeader(a.requestHeader),l.setWithCredentials(a.withCredentials),l.load(e,function(r){try{n(a.parse(r,s))}catch(n){o?o(n):console.error(n),a.manager.itemError(e)}},r,o)}parse(e,n){var r,a,s,l;let c;function u(e,n){let r=[],i=e.childNodes;for(let e=0,o=i.length;e<o;e++){let o=i[e];o.nodeName===n&&r.push(o)}return r}function h(e){if(0===e.length)return[];let n=e.trim().split(/\s+/),r=Array(n.length);for(let e=0,i=n.length;e<i;e++)r[e]=parseFloat(n[e]);return r}function d(e){if(0===e.length)return[];let n=e.trim().split(/\s+/),r=Array(n.length);for(let e=0,i=n.length;e<i;e++)r[e]=parseInt(n[e]);return r}function f(e){return e.substring(1)}function p(e){return 0===Object.keys(e).length}function m(e,n,r,i){let o=u(e,n)[0];if(void 0!==o){let e=u(o,r);for(let n=0;n<e.length;n++)i(e[n])}}function g(e,n){for(let r in e)e[r].build=n(e[r])}function y(e,n){return void 0!==e.build||(e.build=n(e)),e.build}function v(e){let n=[],r=e.channels,o=e.samplers,a=e.sources;for(let e in r)if(r.hasOwnProperty(e)){let s=r[e],l=o[s.sampler],c=l.inputs.INPUT,u=l.inputs.OUTPUT;!function(e,n){let r=e.keyframes,o=e.name,a=[],s=[],l=[],c=[];for(let e=0,n=r.length;e<n;e++){let n=r[e],i=n.time,o=n.value;V.fromArray(o).transpose(),V.decompose(_,x,w),a.push(i),s.push(_.x,_.y,_.z),l.push(x.x,x.y,x.z,x.w),c.push(w.x,w.y,w.z)}s.length>0&&n.push(new i.RiT(o+".position",a,s)),l.length>0&&n.push(new i.MBL(o+".quaternion",a,l)),c.length>0&&n.push(new i.RiT(o+".scale",a,c))}(function(e,n,r){let i,o,a,s,l,c,u=ec.nodes[e.id],h=Z(u.id),d=u.transforms[e.sid],f=u.matrix.clone().transpose(),p={};switch(d){case"matrix":for(a=0,s=n.array.length;a<s;a++)if(i=n.array[a],o=a*r.stride,void 0===p[i]&&(p[i]={}),!0===e.arraySyntax){let n=r.array[o],a=e.indices[0]+4*e.indices[1];p[i][a]=n}else for(l=0,c=r.stride;l<c;l++)p[i][l]=r.array[o+l];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',d)}let m=function(e,n){let r=[];for(let n in e)r.push({time:parseFloat(n),value:e[n]});r.sort(function(e,n){return e.time-n.time});for(let e=0;e<16;e++)!function(e,n,r){let i,o,a,s=!0;for(o=0,a=e.length;o<a;o++)void 0===(i=e[o]).value[n]?i.value[n]=null:s=!1;if(!0===s)for(o=0,a=e.length;o<a;o++)(i=e[o]).value[n]=r;else!function(e,n){let r,i;for(let o=0,a=e.length;o<a;o++){let a=e[o];if(null===a.value[n]){if(r=function(e,n,r){for(;n>=0;){let i=e[n];if(null!==i.value[r])return i;n--}return null}(e,o,n),i=function(e,n,r){for(;n<e.length;){let i=e[n];if(null!==i.value[r])return i;n++}return null}(e,o,n),null===r){a.value[n]=i.value[n];continue}if(null===i){a.value[n]=r.value[n];continue}!function(e,n,r,i){if(r.time-n.time==0){e.value[i]=n.value[i];return}e.value[i]=(e.time-n.time)*(r.value[i]-n.value[i])/(r.time-n.time)+n.value[i]}(a,r,i,n)}}}(e,n)}(r,e,n.elements[e]);return r}(p,f);return{name:h.uuid,keyframes:m}}(s,a[c],a[u]),n)}return n}function b(e){return y(ec.animations[e],v)}let _=new i.Pq0,w=new i.Pq0,x=new i.PTz;function k(e){let n=[],r=e.name,o=e.end-e.start||-1,a=e.animations;for(let e=0,r=a.length;e<r;e++){let r=b(a[e]);for(let e=0,i=r.length;e<i;e++)n.push(r[e])}return new i.tz3(r,o,n)}function E(e){let n={id:e.id},r=ec.geometries[n.id];return void 0!==e.skin&&(n.skin=function(e){let n,r,o,a={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},s=e.sources,l=e.vertexWeights,c=l.vcount,u=l.v,h=l.inputs.JOINT.offset,d=l.inputs.WEIGHT.offset,f=e.sources[e.joints.inputs.JOINT],p=e.sources[e.joints.inputs.INV_BIND_MATRIX],m=s[l.inputs.WEIGHT.id].array,g=0;for(n=0,o=c.length;n<o;n++){let e=c[n],i=[];for(r=0;r<e;r++){let e=u[g+h],n=m[u[g+d]];i.push({index:e,weight:n}),g+=2}for(i.sort(y),r=0;r<4;r++){let e=i[r];void 0!==e?(a.indices.array.push(e.index),a.weights.array.push(e.weight)):(a.indices.array.push(0),a.weights.array.push(0))}}for(e.bindShapeMatrix?a.bindMatrix=new i.kn4().fromArray(e.bindShapeMatrix).transpose():a.bindMatrix=new i.kn4().identity(),n=0,o=f.array.length;n<o;n++){let e=f.array[n],r=new i.kn4().fromArray(p.array,n*p.stride).transpose();a.joints.push({name:e,boneInverse:r})}return a;function y(e,n){return n.weight-e.weight}}(e.skin),r.sources.skinIndices=n.skin.indices,r.sources.skinWeights=n.skin.weights),n}function A(e){return void 0!==e.build?e.build:e.init_from}function O(e){let n=ec.images[e];return void 0!==n?y(n,A):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function T(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"color":n[i.nodeName]=h(i.textContent);break;case"float":n[i.nodeName]=parseFloat(i.textContent);break;case"texture":n[i.nodeName]={id:i.getAttribute("texture"),extra:C(i)}}}return n}function C(e){let n={technique:{}};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"extra"===i.nodeName&&function(e,n){for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"technique"===i.nodeName&&function(e,n){for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":n.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?n.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?n.technique[i.nodeName]=0:n.technique[i.nodeName]=parseInt(i.textContent);break;case"bump":n[i.nodeName]=M(i)}}}(i,n)}}(i,n)}return n}function P(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"technique"===i.nodeName&&(n.technique=function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"double_sided":n[i.nodeName]=parseInt(i.textContent);break;case"bump":n[i.nodeName]=M(i)}}return n}(i))}return n}function M(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"texture"===i.nodeName&&(n[i.nodeName]={id:i.getAttribute("texture"),texcoord:i.getAttribute("texcoord"),extra:C(i)})}return n}function S(e){return e}function D(e){var n;let r,o=(n=e.url,y(ec.effects[n],S)),a=o.profile.technique;switch(a.type){case"phong":case"blinn":r=new i.tXL;break;case"lambert":r=new i.G_z;break;default:r=new i.V9B}function s(e,n=null){let r=o.profile.samplers[e.id],a=null;if(void 0!==r?a=O(o.profile.surfaces[r.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),a=O(e.id)),null===a)return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null;{var l;let r,o,s="tga"===(l=a).slice((l.lastIndexOf(".")-1>>>0)+2).toLowerCase()?c:ei;if(void 0===s)return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",a),null;{let r=s.load(a),o=e.extra;if(void 0!==o&&void 0!==o.technique&&!1===p(o.technique)){let e=o.technique;r.wrapS=e.wrapU?i.GJx:i.ghU,r.wrapT=e.wrapV?i.GJx:i.ghU,r.offset.set(e.offsetU||0,e.offsetV||0),r.repeat.set(e.repeatU||1,e.repeatV||1)}else r.wrapS=i.GJx,r.wrapT=i.GJx;return null!==n&&(r.colorSpace=n),r}}}r.name=e.name||"";let l=a.parameters;for(let e in l){let n=l[e];switch(e){case"diffuse":n.color&&r.color.fromArray(n.color),n.texture&&(r.map=s(n.texture,i.er$));break;case"specular":n.color&&r.specular&&r.specular.fromArray(n.color),n.texture&&(r.specularMap=s(n.texture));break;case"bump":n.texture&&(r.normalMap=s(n.texture));break;case"ambient":n.texture&&(r.lightMap=s(n.texture,i.er$));break;case"shininess":n.float&&r.shininess&&(r.shininess=n.float);break;case"emission":n.color&&r.emissive&&r.emissive.fromArray(n.color),n.texture&&(r.emissiveMap=s(n.texture,i.er$))}}r.color.convertSRGBToLinear(),r.specular&&r.specular.convertSRGBToLinear(),r.emissive&&r.emissive.convertSRGBToLinear();let u=l.transparent,h=l.transparency;if(void 0===h&&u&&(h={float:1}),void 0===u&&h&&(u={opaque:"A_ONE",data:{color:[1,1,1,1]}}),u&&h)if(u.data.texture)r.transparent=!0;else{let e=u.data.color;switch(u.opaque){case"A_ONE":r.opacity=e[3]*h.float;break;case"RGB_ZERO":r.opacity=1-e[0]*h.float;break;case"A_ZERO":r.opacity=1-e[3]*h.float;break;case"RGB_ONE":r.opacity=e[0]*h.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',u.opaque)}r.opacity<1&&(r.transparent=!0)}if(void 0!==a.extra&&void 0!==a.extra.technique){let e=a.extra.technique;for(let n in e){let o=e[n];switch(n){case"double_sided":r.side=1===o?i.$EB:i.hB5;break;case"bump":r.normalMap=s(o.texture),r.normalScale=new i.I9Y(1,1)}}}return r}function N(e){let n;switch(e.optics.technique){case"perspective":n=new i.ubm(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":let r=e.optics.parameters.ymag,o=e.optics.parameters.xmag,a=e.optics.parameters.aspect_ratio;o=void 0===o?r*a:o,r=void 0===r?o/a:r,o*=.5,r*=.5,n=new i.qUd(-o,o,r,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:n=new i.ubm}return n.name=e.name||"",n}function j(e){let n;switch(e.technique){case"directional":n=new i.ZyN;break;case"point":n=new i.HiM;break;case"spot":n=new i.nCl;break;case"ambient":n=new i.$p8}return e.parameters.color&&n.color.copy(e.parameters.color),e.parameters.distance&&(n.distance=e.parameters.distance),n}function R(e){let n={array:[],stride:3};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"float_array":n.array=h(i.textContent);break;case"Name_array":n.array=function(e){if(0===e.length)return[];let n=e.trim().split(/\s+/),r=Array(n.length);for(let e=0,i=n.length;e<i;e++)r[e]=n[e];return r}(i.textContent);break;case"technique_common":let o=u(i,"accessor")[0];void 0!==o&&(n.stride=parseInt(o.getAttribute("stride")))}}return n}function L(e){let n={},r=e.sources,o=e.vertices,a=e.primitives;if(0===a.length)return{};let s=function(e){let n={};for(let r=0;r<e.length;r++){let i=e[r];void 0===n[i.type]&&(n[i.type]=[]),n[i.type].push(i)}return n}(a);for(let e in s){let a=s[e];!function(e){let n=0;for(let r=0,i=e.length;r<i;r++)!0===e[r].hasUV&&n++;n>0&&n<e.length&&(e.uvsNeedsFix=!0)}(a),n[e]=function(e,n,r){let o={},a={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},c={array:[],stride:0},u={array:[],stride:0},h={array:[],stride:4},d={array:[],stride:4},f=new i.LoY,p=[],m=0;for(let i=0;i<e.length;i++){let o=e[i],g=o.inputs,y=0;switch(o.type){case"lines":case"linestrips":y=2*o.count;break;case"triangles":y=3*o.count;break;case"polylist":for(let e=0;e<o.count;e++){let n=o.vcount[e];switch(n){case 3:y+=3;break;case 4:y+=6;break;default:y+=(n-2)*3}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",o.type)}for(let v in f.addGroup(m,y,i),m+=y,o.material&&p.push(o.material),g){let i=g[v];switch(v){case"VERTEX":for(let f in r){let p=r[f];switch(f){case"POSITION":let m=a.array.length;if(I(o,n[p],i.offset,a.array),a.stride=n[p].stride,n.skinWeights&&n.skinIndices&&(I(o,n.skinIndices,i.offset,h.array),I(o,n.skinWeights,i.offset,d.array)),!1===o.hasUV&&!0===e.uvsNeedsFix){let e=(a.array.length-m)/a.stride;for(let n=0;n<e;n++)l.array.push(0,0)}break;case"NORMAL":I(o,n[p],i.offset,s.array),s.stride=n[p].stride;break;case"COLOR":I(o,n[p],i.offset,u.array),u.stride=n[p].stride;break;case"TEXCOORD":I(o,n[p],i.offset,l.array),l.stride=n[p].stride;break;case"TEXCOORD1":I(o,n[p],i.offset,c.array),l.stride=n[p].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',f)}}break;case"NORMAL":I(o,n[i.id],i.offset,s.array),s.stride=n[i.id].stride;break;case"COLOR":I(o,n[i.id],i.offset,u.array,!0),u.stride=n[i.id].stride;break;case"TEXCOORD":I(o,n[i.id],i.offset,l.array),l.stride=n[i.id].stride;break;case"TEXCOORD1":I(o,n[i.id],i.offset,c.array),c.stride=n[i.id].stride}}}return a.array.length>0&&f.setAttribute("position",new i.qtW(a.array,a.stride)),s.array.length>0&&f.setAttribute("normal",new i.qtW(s.array,s.stride)),u.array.length>0&&f.setAttribute("color",new i.qtW(u.array,u.stride)),l.array.length>0&&f.setAttribute("uv",new i.qtW(l.array,l.stride)),c.array.length>0&&f.setAttribute("uv1",new i.qtW(c.array,c.stride)),h.array.length>0&&f.setAttribute("skinIndex",new i.qtW(h.array,h.stride)),d.array.length>0&&f.setAttribute("skinWeight",new i.qtW(d.array,d.stride)),o.data=f,o.type=e[0].type,o.materialKeys=p,o}(a,r,o)}return n}function I(e,n,r,i,o=!1){let a=e.p,s=e.stride,l=e.vcount;function c(e){let n=a[e+r]*h,s=n+h;for(;n<s;n++)i.push(u[n]);if(o){let e=i.length-h-1;eo.setRGB(i[e+0],i[e+1],i[e+2]).convertSRGBToLinear(),i[e+0]=eo.r,i[e+1]=eo.g,i[e+2]=eo.b}}let u=n.array,h=n.stride;if(void 0!==e.vcount){let e=0;for(let n=0,r=l.length;n<r;n++){let r=l[n];if(4===r){let n=e+0*s,r=e+ +s,i=e+2*s,o=e+3*s;c(n),c(r),c(o),c(r),c(i),c(o)}else if(3===r){let n=e+0*s,r=e+ +s,i=e+2*s;c(n),c(r),c(i)}else if(r>4)for(let n=1,i=r-2;n<=i;n++){let r=e+0*s,i=e+s*n,o=e+s*(n+1);c(r),c(i),c(o)}e+=s*r}}else for(let e=0,n=a.length;e<n;e+=s)c(e)}function z(e){return y(ec.geometries[e],L)}function F(e){return void 0!==e.build?e.build:e}function B(e){let n={type:e.nodeName},r=h(e.textContent);switch(n.type){case"matrix":n.obj=new i.kn4,n.obj.fromArray(r).transpose();break;case"translate":n.obj=new i.Pq0,n.obj.fromArray(r);break;case"rotate":n.obj=new i.Pq0,n.obj.fromArray(r),n.angle=i.cj9.degToRad(r[3])}return n}function U(e){return void 0!==e.build?e.build:e}let V=new i.kn4,H=new i.Pq0;function q(e){let n={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new i.kn4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}};for(let r=0;r<e.childNodes.length;r++){let o,a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"node":n.nodes.push(a.getAttribute("id")),q(a);break;case"instance_camera":n.instanceCameras.push(f(a.getAttribute("url")));break;case"instance_controller":n.instanceControllers.push(G(a));break;case"instance_light":n.instanceLights.push(f(a.getAttribute("url")));break;case"instance_geometry":n.instanceGeometries.push(G(a));break;case"instance_node":n.instanceNodes.push(f(a.getAttribute("url")));break;case"matrix":o=h(a.textContent),n.matrix.multiply(V.fromArray(o).transpose()),n.transforms[a.getAttribute("sid")]=a.nodeName;break;case"translate":o=h(a.textContent),H.fromArray(o),n.matrix.multiply(V.makeTranslation(H.x,H.y,H.z)),n.transforms[a.getAttribute("sid")]=a.nodeName;break;case"rotate":o=h(a.textContent);let s=i.cj9.degToRad(o[3]);n.matrix.multiply(V.makeRotationAxis(H.fromArray(o),s)),n.transforms[a.getAttribute("sid")]=a.nodeName;break;case"scale":o=h(a.textContent),n.matrix.scale(H.fromArray(o)),n.transforms[a.getAttribute("sid")]=a.nodeName;break;case"extra":break;default:console.log(a)}}return X(n.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",n.id):ec.nodes[n.id]=n,n}function G(e){let n={id:f(e.getAttribute("url")),materials:{},skeletons:[]};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];switch(i.nodeName){case"bind_material":let o=i.getElementsByTagName("instance_material");for(let e=0;e<o.length;e++){let r=o[e],i=r.getAttribute("symbol"),a=r.getAttribute("target");n.materials[i]=f(a)}break;case"skeleton":n.skeletons.push(f(i.textContent))}}return n}function K(e,n,r){e.traverse(function(e){if(!0===e.isBone){let o;for(let r=0;r<n.length;r++){let i=n[r];if(i.name===e.name){o=i.boneInverse;break}}void 0===o&&(o=new i.kn4),r.push({bone:e,boneInverse:o,processed:!1})}})}function $(e){let n,r=[],o=e.matrix,a=e.nodes,s=e.type,l=e.instanceCameras,c=e.instanceControllers,u=e.instanceLights,h=e.instanceGeometries,d=e.instanceNodes;for(let e=0,n=a.length;e<n;e++)r.push(Z(a[e]));for(let e=0,n=l.length;e<n;e++){let n=function(e){let n=ec.cameras[e];return void 0!==n?y(n,N):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}(l[e]);null!==n&&r.push(n.clone())}for(let e=0,n=c.length;e<n;e++){var f;let n=c[e],o=(f=n.id,y(ec.controllers[f],E)),a=W(z(o.id),n.materials),s=function(e,n){let r,o,a,s=[],l=[];for(r=0;r<e.length;r++){let i=e[r];if(X(i))K(Z(i),n,s);else{var c;if(c=i,void 0!==ec.visualScenes[c]){let e=ec.visualScenes[i].children;for(let r=0;r<e.length;r++){let i=e[r];"JOINT"===i.type&&K(Z(i.id),n,s)}}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",i)}}for(r=0;r<n.length;r++)for(o=0;o<s.length;o++)if((a=s[o]).bone.name===n[r].name){l[r]=a,a.processed=!0;break}for(r=0;r<s.length;r++)!1===(a=s[r]).processed&&(l.push(a),a.processed=!0);let u=[],h=[];for(r=0;r<l.length;r++)a=l[r],u.push(a.bone),h.push(a.boneInverse);return new i.EAD(u,h)}(n.skeletons,o.skin.joints);for(let e=0,n=a.length;e<n;e++){let n=a[e];n.isSkinnedMesh&&(n.bind(s,o.skin.bindMatrix),n.normalizeSkinWeights()),r.push(n)}}for(let e=0,n=u.length;e<n;e++){let n=function(e){let n=ec.lights[e];return void 0!==n?y(n,j):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}(u[e]);null!==n&&r.push(n.clone())}for(let e=0,n=h.length;e<n;e++){let n=h[e],i=W(z(n.id),n.materials);for(let e=0,n=i.length;e<n;e++)r.push(i[e])}for(let e=0,n=d.length;e<n;e++)r.push(Z(d[e]).clone());if(0===a.length&&1===r.length)n=r[0];else{n="JOINT"===s?new i.$Kf:new i.YJl;for(let e=0;e<r.length;e++)n.add(r[e])}return n.name="JOINT"===s?e.sid:e.name,n.matrix.copy(o),n.matrix.decompose(n.position,n.quaternion,n.scale),n}let Y=new i.V9B({name:i.aHM.DEFAULT_MATERIAL_NAME,color:0xff00ff});function W(e,n){let r=[];for(let o in e){let a,s=e[o],l=function(e,n){let r=[];for(let i=0,o=e.length;i<o;i++){let o=n[e[i]];if(void 0===o)console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[i]),r.push(Y);else r.push(y(ec.materials[o],D))}return r}(s.materialKeys,n);if(0===l.length&&("lines"===o||"linestrips"===o?l.push(new i.mrM):l.push(new i.tXL)),"lines"===o||"linestrips"===o)for(let e=0,n=l.length;e<n;e++){let n=l[e];if(!0===n.isMeshPhongMaterial||!0===n.isMeshLambertMaterial){let r=new i.mrM;r.color.copy(n.color),r.opacity=n.opacity,r.transparent=n.transparent,l[e]=r}}let c=void 0!==s.data.attributes.skinIndex,u=1===l.length?l[0]:l;switch(o){case"lines":a=new i.DXC(s.data,u);break;case"linestrips":a=new i.N1A(s.data,u);break;case"triangles":case"polylist":a=c?new i.I46(s.data,u):new i.eaF(s.data,u)}r.push(a)}return r}function X(e){return void 0!==ec.nodes[e]}function Z(e){return y(ec.nodes[e],$)}function J(e){let n=new i.YJl;n.name=e.name;let r=e.children;for(let e=0;e<r.length;e++){let i=r[e];n.add(Z(i.id))}return n}function Q(e){return y(ec.visualScenes[e],J)}if(0===e.length)return{scene:new i.Z58};let ee=new DOMParser().parseFromString(e,"application/xml"),et=u(ee,"COLLADA")[0],en=ee.getElementsByTagName("parsererror")[0];if(void 0!==en){let e,n=u(en,"div")[0];return console.error("THREE.ColladaLoader: Failed to parse collada file.\n",n?n.textContent:function(e){let n="",r=[e];for(;r.length;){let e=r.shift();e.nodeType===Node.TEXT_NODE?n+=e.textContent:(n+="\n",r.push.apply(r,e.childNodes))}return n.trim()}(en)),null}console.debug("THREE.ColladaLoader: File version",et.getAttribute("version"));let er=(r=u(et,"asset")[0],{unit:void 0!==(s=u(r,"unit")[0])&&!0===s.hasAttribute("meter")?parseFloat(s.getAttribute("meter")):1,upAxis:void 0!==(l=u(r,"up_axis")[0])?l.textContent:"Y_UP"}),ei=new i.Tap(this.manager);ei.setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin),o&&(c=new o(this.manager)).setPath(this.resourcePath||n);let eo=new i.Q1f,ea=[],es={},el=0,ec={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};m(et,"library_animations","animation",function e(n){let r={sources:{},samplers:{},channels:{}},o=!1;for(let i=0,a=n.childNodes.length;i<a;i++){let a,s=n.childNodes[i];if(1===s.nodeType)switch(s.nodeName){case"source":a=s.getAttribute("id"),r.sources[a]=R(s);break;case"sampler":a=s.getAttribute("id"),r.samplers[a]=function(e){let n={inputs:{}};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType&&"input"===i.nodeName){let e=f(i.getAttribute("source")),r=i.getAttribute("semantic");n.inputs[r]=e}}return n}(s);break;case"channel":a=s.getAttribute("target"),r.channels[a]=function(e){let n={},r=e.getAttribute("target").split("/"),i=r.shift(),o=r.shift(),a=-1!==o.indexOf("("),s=-1!==o.indexOf(".");if(s)o=(r=o.split(".")).shift(),n.member=r.shift();else if(a){let e=o.split("(");o=e.shift();for(let n=0;n<e.length;n++)e[n]=parseInt(e[n].replace(/\)/,""));n.indices=e}return n.id=i,n.sid=o,n.arraySyntax=a,n.memberSyntax=s,n.sampler=f(e.getAttribute("source")),n}(s);break;case"animation":e(s),o=!0;break;default:console.log(s)}}!1===o&&(ec.animations[n.getAttribute("id")||i.cj9.generateUUID()]=r)}),m(et,"library_animation_clips","animation_clip",function(e){let n={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"instance_animation"===i.nodeName&&n.animations.push(f(i.getAttribute("url")))}ec.clips[e.getAttribute("id")]=n}),m(et,"library_controllers","controller",function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"skin":n.id=f(i.getAttribute("source")),n.skin=function(e){let n={sources:{}};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"bind_shape_matrix":n.bindShapeMatrix=h(i.textContent);break;case"source":let o=i.getAttribute("id");n.sources[o]=R(i);break;case"joints":n.joints=function(e){let n={inputs:{}};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType&&"input"===i.nodeName){let e=i.getAttribute("semantic"),r=f(i.getAttribute("source"));n.inputs[e]=r}}return n}(i);break;case"vertex_weights":n.vertexWeights=function(e){let n={inputs:{}};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":let o=i.getAttribute("semantic"),a=f(i.getAttribute("source")),s=parseInt(i.getAttribute("offset"));n.inputs[o]={id:a,offset:s};break;case"vcount":n.vcount=d(i.textContent);break;case"v":n.v=d(i.textContent)}}return n}(i)}}return n}(i);break;case"morph":n.id=f(i.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}ec.controllers[e.getAttribute("id")]=n}),m(et,"library_images","image",function(e){let n={init_from:u(e,"init_from")[0].textContent};ec.images[e.getAttribute("id")]=n}),m(et,"library_effects","effect",function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"profile_COMMON"===i.nodeName&&(n.profile=function(e){let n={surfaces:{},samplers:{}};for(let o=0,a=e.childNodes.length;o<a;o++){let a=e.childNodes[o];if(1===a.nodeType)switch(a.nodeName){case"newparam":var r=a,i=n;let s=r.getAttribute("sid");for(let e=0,n=r.childNodes.length;e<n;e++){let n=r.childNodes[e];if(1===n.nodeType)switch(n.nodeName){case"surface":i.surfaces[s]=function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"init_from"===i.nodeName&&(n.init_from=i.textContent)}return n}(n);break;case"sampler2D":i.samplers[s]=function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"source"===i.nodeName&&(n.source=i.textContent)}return n}(n)}}break;case"technique":n.technique=function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":n.type=i.nodeName,n.parameters=function(e){let n={};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":n[i.nodeName]=T(i);break;case"transparent":n[i.nodeName]={opaque:i.hasAttribute("opaque")?i.getAttribute("opaque"):"A_ONE",data:T(i)}}}return n}(i);break;case"extra":n.extra=P(i)}}return n}(a);break;case"extra":n.extra=P(a)}}return n}(i))}ec.effects[e.getAttribute("id")]=n}),m(et,"library_materials","material",function(e){let n={name:e.getAttribute("name")};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"instance_effect"===i.nodeName&&(n.url=f(i.getAttribute("url")))}ec.materials[e.getAttribute("id")]=n}),m(et,"library_cameras","camera",function(e){let n={name:e.getAttribute("name")};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];1===i.nodeType&&"optics"===i.nodeName&&(n.optics=function(e){for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];if("technique_common"===i.nodeName){var n=i;let e={};for(let r=0;r<n.childNodes.length;r++){let i=n.childNodes[r];switch(i.nodeName){case"perspective":case"orthographic":e.technique=i.nodeName,e.parameters=function(e){let n={};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];switch(i.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":n[i.nodeName]=parseFloat(i.textContent)}}return n}(i)}}return e}}return{}}(i))}ec.cameras[e.getAttribute("id")]=n}),m(et,"library_lights","light",function(e){let n={};for(let r=0,o=e.childNodes.length;r<o;r++){let o=e.childNodes[r];1===o.nodeType&&"technique_common"===o.nodeName&&(n=function(e){let n={};for(let r=0,o=e.childNodes.length;r<o;r++){let o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"directional":case"point":case"spot":case"ambient":n.technique=o.nodeName,n.parameters=function(e){let n={};for(let r=0,o=e.childNodes.length;r<o;r++){let o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"color":let a=h(o.textContent);n.color=new i.Q1f().fromArray(a).convertSRGBToLinear();break;case"falloff_angle":n.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":let s=parseFloat(o.textContent);n.distance=s?Math.sqrt(1/s):0}}return n}(o)}}return n}(o))}ec.lights[e.getAttribute("id")]=n}),m(et,"library_geometries","geometry",function(e){let n={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=u(e,"mesh")[0];if(void 0!==r){for(let e=0;e<r.childNodes.length;e++){let i=r.childNodes[e];if(1!==i.nodeType)continue;let o=i.getAttribute("id");switch(i.nodeName){case"source":n.sources[o]=R(i);break;case"vertices":n.vertices=function(e){let n={};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];1===i.nodeType&&(n[i.getAttribute("semantic")]=f(i.getAttribute("source")))}return n}(i);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",i.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":n.primitives.push(function(e){let n={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1};for(let r=0,i=e.childNodes.length;r<i;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":let o=f(i.getAttribute("source")),a=i.getAttribute("semantic"),s=parseInt(i.getAttribute("offset")),l=parseInt(i.getAttribute("set")),c=l>0?a+l:a;n.inputs[c]={id:o,offset:s},n.stride=Math.max(n.stride,s+1),"TEXCOORD"===a&&(n.hasUV=!0);break;case"vcount":n.vcount=d(i.textContent);break;case"p":n.p=d(i.textContent)}}return n}(i));break;default:console.log(i)}}ec.geometries[e.getAttribute("id")]=n}}),m(et,"library_nodes","node",q),m(et,"library_visual_scenes","visual_scene",function(e){let n={name:e.getAttribute("name"),children:[]},r=e.getElementsByTagName("node");for(let e=0;e<r.length;e++){let n=r[e];!1===n.hasAttribute("id")&&n.setAttribute("id","three_default_"+el++)}let i=u(e,"node");for(let e=0;e<i.length;e++)n.children.push(q(i[e]));ec.visualScenes[e.getAttribute("id")]=n}),m(et,"library_kinematics_models","kinematics_model",function(e){let n={name:e.getAttribute("name")||"",joints:{},links:[]};for(let r=0;r<e.childNodes.length;r++){let o=e.childNodes[r];1===o.nodeType&&"technique_common"===o.nodeName&&function(e,n){for(let r=0;r<e.childNodes.length;r++){let o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"joint":n.joints[o.getAttribute("sid")]=function(e){let n;for(let r=0;r<e.childNodes.length;r++){let o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"prismatic":case"revolute":n=function(e){let n={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new i.Pq0,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"axis":let o=h(i.textContent);n.axis.fromArray(o);break;case"limits":let a=i.getElementsByTagName("max")[0],s=i.getElementsByTagName("min")[0];n.limits.max=parseFloat(a.textContent),n.limits.min=parseFloat(s.textContent)}}return n.limits.min>=n.limits.max&&(n.static=!0),n.middlePosition=(n.limits.min+n.limits.max)/2,n}(o)}}return n}(o);break;case"link":n.links.push(function e(n){let r={sid:n.getAttribute("sid"),name:n.getAttribute("name")||"",attachments:[],transforms:[]};for(let i=0;i<n.childNodes.length;i++){let o=n.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"attachment_full":r.attachments.push(function(n){let r={joint:n.getAttribute("joint").split("/").pop(),transforms:[],links:[]};for(let i=0;i<n.childNodes.length;i++){let o=n.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"link":r.links.push(e(o));break;case"matrix":case"translate":case"rotate":r.transforms.push(B(o))}}return r}(o));break;case"matrix":case"translate":case"rotate":r.transforms.push(B(o))}}return r}(o))}}}(o,n)}ec.kinematicsModels[e.getAttribute("id")]=n}),m(et,"library_physics_models","physics_model",function(e){let n={name:e.getAttribute("name")||"",rigidBodies:{}};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];1===i.nodeType&&"rigid_body"===i.nodeName&&(n.rigidBodies[i.getAttribute("name")]={},function(e,n){for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];1===i.nodeType&&"technique_common"===i.nodeName&&function(e,n){for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"inertia":n.inertia=h(i.textContent);break;case"mass":n.mass=h(i.textContent)[0]}}}(i,n)}}(i,n.rigidBodies[i.getAttribute("name")]))}ec.physicsModels[e.getAttribute("id")]=n}),m(et,"scene","instance_kinematics_scene",function(e){let n={bindJointAxis:[]};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];1===i.nodeType&&"bind_joint_axis"===i.nodeName&&n.bindJointAxis.push(function(e){let n={target:e.getAttribute("target").split("/").pop()};for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];if(1===i.nodeType&&"axis"===i.nodeName){n.axis=i.getElementsByTagName("param")[0].textContent;let e=n.axis.split("inst_").pop().split("axis")[0];n.jointIndex=e.substring(0,e.length-1)}}return n}(i))}ec.kinematicsScenes[f(e.getAttribute("url"))]=n}),g(ec.animations,v),g(ec.clips,k),g(ec.controllers,E),g(ec.images,A),g(ec.effects,S),g(ec.materials,D),g(ec.cameras,N),g(ec.lights,j),g(ec.geometries,L),g(ec.visualScenes,J),function(){let e=ec.clips;if(!0===p(e)){if(!1===p(ec.animations)){let e=[];for(let n in ec.animations){let r=b(n);for(let n=0,i=r.length;n<i;n++)e.push(r[n])}ea.push(new i.tz3("default",-1,e))}}else for(let n in e)ea.push(y(ec.clips[n],k))}(),function(){let e=Object.keys(ec.kinematicsModels)[0],n=Object.keys(ec.kinematicsScenes)[0],r=Object.keys(ec.visualScenes)[0];if(void 0===e||void 0===n)return;let o=y(ec.kinematicsModels[e],F),a=y(ec.kinematicsScenes[n],U),s=Q(r),l=a.bindJointAxis,c={};for(let e=0,n=l.length;e<n;e++){let n=l[e],r=et.querySelector('[sid="'+n.target+'"]');if(r){let e=r.parentElement;!function(e,n){let r=n.getAttribute("name"),a=o.joints[e];s.traverse(function(o){o.name===r&&(c[e]={object:o,transforms:function(e){let n=[],r=et.querySelector('[id="'+e.id+'"]');for(let e=0;e<r.childNodes.length;e++){let o,a,s=r.childNodes[e];if(1===s.nodeType)switch(s.nodeName){case"matrix":o=h(s.textContent);let l=new i.kn4().fromArray(o).transpose();n.push({sid:s.getAttribute("sid"),type:s.nodeName,obj:l});break;case"translate":case"scale":o=h(s.textContent),a=new i.Pq0().fromArray(o),n.push({sid:s.getAttribute("sid"),type:s.nodeName,obj:a});break;case"rotate":o=h(s.textContent),a=new i.Pq0().fromArray(o);let c=i.cj9.degToRad(o[3]);n.push({sid:s.getAttribute("sid"),type:s.nodeName,obj:a,angle:c})}}return n}(n),joint:a,position:a.zeroPosition})})}(n.jointIndex,e)}}let u=new i.kn4;es={joints:o&&o.joints,getJointValue:function(e){let n=c[e];if(n)return n.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,n){let r=c[e];if(r){let o=r.joint;if(n>o.limits.max||n<o.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+n+" outside of limits (min: "+o.limits.min+", max: "+o.limits.max+").");else if(o.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{let a=r.object,s=o.axis,l=r.transforms;V.identity();for(let r=0;r<l.length;r++){let a=l[r];if(a.sid&&-1!==a.sid.indexOf(e))switch(o.type){case"revolute":V.multiply(u.makeRotationAxis(s,i.cj9.degToRad(n)));break;case"prismatic":V.multiply(u.makeTranslation(s.x*n,s.y*n,s.z*n));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+o.type)}else switch(a.type){case"matrix":V.multiply(a.obj);break;case"translate":V.multiply(u.makeTranslation(a.obj.x,a.obj.y,a.obj.z));break;case"scale":V.scale(a.obj);break;case"rotate":V.multiply(u.makeRotationAxis(a.obj,a.angle))}}a.matrix.copy(V),a.matrix.decompose(a.position,a.quaternion,a.scale),c[e].position=n}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}();let eu=(a=u(et,"scene")[0],Q(f(u(a,"instance_visual_scene")[0].getAttribute("url"))));return eu.animations=ea,"Z_UP"===er.upAxis&&(console.warn("THREE.ColladaLoader: You are loading an asset with a Z-UP coordinate system. The loader just rotates the asset to transform it into Y-UP. The vertex data are not converted, see #24289."),eu.rotation.set(-Math.PI/2,0,0)),eu.scale.multiplyScalar(er.unit),{get animations(){return console.warn("THREE.ColladaLoader: Please access animations over scene.animations now."),ea},kinematics:es,library:ec,scene:eu}}}THREE.ColladaLoader=a,AFRAME.registerComponent("collada-model-legacy",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new THREE.ColladaLoader},update:function(){var e=this,n=this.el,r=this.data,i=this.el.sceneEl.systems.renderer;r&&(this.remove(),this.loader.load(r,function(r){e.model=r.scene,e.model.traverse(function(e){if(e.isMesh){var n=e.material;n.color&&i.applyColorCorrection(n.color),n.map&&i.applyColorCorrection(n.map),n.emissive&&i.applyColorCorrection(n.emissive),n.emissiveMap&&i.applyColorCorrection(n.emissiveMap)}}),n.setObject3D("mesh",e.model),n.emit("model-loaded",{format:"collada",model:e.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},74339:(e,n,r)=>{e.exports=function(e){if("uniqueLinkId"in(e=e||{})&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n","\n","Note: there is also change in default behavior: From now on each graph\nis considered to be not a multigraph by default (each edge is unique)."),e.multigraph=e.uniqueLinkId),void 0===e.multigraph&&(e.multigraph=!1),"function"!=typeof Map)throw Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var n,r=new Map,c=new Map,u={},h=0,d=e.multigraph?function(e,n,r){var i=l(e,n),o=u.hasOwnProperty(i);if(o||T(e,n)){o||(u[i]=0);var a="@"+ ++u[i];i=l(e+a,n+a)}return new s(e,n,r,i)}:function(e,n,r){var i=l(e,n),o=c.get(i);return o?(o.data=r,o):new s(e,n,r,i)},f=[],p=C,m=C,g=C,y=C,v={version:20,addNode:w,addLink:function(e,n,r){g();var i=x(e)||w(e),o=x(n)||w(n),s=d(e,n,r),l=c.has(s.id);return c.set(s.id,s),a(i,s),e!==n&&a(o,s),p(s,l?"update":"add"),y(),s},removeLink:function(e,n){return void 0!==n&&(e=T(e,n)),O(e)},removeNode:k,getNode:x,getNodeCount:E,getLinkCount:A,getEdgeCount:A,getLinksCount:A,getNodesCount:E,getLinks:function(e){var n=x(e);return n?n.links:null},forEachNode:S,forEachLinkedNode:function(e,n,i){var o=x(e);if(o&&o.links&&"function"==typeof n)if(i)return function(e,n,i){for(var o=e.values(),a=o.next();!a.done;){var s=a.value;if(s.fromId===n&&i(r.get(s.toId),s))return!0;a=o.next()}}(o.links,e,n);else return function(e,n,i){for(var o=e.values(),a=o.next();!a.done;){var s=a.value,l=s.fromId===n?s.toId:s.fromId;if(i(r.get(l),s))return!0;a=o.next()}}(o.links,e,n)},forEachLink:function(e){if("function"==typeof e)for(var n=c.values(),r=n.next();!r.done;){if(e(r.value))return!0;r=n.next()}},beginUpdate:g,endUpdate:y,clear:function(){g(),S(function(e){k(e.id)}),y()},hasLink:T,hasNode:x,getLink:T};return i(v),n=v.on,v.on=function(){return v.beginUpdate=g=P,v.endUpdate=y=M,p=b,m=_,v.on=n,n.apply(v,arguments)},v;function b(e,n){f.push({link:e,changeType:n})}function _(e,n){f.push({node:e,changeType:n})}function w(e,n){if(void 0===e)throw Error("Invalid node identifier");g();var i=x(e);return i?(i.data=n,m(i,"update")):(i=new o(e,n),m(i,"add")),r.set(e,i),y(),i}function x(e){return r.get(e)}function k(e){var n=x(e);if(!n)return!1;g();var i=n.links;return i&&(i.forEach(O),n.links=null),r.delete(e),m(n,"remove"),y(),!0}function E(){return r.size}function A(){return c.size}function O(e){if(!e||!c.get(e.id))return!1;g(),c.delete(e.id);var n=x(e.fromId),r=x(e.toId);return n&&n.links.delete(e),r&&r.links.delete(e),p(e,"remove"),y(),!0}function T(e,n){if(void 0!==e&&void 0!==n)return c.get(l(e,n))}function C(){}function P(){h+=1}function M(){0==(h-=1)&&f.length>0&&(v.fire("changed",f),f.length=0)}function S(e){if("function"!=typeof e)throw Error("Function is expected to iterate over graph nodes. You passed "+e);for(var n=r.values(),i=n.next();!i.done;){if(e(i.value))return!0;i=n.next()}}};var i=r(6106);function o(e,n){this.id=e,this.links=null,this.data=n}function a(e,n){e.links?e.links.add(n):e.links=new Set([n])}function s(e,n,r,i){this.fromId=e,this.toId=n,this.data=r,this.id=i}function l(e,n){return e.toString()+"\uD83D\uDC49 "+n.toString()}},75276:(e,n,r)=>{"use strict";r.r(n);var i=r(69122),o=r.n(i);AFRAME.registerComponent("nipple-controls",{schema:{enabled:{default:!0},mode:{default:"dynamic",oneOf:["static","semi","dynamic"]},rotationSensitivity:{default:1},moveJoystickEnabled:{default:!0},lookJoystickEnabled:{default:!0},sideMargin:{default:"30px"},bottomMargin:{default:"70px"},moveJoystickPosition:{default:"left",oneOf:["left","right"]},lookJoystickPosition:{default:"right",oneOf:["left","right"]}},init(){this.dVelocity=new THREE.Vector3,this.lookVector=new THREE.Vector2;let e=this.el.querySelector("[look-controls]").components["look-controls"];this.pitchObject=e.pitchObject,this.yawObject=e.yawObject,this.rigRotation=this.el.object3D.rotation,this.moveData=void 0,this.lookData=void 0,this.moving=!1,this.rotating=!1},update(e){(this.data.moveJoystickPosition!==e.moveJoystickPosition||this.data.sideMargin!==e.sideMargin||this.data.bottomMargin!==e.bottomMargin||this.data.mode!==e.mode)&&this.removeMoveJoystick(),(this.data.lookJoystickPosition!==e.lookJoystickPosition||this.data.sideMargin!==e.sideMargin||this.data.bottomMargin!==e.bottomMargin||this.data.mode!==e.mode)&&this.removeLookJoystick(),this.data.enabled&&this.data.moveJoystickEnabled?this.createMoveJoystick():this.removeMoveJoystick(),this.data.enabled&&this.data.lookJoystickEnabled?this.createLookJoystick():this.removeLookJoystick()},pause(){this.moving=!1,this.rotating=!1},remove(){this.removeMoveJoystick(),this.removeLookJoystick()},isVelocityActive(){return this.data.enabled&&this.moving},getVelocityDelta(){if(this.dVelocity.set(0,0,0),this.isVelocityActive()){let e=this.moveData.force<1?this.moveData.force:1,n=this.moveData.angle.radian,r=Math.cos(n)*e,i=-Math.sin(n)*e;this.dVelocity.set(r,0,i)}return this.dVelocity},isRotationActive(){return this.data.enabled&&this.rotating},updateRotation(e){if(!this.isRotationActive())return;let n=this.lookData.force<1?this.lookData.force:1,r=this.lookData.angle.radian,i=this.lookVector;i.x=Math.cos(r)*n,i.y=Math.sin(r)*n,i.multiplyScalar(this.data.rotationSensitivity*e/1e3),this.yawObject.rotation.y-=i.x;let o=this.pitchObject.rotation.x+i.y;o=Math.max(-Math.PI/2,Math.min(Math.PI/2,o)),this.pitchObject.rotation.x=o},tick:function(e,n){this.updateRotation(n)},initLeftZone(){let e=document.createElement("div");e.setAttribute("id","joystickLeftZone"),e.setAttribute("style",`position:absolute;${this.data.moveJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`),document.body.appendChild(e),this.leftZone=e},initRightZone(){let e=document.createElement("div");e.setAttribute("id","joystickRightZone"),e.setAttribute("style",`position:absolute;${this.data.lookJoystickPosition}:${this.data.sideMargin};bottom:${this.data.bottomMargin};z-index:1`),document.body.appendChild(e),this.rightZone=e},createMoveJoystick(){if(this.moveJoystick)return;this.initLeftZone();let e={mode:this.data.mode,zone:this.leftZone,color:"white",fadeTime:0};this.leftZone.style.width="100px","static"===this.data.mode?(this.leftZone.style.height="100px",e.position={left:"50%",bottom:"50%"}):this.leftZone.style.height="400px",this.moveJoystick=o().create(e),this.moveJoystick.on("move",(e,n)=>{this.moveData=n,this.moving=!0}),this.moveJoystick.on("end",(e,n)=>{this.moving=!1})},createLookJoystick(){if(this.lookJoystick)return;this.initRightZone();let e={mode:this.data.mode,zone:this.rightZone,color:"white",fadeTime:0};this.rightZone.style.width="100px","static"===this.data.mode?(this.rightZone.style.height="100px",e.position={left:"50%",bottom:"50%"}):this.rightZone.style.height="400px",this.lookJoystick=o().create(e),this.lookJoystick.on("move",(e,n)=>{this.lookData=n,this.rotating=!0}),this.lookJoystick.on("end",(e,n)=>{this.rotating=!1})},removeMoveJoystick(){this.moveJoystick&&(this.moveJoystick.destroy(),this.moveJoystick=void 0),this.moveData=void 0,this.leftZone&&this.leftZone.parentNode&&(this.leftZone.remove(),this.leftZone=void 0)},removeLookJoystick(){this.lookJoystick&&(this.lookJoystick.destroy(),this.lookJoystick=void 0),this.lookData=void 0,this.rightZone&&this.rightZone.parentNode&&(this.rightZone.remove(),this.rightZone=void 0)}})},76568:(e,n,r)=>{let i=r(60455);function o(e){let n=i(e);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${n("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${n("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${n("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${n("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${n("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${n("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${n("body.pos.{var} += d{var};",{indent:4})}

    ${n("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${n("t{var} * t{var}",{join:" + "})})/length;
`}e.exports=function(e){return Function("bodies","timeStep","adaptiveTimeStepWeight",o(e))},e.exports.generateIntegratorFunctionBody=o},77523:e=>{e.exports.Primitive=AFRAME.registerPrimitive("a-ocean",{defaultComponents:{ocean:{},rotation:{x:-90,y:0,z:0}},mappings:{width:"ocean.width",depth:"ocean.depth",density:"ocean.density",amplitude:"ocean.amplitude",amplitudeVariance:"ocean.amplitudeVariance",speed:"ocean.speed",speedVariance:"ocean.speedVariance",color:"ocean.color",opacity:"ocean.opacity"}}),e.exports.Component=AFRAME.registerComponent("ocean",{schema:{width:{default:10,min:0},depth:{default:10,min:0},density:{default:10},amplitude:{default:.1},amplitudeVariance:{default:.3},speed:{default:1},speedVariance:{default:2},color:{default:"#7AD2F7",type:"color"},opacity:{default:.8}},play:function(){let e=this.el,n=this.data,r=e.components.material,i=new THREE.PlaneGeometry(n.width,n.depth,n.density,n.density);this.waves=[];let o=i.getAttribute("position");for(let e=0;e<o.count;e++)this.waves.push({z:o.getZ(e),ang:Math.random()*Math.PI*2,amp:n.amplitude+Math.random()*n.amplitudeVariance,speed:(n.speed+Math.random()*n.speedVariance)/1e3});r||((r={}).material=new THREE.MeshPhongMaterial({color:n.color,transparent:n.opacity<1,opacity:n.opacity,flatShading:!0})),this.mesh=new THREE.Mesh(i,r.material),e.setObject3D("mesh",this.mesh)},remove:function(){this.el.removeObject3D("mesh")},tick:function(e,n){if(!n)return;let r=this.mesh.geometry.getAttribute("position");for(let e=0;e<r.count;e++){let i=this.waves[e],o=i.z+Math.sin(i.ang)*i.amp;r.setZ(e,o),i.ang+=i.speed*n}r.needsUpdate=!0}})},77658:(e,n,r)=>{"use strict";r.r(n),r.d(n,{Pathfinding:()=>l,PathfindingHelper:()=>c});var i=r(66691);class o{static roundNumber(e,n){let r=Math.pow(10,n);return Math.round(e*r)/r}static sample(e){return e[Math.floor(Math.random()*e.length)]}static distanceToSquared(e,n){var r=e.x-n.x,i=e.y-n.y,o=e.z-n.z;return r*r+i*i+o*o}static isPointInPoly(e,n){for(var r=!1,i=-1,o=e.length,a=o-1;++i<o;a=i)(e[i].z<=n.z&&n.z<e[a].z||e[a].z<=n.z&&n.z<e[i].z)&&n.x<(e[a].x-e[i].x)*(n.z-e[i].z)/(e[a].z-e[i].z)+e[i].x&&(r=!r);return r}static isVectorInPolygon(e,n,r){var i=1e5,o=-1e5,a=[];return n.vertexIds.forEach(e=>{i=Math.min(r[e].y,i),o=Math.max(r[e].y,o),a.push(r[e])}),!!(e.y<o+.5&&e.y>i-.5&&this.isPointInPoly(a,e))}static triarea2(e,n,r){return(r.x-e.x)*(n.z-e.z)-(n.x-e.x)*(r.z-e.z)}static vequal(e,n){return 1e-5>this.distanceToSquared(e,n)}static mergeVertices(e,n=1e-4){n=Math.max(n,Number.EPSILON);for(var r={},o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,l=0,c=[],u=[],h=Math.log10(1/n),d=Math.pow(10,h),f=0;f<s;f++){var p=o?o.getX(f):f,m="";(m+=~~(a.getX(p)*d)+","+~~(a.getY(p)*d)+","+~~(a.getZ(p)*d)+",")in r?c.push(r[m]):(u.push(a.getX(p)),u.push(a.getY(p)),u.push(a.getZ(p)),r[m]=l,c.push(l),l++)}let g=new i.THS(new Float32Array(u),a.itemSize,a.normalized),y=new i.LoY;return y.setAttribute("position",g),y.setIndex(c),y}}class a{constructor(e){this.content=[],this.scoreFunction=e}push(e){this.content.push(e),this.sinkDown(this.content.length-1)}pop(){let e=this.content[0],n=this.content.pop();return this.content.length>0&&(this.content[0]=n,this.bubbleUp(0)),e}remove(e){let n=this.content.indexOf(e),r=this.content.pop();n!==this.content.length-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.sinkDown(n):this.bubbleUp(n))}size(){return this.content.length}rescoreElement(e){this.sinkDown(this.content.indexOf(e))}sinkDown(e){let n=this.content[e];for(;e>0;){let r=(e+1>>1)-1,i=this.content[r];if(!(this.scoreFunction(n)<this.scoreFunction(i)))break;this.content[r]=n,this.content[e]=i,e=r}}bubbleUp(e){let n=this.content.length,r=this.content[e],i=this.scoreFunction(r);for(;;){let o=e+1<<1,a=o-1,s,l=null;if(a<n&&(s=this.scoreFunction(this.content[a]))<i&&(l=a),o<n&&this.scoreFunction(this.content[o])<(null===l?i:s)&&(l=o),null===l)break;this.content[e]=this.content[l],this.content[l]=r,e=l}}}class s{constructor(){this.portals=[]}push(e,n){void 0===n&&(n=e),this.portals.push({left:e,right:n})}stringPull(){let e=this.portals,n=[],r,i,a,s=0,l=0,c=0;r=e[0].left,i=e[0].left,a=e[0].right,n.push(r);for(let u=1;u<e.length;u++){let h=e[u].left,d=e[u].right;if(0>=o.triarea2(r,a,d)){if(!(o.vequal(r,a)||o.triarea2(r,i,d)>0)){n.push(i),r=i,s=l,i=r,a=r,l=s,c=s,u=s;continue}a=d,c=u}if(o.triarea2(r,i,h)>=0){if(!(o.vequal(r,i)||0>o.triarea2(r,a,h))){n.push(a),r=a,s=c,i=r,a=r,l=s,c=s,u=s;continue}i=h,l=u}}return 0!==n.length&&o.vequal(n[n.length-1],e[e.length-1].left)||n.push(e[e.length-1].left),this.path=n,n}}class l{constructor(){this.zones={}}static createZone(e,n=1e-4){return(class{static buildZone(e,n){let r=this._buildNavigationMesh(e,n),a={};r.vertices.forEach(e=>{e.x=o.roundNumber(e.x,2),e.y=o.roundNumber(e.y,2),e.z=o.roundNumber(e.z,2)}),a.vertices=r.vertices;let s=this._buildPolygonGroups(r);return a.groups=Array(s.length),s.forEach((e,n)=>{let r=new Map;e.forEach((e,n)=>{r.set(e,n)});let s=Array(e.length);e.forEach((e,n)=>{let l=[];e.neighbours.forEach(e=>l.push(r.get(e)));let c=[];e.neighbours.forEach(n=>c.push(this._getSharedVerticesInOrder(e,n)));let u=new i.Pq0(0,0,0);u.add(a.vertices[e.vertexIds[0]]),u.add(a.vertices[e.vertexIds[1]]),u.add(a.vertices[e.vertexIds[2]]),u.divideScalar(3),u.x=o.roundNumber(u.x,2),u.y=o.roundNumber(u.y,2),u.z=o.roundNumber(u.z,2),s[n]={id:n,neighbours:l,vertexIds:e.vertexIds,centroid:u,portals:c}}),a.groups[n]=s}),a}static _buildNavigationMesh(e,n){return e=o.mergeVertices(e,n),this._buildPolygonsFromGeometry(e)}static _spreadGroupId(e){let n=new Set([e]);for(;n.size>0;){let r=n;n=new Set,r.forEach(r=>{r.group=e.group,r.neighbours.forEach(e=>{void 0===e.group&&n.add(e)})})}}static _buildPolygonGroups(e){let n=[];return e.polygons.forEach(e=>{void 0!==e.group?n[e.group].push(e):(e.group=n.length,this._spreadGroupId(e),n.push([e]))}),n}static _buildPolygonNeighbours(e,n){let r=new Set,i=n[e.vertexIds[1]],o=n[e.vertexIds[2]];return n[e.vertexIds[0]].forEach(n=>{n!==e&&(i.includes(n)||o.includes(n))&&r.add(n)}),i.forEach(n=>{n!==e&&o.includes(n)&&r.add(n)}),r}static _buildPolygonsFromGeometry(e){let n=[],r=[],o=e.attributes.position,a=e.index,s=[];for(let e=0;e<o.count;e++)r.push((new i.Pq0).fromBufferAttribute(o,e)),s[e]=[];for(let r=0;r<e.index.count;r+=3){let e=a.getX(r),i=a.getX(r+1),o=a.getX(r+2),l={vertexIds:[e,i,o],neighbours:null};n.push(l),s[e].push(l),s[i].push(l),s[o].push(l)}return n.forEach(e=>{e.neighbours=this._buildPolygonNeighbours(e,s)}),{polygons:n,vertices:r}}static _getSharedVerticesInOrder(e,n){let r=e.vertexIds,i=r[0],o=r[1],a=r[2],s=n.vertexIds,l=s.includes(i),c=s.includes(o),u=s.includes(a);return l&&c&&u?Array.from(r):l&&c?[i,o]:c&&u?[o,a]:l&&u?[a,i]:(console.warn("Error processing navigation mesh neighbors; neighbors with <2 shared vertices found."),[])}}).buildZone(e,n)}setZoneData(e,n){this.zones[e]=n}getRandomNode(e,n,r,a){if(!this.zones[e])return new i.Pq0;r=r||null,a=a||0;let s=[];return this.zones[e].groups[n].forEach(e=>{r&&a?o.distanceToSquared(r,e.centroid)<a*a&&s.push(e.centroid):s.push(e.centroid)}),o.sample(s)||new i.Pq0}getClosestNode(e,n,r,i=!1){let a=this.zones[n].vertices,s=null,l=1/0;return this.zones[n].groups[r].forEach(n=>{let r=o.distanceToSquared(n.centroid,e);r<l&&(!i||o.isVectorInPolygon(e,n,a))&&(s=n,l=r)}),s}findPath(e,n,r,l){let c=this.zones[r].groups[l],u=this.zones[r].vertices,h=this.getClosestNode(e,r,l,!0),d=this.getClosestNode(n,r,l,!0);if(!h||!d)return null;let f=(class{static init(e){for(let n=0;n<e.length;n++){let r=e[n];r.f=0,r.g=0,r.h=0,r.cost=1,r.visited=!1,r.closed=!1,r.parent=null}}static cleanUp(e){for(let n=0;n<e.length;n++){let r=e[n];delete r.f,delete r.g,delete r.h,delete r.cost,delete r.visited,delete r.closed,delete r.parent}}static heap(){return new a(function(e){return e.f})}static search(e,n,r){this.init(e);let i=this.heap();for(i.push(n);i.size()>0;){let n=i.pop();if(n===r){let e=n,r=[];for(;e.parent;)r.push(e),e=e.parent;return this.cleanUp(r),r.reverse()}n.closed=!0;let o=this.neighbours(e,n);for(let e=0,a=o.length;e<a;e++){let a=o[e];if(a.closed)continue;let s=n.g+a.cost,l=a.visited;if(!l||s<a.g){if(a.visited=!0,a.parent=n,!a.centroid||!r.centroid)throw Error("Unexpected state");a.h=a.h||this.heuristic(a.centroid,r.centroid),a.g=s,a.f=a.g+a.h,l?i.rescoreElement(a):i.push(a)}}}return[]}static heuristic(e,n){return o.distanceToSquared(e,n)}static neighbours(e,n){let r=[];for(let i=0;i<n.neighbours.length;i++)r.push(e[n.neighbours[i]]);return r}}).search(c,h,d),p=new s;p.push(e);for(let e=0;e<f.length;e++){let n=f[e],r=f[e+1];if(r){let e=function(e,n){for(var r=0;r<e.neighbours.length;r++)if(e.neighbours[r]===n.id)return e.portals[r]}(n,r);p.push(u[e[0]],u[e[1]])}}p.push(n),p.stringPull();let m=p.path.map(e=>new i.Pq0(e.x,e.y,e.z));return m.shift(),m}}l.prototype.getGroup=function(){let e=new i.Zcv;return function(n,r,i=!1){if(!this.zones[n])return null;let a=null,s=2500,l=this.zones[n];for(let n=0;n<l.groups.length;n++)for(let c of l.groups[n]){if(i&&(e.setFromCoplanarPoints(l.vertices[c.vertexIds[0]],l.vertices[c.vertexIds[1]],l.vertices[c.vertexIds[2]]),.01>Math.abs(e.distanceToPoint(r)))&&o.isPointInPoly([l.vertices[c.vertexIds[0]],l.vertices[c.vertexIds[1]],l.vertices[c.vertexIds[2]]],r))return n;let u=o.distanceToSquared(c.centroid,r);u<s&&(a=n,s=u)}return a}}(),l.prototype.clampStep=function(){let e=new i.Pq0,n=new i.Zcv,r=new i.lMl,o=new i.Pq0,a,s,l=new i.Pq0;return function(i,c,u,h,d,f){let p=this.zones[h].vertices,m=this.zones[h].groups[d],g=[u],y={};y[u.id]=0,a=void 0,l.set(0,0,0),s=1/0,n.setFromCoplanarPoints(p[u.vertexIds[0]],p[u.vertexIds[1]],p[u.vertexIds[2]]),n.projectPoint(c,e),o.copy(e);for(let n=g.pop();n;n=g.pop()){r.set(p[n.vertexIds[0]],p[n.vertexIds[1]],p[n.vertexIds[2]]),r.closestPointToPoint(o,e),e.distanceToSquared(o)<s&&(a=n,l.copy(e),s=e.distanceToSquared(o));let i=y[n.id];if(!(i>2))for(let e=0;e<n.neighbours.length;e++){let r=m[n.neighbours[e]];r.id in y||(g.push(r),y[r.id]=i+1)}}return f.copy(l),a}}();class c extends i.B69{constructor(){super(),this._playerMarker=new i.eaF(new i.Gu$(.25,32,32),new i.V9B({color:0xee836f})),this._targetMarker=new i.eaF(new i.iNn(.3,.3,.3),new i.V9B({color:0xdccb18})),this._nodeMarker=new i.eaF(new i.iNn(.1,.8,.1),new i.V9B({color:4417387})),this._stepMarker=new i.eaF(new i.iNn(.1,1,.1),new i.V9B({color:0xdcd3b2})),this._pathMarker=new i.B69,this._pathLineMaterial=new i.mrM({color:41903,linewidth:2}),this._pathPointMaterial=new i.V9B({color:41903}),this._pathPointGeometry=new i.Gu$(.08),this._markers=[this._playerMarker,this._targetMarker,this._nodeMarker,this._stepMarker,this._pathMarker],this._markers.forEach(e=>{e.visible=!1,this.add(e)})}setPath(e){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);e=[this._playerMarker.position].concat(e);let n=new i.LoY;n.setAttribute("position",new i.THS(new Float32Array(3*e.length),3));for(let r=0;r<e.length;r++)n.attributes.position.setXYZ(r,e[r].x,e[r].y+.2,e[r].z);this._pathMarker.add(new i.N1A(n,this._pathLineMaterial));for(let n=0;n<e.length-1;n++){let r=new i.eaF(this._pathPointGeometry,this._pathPointMaterial);r.position.copy(e[n]),r.position.y+=.2,this._pathMarker.add(r)}return this._pathMarker.visible=!0,this}setPlayerPosition(e){return this._playerMarker.position.copy(e),this._playerMarker.visible=!0,this}setTargetPosition(e){return this._targetMarker.position.copy(e),this._targetMarker.visible=!0,this}setNodePosition(e){return this._nodeMarker.position.copy(e),this._nodeMarker.visible=!0,this}setStepPosition(e){return this._stepMarker.position.copy(e),this._stepMarker.visible=!0,this}reset(){for(;this._pathMarker.children.length;)this._pathMarker.children[0].visible=!1,this._pathMarker.remove(this._pathMarker.children[0]);return this._markers.forEach(e=>{e.visible=!1}),this}}},79706:(e,n,r)=>{"use strict";var i=r(3717);function o(){}function a(){}a.resetWarningCache=o,e.exports=function(){function e(e,n,r,o,a,s){if(s!==i){var l=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function n(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:a,resetWarningCache:o};return r.PropTypes=r,r}},84118:e=>{e.exports=AFRAME.registerComponent("nav-mesh",{schema:{nodeName:{type:"string"}},init:function(){this.system=this.el.sceneEl.systems.nav,this.hasLoadedNavMesh=!1,this.nodeName=this.data.nodeName,this.el.addEventListener("object3dset",this.loadNavMesh.bind(this))},play:function(){this.hasLoadedNavMesh||this.loadNavMesh()},loadNavMesh:function(){let e;var n=this;let r=this.el.getObject3D("mesh");if(this.el.sceneEl.object3D,!r||(r.traverse(r=>{r.isMesh&&(!n.nodeName||r.name===n.nodeName)&&(e=r)}),!e))return;let i=e.geometry.clone();e.updateWorldMatrix(!0,!1),i.applyMatrix4(e.matrixWorld),this.system.setNavMeshGeometry(i),this.hasLoadedNavMesh=!0}})},84237:(e,n,r)=>{"use strict";function i(e,n,r){e.prototype=n.prototype=r,r.constructor=e}function o(e,n){var r=Object.create(e.prototype);for(var i in n)r[i]=n[i];return r}function a(){}r.d(n,{Ay:()=>_,Qh:()=>k});var s="\\s*([+-]?\\d+)\\s*",l="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",c="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",u=/^#([0-9a-f]{3,8})$/,h=RegExp(`^rgb\\(${s},${s},${s}\\)$`),d=RegExp(`^rgb\\(${c},${c},${c}\\)$`),f=RegExp(`^rgba\\(${s},${s},${s},${l}\\)$`),p=RegExp(`^rgba\\(${c},${c},${c},${l}\\)$`),m=RegExp(`^hsl\\(${l},${c},${c}\\)$`),g=RegExp(`^hsla\\(${l},${c},${c},${l}\\)$`),y={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function v(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function _(e){var n,r;return e=(e+"").trim().toLowerCase(),(n=u.exec(e))?(r=n[1].length,n=parseInt(n[1],16),6===r?w(n):3===r?new E(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===r?x(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===r?x(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=h.exec(e))?new E(n[1],n[2],n[3],1):(n=d.exec(e))?new E(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=f.exec(e))?x(n[1],n[2],n[3],n[4]):(n=p.exec(e))?x(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=m.exec(e))?M(n[1],n[2]/100,n[3]/100,1):(n=g.exec(e))?M(n[1],n[2]/100,n[3]/100,n[4]):y.hasOwnProperty(e)?w(y[e]):"transparent"===e?new E(NaN,NaN,NaN,0):null}function w(e){return new E(e>>16&255,e>>8&255,255&e,1)}function x(e,n,r,i){return i<=0&&(e=n=r=NaN),new E(e,n,r,i)}function k(e,n,r,i){var o;return 1==arguments.length?((o=e)instanceof a||(o=_(o)),o)?new E((o=o.rgb()).r,o.g,o.b,o.opacity):new E:new E(e,n,r,null==i?1:i)}function E(e,n,r,i){this.r=+e,this.g=+n,this.b=+r,this.opacity=+i}function A(){return`#${P(this.r)}${P(this.g)}${P(this.b)}`}function O(){let e=T(this.opacity);return`${1===e?"rgb(":"rgba("}${C(this.r)}, ${C(this.g)}, ${C(this.b)}${1===e?")":`, ${e})`}`}function T(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function C(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function P(e){return((e=C(e))<16?"0":"")+e.toString(16)}function M(e,n,r,i){return i<=0?e=n=r=NaN:r<=0||r>=1?e=n=NaN:n<=0&&(e=NaN),new D(e,n,r,i)}function S(e){if(e instanceof D)return new D(e.h,e.s,e.l,e.opacity);if(e instanceof a||(e=_(e)),!e)return new D;if(e instanceof D)return e;var n=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,o=Math.min(n,r,i),s=Math.max(n,r,i),l=NaN,c=s-o,u=(s+o)/2;return c?(l=n===s?(r-i)/c+(r<i)*6:r===s?(i-n)/c+2:(n-r)/c+4,c/=u<.5?s+o:2-s-o,l*=60):c=u>0&&u<1?0:l,new D(l,c,u,e.opacity)}function D(e,n,r,i){this.h=+e,this.s=+n,this.l=+r,this.opacity=+i}function N(e){return(e=(e||0)%360)<0?e+360:e}function j(e){return Math.max(0,Math.min(1,e||0))}function R(e,n,r){return(e<60?n+(r-n)*e/60:e<180?r:e<240?n+(r-n)*(240-e)/60:n)*255}i(a,_,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:v,formatHex:v,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return S(this).formatHsl()},formatRgb:b,toString:b}),i(E,k,o(a,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new E(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new E(C(this.r),C(this.g),C(this.b),T(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:A,formatHex:A,formatHex8:function(){return`#${P(this.r)}${P(this.g)}${P(this.b)}${P((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:O,toString:O})),i(D,function(e,n,r,i){return 1==arguments.length?S(e):new D(e,n,r,null==i?1:i)},o(a,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new D(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new D(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*n,o=2*r-i;return new E(R(e>=240?e-240:e+120,o,i),R(e,o,i),R(e<120?e+240:e-120,o,i),this.opacity)},clamp(){return new D(N(this.h),j(this.s),j(this.l),T(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=T(this.opacity);return`${1===e?"hsl(":"hsla("}${N(this.h)}, ${100*j(this.s)}%, ${100*j(this.l)}%${1===e?")":`, ${e})`}`}}))},90635:(e,n,r)=>{r(13576),r(3197),r(42729),r(52209),r(5489),r(12262),r(75276)},90816:e=>{e.exports=Object.assign(function(){},{FACE_1:0,FACE_2:1,FACE_3:2,FACE_4:3,L_SHOULDER_1:4,R_SHOULDER_1:5,L_SHOULDER_2:6,R_SHOULDER_2:7,SELECT:8,START:9,DPAD_UP:12,DPAD_DOWN:13,DPAD_LEFT:14,DPAD_RIGHT:15,VENDOR:16})},94525:e=>{e.exports=function(e){return 0===e?"x":1===e?"y":2===e?"z":"c"+(e+1)}},95062:(e,n,r)=>{e.exports=r(79706)()},95454:e=>{e.exports=AFRAME.registerComponent("normal-material",{init:function(){this.material=new THREE.MeshNormalMaterial({flatShading:!0}),this.applyMaterial=this.applyMaterial.bind(this),this.el.addEventListener("object3dset",this.applyMaterial),this.applyMaterial()},remove:function(){this.el.removeEventListener("object3dset",this.applyMaterial)},applyMaterial:function(){this.el.object3D.traverse(e=>{e.isMesh&&(e.material=this.material)})}})},95497:e=>{e.exports.Primitive=AFRAME.registerPrimitive("a-tube",{defaultComponents:{tube:{}},mappings:{path:"tube.path",segments:"tube.segments",radius:"tube.radius","radial-segments":"tube.radialSegments",closed:"tube.closed"}}),e.exports.Component=AFRAME.registerComponent("tube",{schema:{path:{default:[]},segments:{default:64},radius:{default:1},radialSegments:{default:8},closed:{default:!1}},init:function(){let e=this.el,n=this.data,r=e.components.material;if(!n.path.length)return void console.error("[a-tube] `path` property expected but not found.");let i=new THREE.CatmullRomCurve3(n.path.map(function(e){return e=e.split(" "),new THREE.Vector3(Number(e[0]),Number(e[1]),Number(e[2]))})),o=new THREE.TubeGeometry(i,n.segments,n.radius,n.radialSegments,n.closed);r||((r={}).material=new THREE.MeshPhongMaterial),this.mesh=new THREE.Mesh(o,r.material),this.el.setObject3D("mesh",this.mesh)},update:function(e){Object.keys(e).length&&(this.remove(),this.init())},remove:function(){this.mesh&&this.el.removeObject3D("mesh")}})},95704:(e,n,r)=>{e.exports=function(e){return Function("bodies","settings","random",o(e))},e.exports.generateFunctionBody=o;let i=r(60455);function o(e){let n=i(e);return`
  var boundingBox = {
    ${n("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${n("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${n("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${n("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${n("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${n("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${n("var max_{var} = -Infinity;",{indent:4})}
    ${n("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${n("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${n("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${n("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${n("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${n("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}}}]);